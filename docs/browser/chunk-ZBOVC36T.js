import{c as F}from"./chunk-B3W5V2XP.js";import{b as Ot}from"./chunk-TCQTMUK4.js";import{d as Gt}from"./chunk-OFGHVREP.js";import{a as q,b as wt,c as L}from"./chunk-R7P6RQXJ.js";import{b as T}from"./chunk-JLNQ6WQT.js";import{H as Rt,u as St,z as dt}from"./chunk-X7XJWAFC.js";import{a as Nt}from"./chunk-EPTSNNZF.js";import{a as D,c as mt}from"./chunk-I6LCIPDY.js";import{d as Tt,e as it}from"./chunk-Y6H3NTW7.js";import{a as H}from"./chunk-EBGO44EK.js";import{a as I}from"./chunk-7W6RATG7.js";import{b as j,c as $,d as V,e as v,n as U,u as x,v as ft,w as B,y as Pt}from"./chunk-2HUIJUS4.js";import{a as C,b as ut,c as It}from"./chunk-PYQRTZNZ.js";var et;(function(c){function s(n,l){let u=n[l],e=n[l+1],a=n[l+2];return Math.sqrt(u*u+e*e+a*a)}function o(n,l){let u=n[l],e=n[l+1],a=n[l+2],i=1/Math.sqrt(u*u+e*e+a*a);n[l]*=i,n[l+1]*=i,n[l+2]*=i}function t(n,l,u){n[l]*=u,n[l+1]*=u,n[l+2]*=u}function r(n,l,u,e,a,i=l){(a=a||n)[i]=n[l]+u[e],a[i+1]=n[l+1]+u[e+1],a[i+2]=n[l+2]+u[e+2]}function w(n,l,u,e,a,i=l){(a=a||n)[i]=n[l]-u[e],a[i+1]=n[l+1]-u[e+1],a[i+2]=n[l+2]-u[e+2]}c.length=s,c.normalize=o,c.scale=t,c.add=r,c.subtract=w})(et||(et={}));var J=et,pt=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],Ft=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],Ut=[0,0,1,0,1,1,0,1],Dt=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],Ct=new Array(36);for(let c=0;c<6;c++)for(let s=0;s<6;s++)Ct[6*c+s]=c;var Z=new Array(36);for(let c=0;c<6;c++)Z[6*c]=0,Z[6*c+1]=1,Z[6*c+2]=2,Z[6*c+3]=2,Z[6*c+4]=3,Z[6*c+5]=0;function ce(c,s){Array.isArray(s)||(s=[s,s,s]);let o=new Array(24);for(let t=0;t<8;t++)o[3*t]=pt[t][0]*s[0],o[3*t+1]=pt[t][1]*s[1],o[3*t+2]=pt[t][2]*s[2];return new F(c,[[I.POSITION,new T(o,Dt,3,!0)],[I.NORMAL,new T(Ft,Ct,3)],[I.UV0,new T(Ut,Z,2)]])}var yt=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],qt=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],vt=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],Bt=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function ue(c,s){Array.isArray(s)||(s=[s,s,s]);let o=new Array(18);for(let t=0;t<6;t++)o[3*t]=yt[t][0]*s[0],o[3*t+1]=yt[t][1]*s[1],o[3*t+2]=yt[t][2]*s[2];return new F(c,[[I.POSITION,new T(o,vt,3,!0)],[I.NORMAL,new T(qt,Bt,3)]])}var nt=L(-.5,0,-.5),ot=L(.5,0,-.5),rt=L(0,0,.5),st=L(0,.5,0),K=q(),Q=q(),X=q(),Y=q(),_=q();v(K,nt,st),v(Q,nt,ot),B(X,K,Q),x(X,X),v(K,ot,st),v(Q,ot,rt),B(Y,K,Q),x(Y,Y),v(K,rt,st),v(Q,rt,nt),B(_,K,Q),x(_,_);var gt=[nt,ot,rt,st],kt=[0,-1,0,X[0],X[1],X[2],Y[0],Y[1],Y[2],_[0],_[1],_[2]],zt=[0,1,2,3,1,0,3,2,1,3,0,2],Zt=[0,0,0,1,1,1,2,2,2,3,3,3];function fe(c,s){Array.isArray(s)||(s=[s,s,s]);let o=new Array(12);for(let t=0;t<4;t++)o[3*t]=gt[t][0]*s[0],o[3*t+1]=gt[t][1]*s[1],o[3*t+2]=gt[t][2]*s[2];return new F(c,[[I.POSITION,new T(o,zt,3,!0)],[I.NORMAL,new T(kt,Zt,3)]])}function ie(c,s,o,t,r={uv:!0}){let w=-Math.PI,n=2*Math.PI,l=-Math.PI/2,u=Math.PI,e=Math.max(3,Math.floor(o)),a=Math.max(2,Math.floor(t)),i=(e+1)*(a+1),A=D(3*i),P=D(3*i),N=D(2*i),O=[],m=0;for(let f=0;f<=a;f++){let G=[],h=f/a,S=l+h*u,d=Math.cos(S);for(let b=0;b<=e;b++){let k=b/e,y=w+k*n,E=Math.cos(y)*d,R=Math.sin(S),tt=-Math.sin(y)*d;A[3*m]=E*s,A[3*m+1]=R*s,A[3*m+2]=tt*s,P[3*m]=E,P[3*m+1]=R,P[3*m+2]=tt,N[2*m]=k,N[2*m+1]=h,G.push(m),++m}O.push(G)}let p=new Array;for(let f=0;f<a;f++)for(let G=0;G<e;G++){let h=O[f][G],S=O[f][G+1],d=O[f+1][G+1],b=O[f+1][G];f===0?(p.push(h),p.push(d),p.push(b)):f===a-1?(p.push(h),p.push(S),p.push(d)):(p.push(h),p.push(S),p.push(d),p.push(d),p.push(b),p.push(h))}let M=[[I.POSITION,new T(A,p,3,!0)],[I.NORMAL,new T(P,p,3,!0)]];return r.uv&&M.push([I.UV0,new T(N,p,2,!0)]),r.offset&&(M[0][0]=I.OFFSET,M.push([I.POSITION,new T(Float64Array.from(r.offset),it(p.length),3,!0)])),new F(c,M)}function me(c,s,o,t){let r=jt(s,o,t);return new F(c,r)}function jt(c,s,o){let t=c,r,w;if(o)r=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],w=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{let e=t*(1+Math.sqrt(5))/2;r=[-t,e,0,t,e,0,-t,-e,0,t,-e,0,0,-t,e,0,t,e,0,-t,-e,0,t,-e,e,0,-t,e,0,t,-e,0,-t,-e,0,t],w=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let e=0;e<r.length;e+=3)J.scale(r,e,c/J.length(r,e));let n={};function l(e,a){e>a&&([e,a]=[a,e]);let i=e.toString()+"."+a.toString();if(n[i])return n[i];let A=r.length;return r.length+=3,J.add(r,3*e,r,3*a,r,A),J.scale(r,A,c/J.length(r,A)),A/=3,n[i]=A,A}for(let e=0;e<s;e++){let a=w.length,i=new Array(4*a);for(let A=0;A<a;A+=3){let P=w[A],N=w[A+1],O=w[A+2],m=l(P,N),p=l(N,O),M=l(O,P),f=4*A;i[f]=P,i[f+1]=m,i[f+2]=M,i[f+3]=N,i[f+4]=p,i[f+5]=m,i[f+6]=O,i[f+7]=M,i[f+8]=p,i[f+9]=m,i[f+10]=p,i[f+11]=M}w=i,n={}}let u=mt(r);for(let e=0;e<u.length;e+=3)J.normalize(u,e);return[[I.POSITION,new T(mt(r),w,3,!0)],[I.NORMAL,new T(u,w,3,!0)]]}function we(c,s,o,t,r,w,n,l,u,e=null){let a=o?ut(o):C(),i=s?ut(s):It(0,0,1),A=t?[255*t[0],255*t[1],255*t[2],t.length>3?255*t[3]:255]:[255,255,255,255],P=w!=null&&w.length===2?w:[1,1],N=r!=null?[r]:[0],O=it(1),m=[[I.POSITION,new T(a,O,3,!0)],[I.NORMAL,new T(i,O,3,!0)],[I.COLOR,new T(A,O,4,!0)],[I.SIZE,new T(P,O,2)],[I.ROTATION,new T(N,O,1,!0)]];if(l&&m.push([I.UV0,new T(l,O,l.length)]),n!=null&&(n=[n[0],n[1],n[2],n[3]],m.push([I.CENTEROFFSETANDDISTANCE,new T(n,O,4)])),u){let p=[u[0],u[1],u[2],u[3]];m.push([I.FEATUREATTRIBUTE,new T(p,O,4)])}return new F(c,m,null,Ot.Point,e)}var Ht=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function Oe(c,s=Ht){let o=new Array(12);for(let e=0;e<4;e++)for(let a=0;a<3;a++)o[3*e+a]=s[e][a];let t=[0,1,2,2,3,0],r=[0,0,1],w=[0,0,0,0,0,0],n=[0,0,1,0,1,1,0,1],l=[255,255,255,255],u=[[I.POSITION,new T(o,t,3,!0)],[I.NORMAL,new T(r,w,3,!0)],[I.UV0,new T(n,t,2,!0)],[I.COLOR,new T(l,w,4,!0)]];return new F(c,u)}function Jt(c,s,o,t,r=!0,w=!0){let n=0,l=s,u=c,e=L(0,n,0),a=L(0,n+u,0),i=L(0,-1,0),A=L(0,1,0);t&&(n=u,a=L(0,0,0),e=L(0,n,0),i=L(0,1,0),A=L(0,-1,0));let P=[a,e],N=[i,A],O=o+2,m=Math.sqrt(u*u+l*l);if(t)for(let h=o-1;h>=0;h--){let S=h*(2*Math.PI/o),d=L(Math.cos(S)*l,n,Math.sin(S)*l);P.push(d);let b=L(u*Math.cos(S)/m,-l/m,u*Math.sin(S)/m);N.push(b)}else for(let h=0;h<o;h++){let S=h*(2*Math.PI/o),d=L(Math.cos(S)*l,n,Math.sin(S)*l);P.push(d);let b=L(u*Math.cos(S)/m,l/m,u*Math.sin(S)/m);N.push(b)}let p=new Array,M=new Array;if(r){for(let h=3;h<P.length;h++)p.push(1),p.push(h-1),p.push(h),M.push(0),M.push(0),M.push(0);p.push(P.length-1),p.push(2),p.push(1),M.push(0),M.push(0),M.push(0)}if(w){for(let h=3;h<P.length;h++)p.push(h),p.push(h-1),p.push(0),M.push(h),M.push(h-1),M.push(1);p.push(0),p.push(2),p.push(P.length-1),M.push(1),M.push(2),M.push(N.length-1)}let f=D(3*O);for(let h=0;h<O;h++)f[3*h]=P[h][0],f[3*h+1]=P[h][1],f[3*h+2]=P[h][2];let G=D(3*O);for(let h=0;h<O;h++)G[3*h]=N[h][0],G[3*h+1]=N[h][1],G[3*h+2]=N[h][2];return[[I.POSITION,new T(f,p,3,!0)],[I.NORMAL,new T(G,M,3,!0)]]}function pe(c,s,o,t,r,w=!0,n=!0){return new F(c,Jt(s,o,t,r,w,n))}function ye(c,s,o,t,r,w,n){let l=r?wt(r):L(1,0,0),u=w?wt(w):L(0,0,0);n??=!0;let e=q();x(e,l);let a=q();U(a,e,Math.abs(s));let i=q();U(i,a,-.5),V(i,i,u);let A=L(0,1,0);Math.abs(1-ft(e,A))<.2&&$(A,0,0,1);let P=q();B(P,e,A),x(P,P),B(A,P,e);let N=2*t+(n?2:0),O=t+(n?2:0),m=D(3*N),p=D(3*O),M=D(2*N),f=new Array(3*t*(n?4:2)),G=new Array(3*t*(n?4:2));n&&(m[3*(N-2)]=i[0],m[3*(N-2)+1]=i[1],m[3*(N-2)+2]=i[2],M[2*(N-2)]=0,M[2*(N-2)+1]=0,m[3*(N-1)]=m[3*(N-2)]+a[0],m[3*(N-1)+1]=m[3*(N-2)+1]+a[1],m[3*(N-1)+2]=m[3*(N-2)+2]+a[2],M[2*(N-1)]=1,M[2*(N-1)+1]=1,p[3*(O-2)]=-e[0],p[3*(O-2)+1]=-e[1],p[3*(O-2)+2]=-e[2],p[3*(O-1)]=e[0],p[3*(O-1)+1]=e[1],p[3*(O-1)+2]=e[2]);let h=(y,E,R)=>{f[y]=E,G[y]=R},S=0,d=q(),b=q();for(let y=0;y<t;y++){let E=y*(2*Math.PI/t);U(d,A,Math.sin(E)),U(b,P,Math.cos(E)),V(d,d,b),p[3*y]=d[0],p[3*y+1]=d[1],p[3*y+2]=d[2],U(d,d,o),V(d,d,i),m[3*y]=d[0],m[3*y+1]=d[1],m[3*y+2]=d[2],M[2*y]=y/t,M[2*y+1]=0,m[3*(y+t)]=m[3*y]+a[0],m[3*(y+t)+1]=m[3*y+1]+a[1],m[3*(y+t)+2]=m[3*y+2]+a[2],M[2*(y+t)]=y/t,M[2*y+1]=1;let R=(y+1)%t;h(S++,y,y),h(S++,y+t,y),h(S++,R,R),h(S++,R,R),h(S++,y+t,y),h(S++,R+t,R)}if(n){for(let y=0;y<t;y++){let E=(y+1)%t;h(S++,N-2,O-2),h(S++,y,O-2),h(S++,E,O-2)}for(let y=0;y<t;y++){let E=(y+1)%t;h(S++,y+t,O-1),h(S++,N-1,O-1),h(S++,E+t,O-1)}}let k=[[I.POSITION,new T(m,f,3,!0)],[I.NORMAL,new T(p,G,3,!0)],[I.UV0,new T(M,f,2,!0)]];return new F(c,k)}function ge(c,s,o,t,r,w){t=t||10,r=r==null||r,H(s.length>1);let n=[[0,0,0]],l=[],u=[];for(let e=0;e<t;e++){l.push([0,-e-1,-(e+1)%t-1]);let a=e/t*2*Math.PI;u.push([Math.cos(a)*o,Math.sin(a)*o])}return Kt(c,u,s,n,l,r,w)}function Kt(c,s,o,t,r,w,n=L(0,0,0)){let l=s.length,u=D(o.length*l*3+(6*t.length||0)),e=D(o.length*l*3+(t?6:0)),a=new Array,i=new Array,A=0,P=0,N=C(),O=C(),m=C(),p=C(),M=C(),f=C(),G=C(),h=C(),S=C(),d=C(),b=C(),k=C(),y=C(),E=St();$(S,0,1,0),v(O,o[1],o[0]),x(O,O),w?(V(h,o[0],n),x(m,h)):$(m,0,0,1),Lt(O,m,S,S,M,m,bt),j(p,m),j(k,M);for(let g=0;g<t.length;g++)U(f,M,t[g][0]),U(h,m,t[g][2]),V(f,f,h),V(f,f,o[0]),u[A++]=f[0],u[A++]=f[1],u[A++]=f[2];e[P++]=-O[0],e[P++]=-O[1],e[P++]=-O[2];for(let g=0;g<r.length;g++)a.push(r[g][0]>0?r[g][0]:-r[g][0]-1+t.length),a.push(r[g][1]>0?r[g][1]:-r[g][1]-1+t.length),a.push(r[g][2]>0?r[g][2]:-r[g][2]-1+t.length),i.push(0),i.push(0),i.push(0);let R=t.length,tt=t.length-1;for(let g=0;g<o.length;g++){let Mt=!1;g>0&&(j(N,O),g<o.length-1?(v(O,o[g+1],o[g]),x(O,O)):Mt=!0,V(d,N,O),x(d,d),V(b,o[g-1],p),dt(o[g],d,E),Rt(E,Gt(b,N),h)?(v(h,h,o[g]),x(m,h),B(M,d,m),x(M,M)):Lt(d,p,k,S,M,m,bt),j(p,m),j(k,M)),w&&(V(h,o[g],n),x(y,h));for(let z=0;z<l;z++)if(U(f,M,s[z][0]),U(h,m,s[z][1]),V(f,f,h),x(G,f),e[P++]=G[0],e[P++]=G[1],e[P++]=G[2],V(f,f,o[g]),u[A++]=f[0],u[A++]=f[1],u[A++]=f[2],!Mt){let lt=(z+1)%l;a.push(R+z),a.push(R+l+z),a.push(R+lt),a.push(R+lt),a.push(R+l+z),a.push(R+l+lt);for(let ct=0;ct<6;ct++){let Vt=a.length-6;i.push(a[Vt+ct]-tt)}}R+=l}let xt=o[o.length-1];for(let g=0;g<t.length;g++)U(f,M,t[g][0]),U(h,m,t[g][1]),V(f,f,h),V(f,f,xt),u[A++]=f[0],u[A++]=f[1],u[A++]=f[2];let at=P/3;e[P++]=O[0],e[P++]=O[1],e[P++]=O[2];let ht=R-l;for(let g=0;g<r.length;g++)a.push(r[g][0]>=0?R+r[g][0]:-r[g][0]-1+ht),a.push(r[g][2]>=0?R+r[g][2]:-r[g][2]-1+ht),a.push(r[g][1]>=0?R+r[g][1]:-r[g][1]-1+ht),i.push(at),i.push(at),i.push(at);let Et=[[I.POSITION,new T(u,a,3,!0)],[I.NORMAL,new T(e,i,3,!0)]];return new F(c,Et)}function Ae(c,s,o,t){H(s.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),H(s[0].length===3,"createPolylineGeometry(): malformed vertex"),H(o==null||o.length===s.length,"createPolylineGeometry: need same number of points and normals"),H(o==null||o[0].length===3,"createPolylineGeometry(): malformed normal");let r=Nt(3*s.length),w=new Array(2*(s.length-1)),n=0,l=0;for(let e=0;e<s.length;e++){for(let a=0;a<3;a++)r[n++]=s[e][a];e>0&&(w[l++]=e-1,w[l++]=e)}let u=[[I.POSITION,new T(r,w,3,!0)]];if(o){let e=D(3*o.length),a=0;for(let i=0;i<s.length;i++)for(let A=0;A<3;A++)e[a++]=o[i][A];u.push([I.NORMAL,new T(e,w,3,!0)])}return t&&u.push([I.COLOR,new T(t,Tt(t.length/4),4)]),new F(c,u,null,Ot.Line)}function Me(c,s,o,t,r,w=0){let n=new Array(18),l=[[-o,w,r/2],[t,w,r/2],[0,s+w,r/2],[-o,w,-r/2],[t,w,-r/2],[0,s+w,-r/2]],u=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let e=0;e<6;e++)n[3*e]=l[e][0],n[3*e+1]=l[e][1],n[3*e+2]=l[e][2];return new F(c,[[I.POSITION,new T(n,u,3,!0)]])}function Ie(c,s){let o=c.getMutableAttribute(I.POSITION).data;for(let t=0;t<o.length;t+=3){let r=o[t],w=o[t+1],n=o[t+2];$(W,r,w,n),Pt(W,W,s),o[t]=W[0],o[t+1]=W[1],o[t+2]=W[2]}}function Ne(c,s=c){let o=c.attributes,t=o.get(I.POSITION).data,r=o.get(I.NORMAL).data;if(r){let w=s.getMutableAttribute(I.NORMAL).data;for(let n=0;n<r.length;n+=3){let l=r[n+1];w[n+1]=-r[n+2],w[n+2]=l}}if(t){let w=s.getMutableAttribute(I.POSITION).data;for(let n=0;n<t.length;n+=3){let l=t[n+1];w[n+1]=-t[n+2],w[n+2]=l}}}function At(c,s,o,t,r){return!(Math.abs(ft(s,c))>r)&&(B(o,c,s),x(o,o),B(t,o,c),x(t,t),!0)}function Lt(c,s,o,t,r,w,n){return At(c,s,r,w,n)||At(c,o,r,w,n)||At(c,t,r,w,n)}var bt=.99619469809,W=C();export{ce as a,ue as b,fe as c,ie as d,me as e,jt as f,we as g,Oe as h,Jt as i,pe as j,ye as k,ge as l,Kt as m,Ae as n,Me as o,Ie as p,Ne as q,Lt as r};
