import{a as n}from"./chunk-BAKCWAYV.js";import{i as v,j as f}from"./chunk-2JZ6XBZT.js";import"./chunk-7ITFLLSZ.js";import"./chunk-NUHIEXKU.js";import"./chunk-RK5X7LGN.js";import{b as p}from"./chunk-QPKFNEIN.js";import"./chunk-MSKS3GA3.js";import{a as u,b as m,d as l,g as o}from"./chunk-EYI3QUAE.js";import"./chunk-FW33MEBA.js";import"./chunk-RM6CXOHZ.js";import"./chunk-AOA5JMXK.js";import"./chunk-TWW3KW7Z.js";import"./chunk-VDNXTMSC.js";import"./chunk-T7BKG6V3.js";import"./chunk-R6VC74T7.js";import"./chunk-6WKJD7BM.js";import"./chunk-3CR7P5WT.js";import"./chunk-PYQRTZNZ.js";import"./chunk-BIVFGNT6.js";import"./chunk-EUZMXXZJ.js";import"./chunk-7PEPFLZH.js";import"./chunk-BRVOQZDM.js";import"./chunk-3M7VXIQH.js";import"./chunk-TBYT66N3.js";import"./chunk-5PTS4JDF.js";import"./chunk-N27U3N2T.js";import"./chunk-4R5NBZMW.js";import"./chunk-NDYVXEZ5.js";import"./chunk-CMMPCPP5.js";import"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-ZTKK3KB7.js";import"./chunk-GZXWFBZI.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import"./chunk-GGZQ5GCM.js";import"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import"./chunk-BMVJCP2M.js";import"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{a as c,b as y,g as t}from"./chunk-JEGVIFEP.js";var d="Group Layer",R="group-layer-save",P="group-layer-save-as",i=o.GROUP_LAYER_MAP;function I(e){return{isValid:e.type==="group",errorMessage:"Layer.type should be 'group'"}}function T(e){return{isValid:m(e,i),errorMessage:`Layer.portalItem.typeKeywords should have '${i}'`}}function g(e,r){return y(c({},p(e,"web-map",!0)),{initiator:r})}function w(e){let r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}function h(e,r){return t(this,null,function*(){r.title||=e.title,l(r,o.METADATA),u(r,i)})}function O(e,r){return t(this,null,function*(){return v({layer:e,itemType:d,validateLayer:I,validateItem:T,createJSONContext:a=>g(a,e),createItemData:w,errorNamePrefix:R,saveResources:(a,s)=>t(this,null,function*(){return e.sourceIsPortalItem||(yield a.removeAllResources().catch(()=>{})),n(e.resourceReferences,s)})},r)})}function M(e,r,a){return t(this,null,function*(){return f({layer:e,itemType:d,validateLayer:I,createJSONContext:s=>g(s,e),createItemData:w,errorNamePrefix:P,newItem:r,setItemProperties:h,saveResources:(s,A)=>n(e.resourceReferences,A)},a)})}export{O as save,M as saveAs};
