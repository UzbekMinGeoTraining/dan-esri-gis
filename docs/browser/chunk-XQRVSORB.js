import{a as _}from"./chunk-QN72YLVS.js";import{a as A}from"./chunk-2K35ZAGK.js";import"./chunk-WP7QHDBV.js";import"./chunk-5DAF2FXI.js";import"./chunk-U3ETEC6R.js";import"./chunk-Q6ZVH4MK.js";import"./chunk-AYOI2Y26.js";import"./chunk-MBVOWLUI.js";import{a as V,i as f}from"./chunk-MBJHSEMD.js";import{c as d}from"./chunk-VQHENXDQ.js";import"./chunk-VWF5VUO3.js";import{f as u}from"./chunk-HRP5LYWJ.js";import"./chunk-BIVFGNT6.js";import"./chunk-3M7VXIQH.js";import"./chunk-TBYT66N3.js";import"./chunk-4R5NBZMW.js";import"./chunk-CMMPCPP5.js";import"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import{Q as a}from"./chunk-GGZQ5GCM.js";import{U as o}from"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import{a as e}from"./chunk-BMVJCP2M.js";import{k as l,n as p}from"./chunk-GMC3I5VG.js";import{b as m,e as c}from"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import{t as h}from"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{g as r}from"./chunk-JEGVIFEP.js";var v=t=>{let s=class extends t{constructor(...i){super(...i),this.layer=null}get interactive(){return this.analysisView!=null&&this.analysisView.interactive}set interactive(i){this.analysisView!=null&&(this.analysisView.interactive=i)}get results(){return this.analysisView!=null?this.analysisView.results:new d}get selectedDimension(){return this.analysisView!=null?this.analysisView.selectedDimension:null}set selectedDimension(i){this.analysisView!=null&&(this.analysisView.selectedDimension=i)}createLengthDimensions(i){return r(this,null,function*(){if(this.analysisView==null)throw l();yield this.analysisView.createLengthDimensions(i)})}};return e([a()],s.prototype,"layer",void 0),e([a()],s.prototype,"interactive",null),e([a({readOnly:!0})],s.prototype,"results",null),e([a()],s.prototype,"selectedDimension",null),s=e([o("esri.views.layers.DimensionLayerView")],s),s};var D="analysis-view-handles",n=class extends _(v(A)){constructor(t){super(t),this.type="dimension-3d",this._analysisModule=null}initialize(){this.addHandles(V(()=>this.layer.source,t=>{this._destroyAnalysisView(),t!=null&&this._createAnalysisView(t)},f),D)}destroy(){this.removeHandles(D),this._destroyAnalysisView()}isUpdating(){return this._createAnalysisViewTask!=null||this.analysisView!=null&&this.analysisView.updating}whenAnalysisView(){return r(this,null,function*(){if(this.analysisView!=null)return this.analysisView;if(this._createAnalysisViewTask!=null)return this._createAnalysisViewTask.promise;throw new h("layerview:no-analysisview-for-analysis","The analysis has not been set on the DimensionLayer of this layer view")})}_createAnalysisView(t){let s=u(i=>r(this,null,function*(){return this.analysisView=yield this._createAnalysisViewPromise(t,i),this._createAnalysisViewTask===s&&(this._createAnalysisViewTask=null),this.analysisView}));this.addResolvingPromise(s.promise),this._createAnalysisViewTask=s}_destroyAnalysisView(){this.analysisView=m(this.analysisView),this._createAnalysisViewTask=c(this._createAnalysisViewTask)}_createAnalysisViewPromise(t,s){return r(this,null,function*(){let i=this._analysisModule;if(i==null){let w=yield this._loadAnalysisModule();this._analysisModule=w,i=w}let y=new i.default({analysis:t,view:this.view,parent:this});if(yield y.when(),p(s))throw y.destroy(),l();return y})}_loadAnalysisModule(){return import("./chunk-AGD3IXHI.js")}};e([a()],n.prototype,"type",void 0),e([a()],n.prototype,"analysisView",void 0),e([a()],n.prototype,"_createAnalysisViewTask",void 0),n=e([o("esri.views.3d.layers.DimensionLayerView3D")],n);var K=n;export{K as default};
