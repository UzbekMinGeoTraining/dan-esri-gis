import{d as Ae,o as ne}from"./chunk-MTRBRBPC.js";import{a as C}from"./chunk-A7GYEEN6.js";import{a as Me,c as xe}from"./chunk-WUZAEWWX.js";import{a as I,b as Se,c as Ce,h as Te}from"./chunk-ACVF7Z7X.js";import{b as Fe}from"./chunk-ZGDQY5ZD.js";import{f as Ne}from"./chunk-Q5WFUDPQ.js";import{a as z,o as J,p as j}from"./chunk-T7BKG6V3.js";import{h as be}from"./chunk-R6VC74T7.js";import{d as re}from"./chunk-MUI46NAG.js";import{a as O,l as A,y as P}from"./chunk-N27U3N2T.js";import{a as ge}from"./chunk-NDYVXEZ5.js";import{a as ee}from"./chunk-ZTKK3KB7.js";import{c as ye}from"./chunk-TEY6TKJV.js";import{B as he}from"./chunk-GMC3I5VG.js";import{k as pe,l as L}from"./chunk-3IBUFXWY.js";import{g as X}from"./chunk-JEGVIFEP.js";var E=class{};var a;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(a||(a={}));var De={[a.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[a.LogicError]:"Logic error - {reason}",[a.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[a.NeverReach]:"Encountered unreachable logic",[a.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[a.ModuleAccessorMustBeString]:"Module accessor must be a string",[a.ModuleExportNotFound]:"Module has no export with provided identifier",[a.ModulesNotSupported]:"Current profile does not support modules",[a.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[a.FunctionNotFound]:"Function not found",[a.FieldNotFound]:"Key not found - {key}",[a.CircularModules]:"Circular module dependencies are not allowed",[a.Cancelled]:"Execution cancelled",[a.UnsupportedHashType]:"Type not supported in hash function",[a.IllegalResult]:"Value is not a supported return type",[a.PortalRequired]:"Portal is required",[a.InvalidParameter]:"Invalid parameter",[a.WrongNumberOfParameters]:"Call with wrong number of parameters",[a.Unrecognized]:"Unrecognized code structure",[a.UnrecognizedType]:"Unrecognized type",[a.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[a.BooleanConditionRequired]:"Conditions must use booleans",[a.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[a.NoFunctionInArray]:"Arrays cannot contain functions.",[a.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[a.KeyAccessorMustBeString]:"Accessor must be a string",[a.KeyMustBeString]:"Object keys must be a string",[a.Immutable]:"Object is immutable",[a.UnexpectedToken]:"Unexpected token",[a.MemberOfNull]:"Cannot access property of null object",[a.MaximumCallDepth]:"Exceeded maximum function depth",[a.OutOfBounds]:"Out of bounds",[a.InvalidIdentifier]:"Identifier not recognized",[a.CallNonFunction]:"Expression is not a function",[a.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[a.AssignModuleFunction]:"Cannot assign function to module variable",[a.UnsupportedUnaryOperator]:"Unsupported unary operator",[a.UnsupportedOperator]:"Unsupported operator",[a.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[a.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[a.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[a.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[a.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"},te=class extends Error{constructor(...r){super(...r)}},B=class e extends te{constructor(r,n){super(oe(n)+r.message,{cause:r}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,e),n?.loc&&(this.loc=n.loc)}},M=class e extends Error{constructor(r,n,t,o){super("Execution error - "+oe(t)+L(De[n],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}};function oe(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}var Ze=class e extends Error{constructor(r,n,t,o){super("Compilation error - "+oe(t)+L(De[n],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}},Oe=class e extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function kr(e,r,n){return n.declaredRootClass==="esri.arcade.arcadeexecutionerror"||n.declaredRootClass==="esri.arcade.arcadecompilationerror"?n.loc===null&&r?.loc?new B(n,{cause:n}):n:(n.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||n.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||n.declaredRootClass,r?.loc?new B(n,{cause:n}):n)}var Y;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(Y||(Y={}));var qe={[Y.UnrecognizedUri]:"Unrecognized uri - {uri}",[Y.UnsupportedUriProtocol]:"Unrecognized uri protocol"},ke=class e extends Error{constructor(r,n){super(L(qe[r],n)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};var k=class{constructor(){}};function Ie(e,r,n){if(e instanceof k&&!(e instanceof v)){let t=new v;return t.fn=e,t.parameterEvaluator=n,t.context=r,t}return e}var Re=class extends k{constructor(r){super(),this.fn=r}createFunction(r){return(...n)=>this.fn(r,{preparsed:!0,arguments:n})}call(r,n){return this.fn(r,n)}marshalledCall(r,n,t,o){return o(r,n,(s,c,u)=>{u=u.map(f=>f instanceof k&&!(f instanceof v)?Ie(f,r,o):f);let m=this.call(t,{args:u});return he(m)?m.then(f=>Ie(f,t,o)):m})}},v=class extends k{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(r){return this.fn.createFunction(this.context)}call(r,n){return this.fn.marshalledCall(r,n,this.context,this.parameterEvaluator)}marshalledCall(r,n,t){return this.fn.marshalledCall(r,n,this.context,this.parameterEvaluator)}};var F=class e extends C{constructor(r,n,t,o,s,c){super(r),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=n,this._hasZ=t,this._hasM=o,this._cacheId=s,this._partId=c}get(r){if(this._lazyPt[r]===void 0){let n=this._elements[r];if(n===void 0)return;let t=this._hasZ,o=this._hasM,s;s=t&&!o?new A(n[0],n[1],n[2],void 0,this._spRef):o&&!t?new A(n[0],n[1],void 0,n[2],this._spRef):t&&o?new A(n[0],n[1],n[2],n[3],this._spRef):new A(n[0],n[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+r.toString(),this._lazyPt[r]=s}return this._lazyPt[r]}equalityTest(r){return r===this||r!==null&&r instanceof e&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};var q=class e extends C{constructor(r,n,t,o,s){super(r),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=t,this._hasM=o,this._spRef=n,this._cacheId=s}get(r){if(this._lazyPath[r]===void 0){let n=this._elements[r];if(n===void 0)return;this._lazyPath[r]=new F(n,this._spRef,this._hasZ,this._hasM,this._cacheId,r)}return this._lazyPath[r]}equalityTest(r){return r===this||r!==null&&r instanceof e&&r.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}};var ie=class{constructor(r){this.value=r}},se=class{constructor(r){this.value=r}},g={type:"VOID"},Ge=Symbol("BREAK"),He=Symbol("CONTINUE");function w(e,r,n){return r===""||r==null||r===n||r===n?e:e=e.split(r).join(n)}function W(e){return e instanceof k}function ce(e){return e instanceof E}function H(e){return!!y(e)||!!N(e)||!!d(e)||!!p(e)||!!h(e)||!!b(e)||e===null||e===g||typeof e=="number"}function Ke(e,r){return e===void 0?r:e}function Ve(e){return e==null?"":T(e)||D(e)?"Array":d(e)?"Date":h(e)?"Time":p(e)?"DateOnly":y(e)?"String":b(e)?"Boolean":N(e)?"Number":e?.declaredClass==="esri.arcade.Attachment"?"Attachment":e?.declaredClass==="esri.arcade.Portal"?"Portal":e?.declaredClass==="esri.arcade.Dictionary"?"Dictionary":Ue(e)?"KnowledgeGraph":e instanceof E?"Module":ve(e)?"Feature":e instanceof A?"Point":e instanceof J?"Polygon":e instanceof j?"Polyline":e instanceof z?"Multipoint":e instanceof P?"Extent":W(e)?"Function":we(e)?"FeatureSet":_e(e)?"FeatureSetCollection":e===g?"":typeof e=="number"&&isNaN(e)?"Number":"Unrecognized Type"}function y(e){return typeof e=="string"||e instanceof String}function b(e){return typeof e=="boolean"}function N(e){return typeof e=="number"}function We(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function $e(e){return e instanceof O}function T(e){return Array.isArray(e)}function ve(e){return e?.arcadeDeclaredClass==="esri.arcade.Feature"}function Qe(e){return e?.declaredClass==="esri.Graphic"}function Xe(e){return e instanceof Fe}function we(e){return e?.declaredRootClass==="esri.arcade.featureset.support.FeatureSet"}function er(e){return e?.declaredClass==="esri.arcade.Dictionary"}function _e(e){return e?.declaredRootClass==="esri.arcade.featureSetCollection"}function Ue(e){return e?.declaredClass==="esri.rest.knowledgeGraph.KnowledgeGraph"}function D(e){return e instanceof C}function d(e){return e instanceof I}function p(e){return e instanceof Ce}function h(e){return e instanceof Te}function ue(e){return e!=null&&typeof e=="object"}function K(e){return e instanceof Date}function rr(e,r,n,t,o){if(e.length<r||e.length>n)throw new M(t,a.WrongNumberOfParameters,o)}function nr(e){return e<0?-Math.round(-e):Math.round(e)}function fe(e,r){return isNaN(e)||r==null||r===""?e.toString():(r=w(r,"\u2030",""),r=w(r,"\xA4",""),Me(e,{pattern:r}))}function $(e,r){return r==null||r===""?e.toISOString(!0):e.toFormat(Le(r),{locale:ee(),numberingSystem:"latn"})}function Le(e,r=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let n="",t=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(let o of e.match(t)||[])switch(o){case"D":n+="d";break;case"DD":n+="dd";break;case"DDD":n+="o";break;case"d":n+="c";break;case"ddd":n+="ccc";break;case"dddd":n+="cccc";break;case"M":n+="L";break;case"MM":n+="LL";break;case"MMM":n+="LLL";break;case"MMMM":n+="LLLL";break;case"YY":n+="yy";break;case"Y":case"YYYY":n+="yyyy";break;case"Q":n+="q";break;case"Z":n+="Z";break;case"ZZ":n+="ZZ";break;case"ZZZ":n+="ZZZ";break;case"ZZZZ":n+=r?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":n+=r?"[ZZZZZ]":"ZZZZZ";break;case"S":n+="'S'";break;case"SS":n+="'SS'";break;case"SSS":n+="u";break;case"A":case"a":n+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":n+=o;break;default:o.length>=2&&o.slice(0,1)==="["&&o.slice(-1)==="]"?n+=`'${o.slice(1,-1)}'`:n+=`'${o}'`}return n}function i(e,r,n){switch(n){case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}return!1}function tr(e,r,n){if(e===null){if(r===null||r===g)return i(null,null,n);if(N(r))return i(0,r,n);if(y(r)||b(r))return i(0,l(r),n);if(d(r))return i(0,r.toNumber(),n);if(h(r)||p(r))return i(e,r.toNumber(),n)}if(e===g){if(r===null||r===g)return i(null,null,n);if(N(r))return i(0,r,n);if(y(r)||b(r))return i(0,l(r),n);if(d(r))return i(0,r.toNumber(),n);if(h(r)||p(r))return i(e,r.toNumber(),n)}else if(N(e)){if(N(r))return i(e,r,n);if(b(r))return i(e,l(r),n);if(r===null||r===g)return i(e,0,n);if(y(r))return i(e,l(r),n);if(d(r)||h(r)||p(r))return i(e,r.toNumber(),n)}else if(y(e)){if(y(r))return i(Z(e),Z(r),n);if(d(r)||h(r)||p(r))return i(l(e),r.toNumber(),n);if(N(r))return i(l(e),r,n);if(r===null||r===g)return i(l(e),0,n);if(b(r))return i(l(e),l(r),n)}else if(d(e)){if(d(r))return e.timeZone!==r.timeZone&&(e.isUnknownTimeZone?e=I.arcadeDateAndZoneToArcadeDate(e,r.timeZone):r.isUnknownTimeZone&&(r=I.arcadeDateAndZoneToArcadeDate(r,e.timeZone))),i(e.toNumber(),r.toNumber(),n);if(r===null||r===g)return i(e.toNumber(),0,n);if(N(r))return i(e.toNumber(),r,n);if(b(r)||y(r))return i(e.toNumber(),l(r),n);if(h(r))throw new M(null,a.CannotCompareDateAndTime,null);if(p(r))return i(e.toNumber(),r.toNumber(),n)}else if(b(e)){if(b(r))return i(e,r,n);if(N(r))return i(l(e),l(r),n);if(d(r)||h(r)||p(r))return i(l(e),r.toNumber(),n);if(r===null||r===g)return i(l(e),0,n);if(y(r))return i(l(e),l(r),n)}else if(p(e)){if(d(r))return i(e.toNumber(),r.toNumber(),n);if(r===null||r===g)return i(e.toNumber(),0,n);if(N(r))return i(e.toNumber(),r,n);if(b(r)||y(r))return i(e.toNumber(),l(r),n);if(h(r))throw new M(null,a.CannotCompareDateAndTime,null);if(p(r))return i(e.toNumber(),r.toNumber(),n)}else if(h(e)){if(d(r))throw new M(null,a.CannotCompareDateAndTime,null);if(r===null||r===g)return i(e.toNumber(),0,n);if(N(r))return i(e.toNumber(),r,n);if(b(r)||y(r))return i(e.toNumber(),l(r),n);if(h(r))return i(e.toNumber(),r.toNumber(),n);if(p(r))throw new M(null,a.CannotCompareDateAndTime,null)}return!!Pe(e,r)&&(n==="<="||n===">=")}function Pe(e,r){if(e===r||e===null&&r===g||r===null&&e===g)return!0;if(d(e)&&d(r)||h(e)&&h(r)||p(e)&&p(r))return e.equals(r);if(e instanceof q||e instanceof F)return e.equalityTest(r);if(e instanceof A&&r instanceof A){let n=e.cache._arcadeCacheId,t=r.cache._arcadeCacheId;if(n!=null)return n===t}return!!(ue(e)&&ue(r)&&(e._arcadeCacheId===r._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===r._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function Z(e,r){if(y(e))return e;if(e===null)return"";if(N(e))return fe(e,r);if(b(e))return e.toString();if(d(e))return $(e,r);if(h(e)||p(e))return e.toFormat(r);if(e instanceof O)return JSON.stringify(e.toJSON());if(T(e)){let n=[];for(let t=0;t<e.length;t++)n[t]=V(e[t]);return"["+n.join(",")+"]"}if(e instanceof C){let n=[];for(let t=0;t<e.length();t++)n[t]=V(e.get(t));return"["+n.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():W(e)?"object, Function":e===g?"":ce(e)?"object, Module":""}function or(e){let r=[];if(!T(e))return null;if(e instanceof C){for(let n=0;n<e.length();n++)r[n]=l(e.get(n));return r}for(let n=0;n<e.length;n++)r[n]=l(e[n]);return r}function G(e,r,n=!1){if(y(e))return e;if(e===null)return"";if(N(e))return fe(e,r);if(b(e))return e.toString();if(d(e))return $(e,r);if(h(e)||p(e))return e.toFormat(r);if(e instanceof O)return e instanceof P?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+le(e.spatialReference)+"}":le(e.toJSON(),(t,o)=>t.key===o.key?0:t.key==="spatialReference"?1:o.key==="spatialReference"||t.key<o.key?-1:t.key>o.key?1:0);if(T(e)){let t=[];for(let o=0;o<e.length;o++)t[o]=V(e[o],n);return"["+t.join(",")+"]"}if(e instanceof C){let t=[];for(let o=0;o<e.length();o++)t[o]=V(e.get(o),n);return"["+t.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText(n):W(e)?"object, Function":e===g?"":ce(e)?"object, Module":""}function V(e,r=!1){if(e===null)return"null";if(b(e)||N(e)||y(e))return JSON.stringify(e);if(e instanceof O||e instanceof C||Array.isArray(e))return G(e,null,r);if(d(e))return JSON.stringify(r?e.getTime():$(e,""));if(h(e)||p(e))return JSON.stringify(e.toString());if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText(r)}else if(e===g)return"null";return"null"}function l(e,r){return N(e)?e:e===null||e===""?0:d(e)||p(e)||h(e)?NaN:b(e)?e?1:0:T(e)||e===""||e===void 0?NaN:r!==void 0&&y(e)?(r=w(r,"\u2030",""),r=w(r,"\xA4",""),xe(e,{pattern:r})):e===g?0:Number(e)}function ar(e,r){if(d(e))return e;if(y(e)){let n=ir(e,r);if(n)return I.dateTimeToArcadeDate(n)}return null}function ir(e,r){let n=/ (\d\d)/,t=Se(r),o=re.fromISO(e,{zone:t});return o.isValid||n.test(e)&&(e=e.replace(n,"T$1"),o=re.fromISO(e,{zone:r}),o.isValid)?o:null}function sr(e){return b(e)?e:y(e)?(e=e.toLowerCase())==="true":!!N(e)&&e!==0&&!isNaN(e)}function ur(e,r){let n=JSON.parse(e);return n&&!n.spatialReference&&(n.spatialReference=r),Ne(n)}function lr(e,r){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=r),e)}function cr(e){if(e===null)return null;if(e instanceof A)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof J){if(e.rings.length===0)return null;for(let r of e.rings)if(r.length>0)return e;return null}if(e instanceof j){if(e.paths.length===0)return null;for(let r of e.paths)if(r.length>0)return e;return null}return e instanceof z?e.points.length===0?null:e:e instanceof P?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function ze(e,r){if(!e||!e.domain)return r;let n=null,t=null;if(d(r))n=r.toNumber();else if(p(r))n=r.toString();else if(h(r))n=r.toStorageString();else if(e.field.type==="string"||e.field.type==="esriFieldTypeString")n=Z(r);else{if(r==null)return null;if(r==="")return r;n=l(r)}for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.code===n&&(t=s)}return t===null?Z(r):t.name}function Je(e,r){if(!e||!e.domain)return r;let n=null,t=Z(r);for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.name===t&&(n=s)}return n===null?r:n.code}function Q(e,r,n=null,t=null){if(!r||!r.fields)return null;let o,s,c=null;for(let S=0;S<r.fields.length;S++){let x=r.fields[S];x.name.toLowerCase()===e.toString().toLowerCase()&&(c=x)}if(c===null)throw new M(null,a.FieldNotFound,null,{key:e});let u=r.typeIdField,m="id",f=r.types;if(r.subtypeField&&(u=r.subtypeField,m="code",f=r.subtypes??[]),t===null&&n&&u)t=n.hasField(u)?n.field(u):null;else if(u&&t!==null){let S=!1;for(let x of f||[])if(t===x[m]){S=!0;break}if(!S){for(let x of f||[])if(t===x.name){t=x[m],S=!0;break}}S||(t=null,n&&u&&(t=n.hasField(u)?n.field(u):null))}return t!=null&&f.some(S=>S[m]===t&&(o=S.domains?.[c.name],o&&o.type==="inherited"&&(o=Ee(c.name,r),s=!0),!0)),s||o||(o=Ee(e,r)),{field:c,domain:o}}function Ee(e,r){let n;return r.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(n=t.domain),!!n)),n}function le(e,r){r||(r={}),typeof r=="function"&&(r={cmp:r});let n=typeof r.cycles=="boolean"&&r.cycles,t=r.cmp&&(o=r.cmp,function(c){return function(u,m){let f={key:u,value:c[u]},S={key:m,value:c[m]};return o(f,S)}});var o;let s=[];return function c(u){if(u?.toJSON&&typeof u.toJSON=="function"&&(u=u.toJSON()),u===void 0)return;if(typeof u=="number")return isFinite(u)?""+u:"null";if(typeof u!="object")return JSON.stringify(u);let m,f;if(Array.isArray(u)){for(f="[",m=0;m<u.length;m++)m&&(f+=","),f+=c(u[m])||"null";return f+"]"}if(u===null)return"null";if(s.includes(u)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}let S=s.push(u)-1,x=Object.keys(u).sort(t?.(u));for(f="",m=0;m<x.length;m++){let de=x[m],me=c(u[de]);me&&(f&&(f+=","),f+=JSON.stringify(de)+":"+me)}return s.splice(S,1),"{"+f+"}"}(e)}function fr(e){if(e===null)return null;let r=[];for(let n of e)n?.arcadeDeclaredClass&&n.arcadeDeclaredClass==="esri.arcade.Feature"?r.push(n.geometry()):r.push(n);return r}function R(e,r){if(!(r instanceof A))throw new M(null,a.InvalidParameter,null);e.push(r.hasZ?r.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y])}function dr(e,r){if(T(e)||D(e)){let n=!1,t=!1,o=[],s=r;if(T(e)){for(let c of e)R(o,c);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ,t=e[0].hasM)}else if(e instanceof F)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else{if(!D(e))throw new M(null,a.InvalidParameter,null);for(let c of e.toArray())R(o,c);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:(be(o)||(o=o.slice().reverse()),new J({rings:[o],spatialReference:s,hasZ:n,hasM:t}))}return e}function mr(e,r){if(T(e)||D(e)){let n=!1,t=!1,o=[],s=r;if(T(e)){for(let c of e)R(o,c);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof F)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(D(e)){for(let c of e.toArray())R(o,c);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new j({paths:[o],spatialReference:s,hasZ:n,hasM:t})}return e}function pr(e,r){if(T(e)||D(e)){let n=!1,t=!1,o=[],s=r;if(T(e)){for(let c of e)R(o,c);o.length>0&&(s=e[0].spatialReference,n=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof F)o=e._elements,o.length>0&&(n=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(D(e)){for(let c of e.toArray())R(o,c);o.length>0&&(s=e.get(0).spatialReference,n=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new z({points:o,spatialReference:s,hasZ:n,hasM:t})}return e}function hr(e,r=!1){let n=[];if(e===null)return n;if(T(e)===!0){for(let t=0;t<e.length;t++){let o=Z(e[t]);o===""&&r!==!0||n.push(o)}return n}if(e instanceof C){for(let t=0;t<e.length();t++){let o=Z(e.get(t));o===""&&r!==!0||n.push(o)}return n}if(H(e)){let t=Z(e);return t===""&&r!==!0||n.push(t),n}return[]}var ae=0;function yr(e){return ae++,ae%100==0?(ae=0,new Promise(r=>{setTimeout(()=>{r(e)},0)})):e}function gr(e,r,n){switch(n){case"&":return e&r;case"|":return e|r;case"^":return e^r;case"<<":return e<<r;case">>":return e>>r;case">>>":return e>>>r}}function _(e,r=null){return e==null?null:b(e)||N(e)||y(e)?e:e instanceof O?r?.keepGeometryType===!0?e:e.toJSON():e instanceof C?e.toArray().map(n=>_(n,r)):Array.isArray(e)?e.map(n=>_(n,r)):K(e)?e:d(e)?e.toJSDate():h(e)?e.toString():p(e)?e.toJSDate():e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(r):null}function br(e,r,n,t,o){return X(this,null,function*(){let s=yield je(e,r,n);o[t]=s})}function je(e,r=null,n=null){return X(this,null,function*(){if(e instanceof C&&(e=e.toArray()),e==null)return null;if(H(e)||e instanceof O||K(e)||d(e))return _(e,n);if(Array.isArray(e)){let t=[],o=[];for(let s of e)s===null||H(s)||s instanceof O||K(s)||d(s)?o.push(_(s,n)):(o.push(null),t.push(br(s,r,n,o.length-1,o)));return t.length>0&&(yield Promise.all(t)),o}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(r,n):null})}function U(e){return Be(e)?e.parent:e}function Be(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.support.SubtypeSublayer"}function Nr(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.SubtypeGroupLayer"}function Sr(e,r,n){let t=U(e.fullSchema());return t===null||!t.fields?null:Q(r,t,e,n)}function Cr(e){let r=U(e.fullSchema());return r===null?null:r.fields?r.subtypeField?{subtypeField:r.subtypeField,subtypes:r.subtypes?r.subtypes.map(n=>({name:n.name,code:n.code})):[]}:r.typeIdField?{subtypeField:r.typeIdField,subtypes:r.types?r.types.map(n=>({name:n.name,code:n.id})):[]}:null:null}function Tr(e,r,n,t){let o=U(e.fullSchema());if(o===null||!o.fields)return null;let s=Q(r,o,e,t);if(n===void 0)try{n=e.field(r)}catch{return null}return ze(s,n)}function Ar(e,r,n,t){let o=U(e.fullSchema());if(o===null||!o.fields)return null;if(n===void 0){try{n=e.field(r)}catch{return null}return n}return Je(Q(r,o,e,t),n)}function Mr(e){return e?.timeZone??"system"}function xr(e){let r=U(e.fullSchema());if(r===null||!r.fields)return null;let n=[];for(let t of r.fields)n.push(Ae(t));return{objectIdField:r.objectIdField,globalIdField:r.globalIdField??"",geometryType:ne[r.geometryType]===void 0?"":ne[r.geometryType],fields:n}}function Fr(e,r){return e==="system"&&(e=I.systemTimeZoneCanonicalName),{version:Ye,engineVersion:ye,timeZone:e,spatialReference:r instanceof ge?r.toJSON():r,application:pe.applicationName??"",engine:"web",locale:ee()}}var Ye="1.28",fn=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:se,ReturnResult:ie,absRound:nr,arcadeVersion:Ye,autoCastArrayOfPointsToMultiPoint:pr,autoCastArrayOfPointsToPolygon:dr,autoCastArrayOfPointsToPolyline:mr,autoCastFeatureToGeometry:fr,binaryOperator:gr,breakResult:Ge,castAsJson:_,castAsJsonAsync:je,continueResult:He,defaultExecutingContext:Fr,defaultTimeZone:Mr,defaultUndefined:Ke,equalityTest:Pe,featureDomainCodeLookup:Ar,featureDomainValueLookup:Tr,featureFullDomain:Sr,featureSchema:xr,featureSubtypes:Cr,fixNullGeometry:cr,fixSpatialReference:lr,formatDate:$,formatNumber:fe,getDomain:Q,getDomainCode:Je,getDomainValue:ze,getType:Ve,greaterThanLessThan:tr,isArray:T,isBoolean:b,isDate:d,isDateOnly:p,isDictionary:er,isFeature:ve,isFeatureSet:we,isFeatureSetCollection:_e,isFunctionParameter:W,isGeometry:$e,isGraphic:Qe,isImmutableArray:D,isInteger:We,isJsDate:K,isKnowledgeGraph:Ue,isModule:ce,isNumber:N,isObject:ue,isQuery:Xe,isSimpleType:H,isString:y,isSubtypeGrouplayer:Nr,isSubtypeSublayer:Be,isTime:h,multiReplace:w,parseGeometryFromJson:ur,pcCheck:rr,stableStringify:le,standardiseDateFormat:Le,tick:yr,toBoolean:sr,toDate:ar,toNumber:l,toNumberArray:or,toString:Z,toStringArray:hr,toStringExplicit:G,voidOperation:g},Symbol.toStringTag,{value:"Module"}));export{E as a,a as b,M as c,Ze as d,Oe as e,kr as f,Y as g,ke as h,k as i,Ie as j,Re as k,v as l,F as m,q as n,ie as o,se as p,g as q,Ge as r,He as s,w as t,W as u,H as v,Ke as w,Ve as x,y,b as z,N as A,We as B,$e as C,T as D,ve as E,Qe as F,Xe as G,we as H,er as I,_e as J,Ue as K,D as L,d as M,p as N,h as O,K as P,rr as Q,nr as R,Le as S,tr as T,Pe as U,Z as V,or as W,G as X,l as Y,ar as Z,sr as _,lr as $,cr as aa,ze as ba,Je as ca,Q as da,fr as ea,dr as fa,mr as ga,pr as ha,hr as ia,yr as ja,gr as ka,_ as la,je as ma,Be as na,Sr as oa,Cr as pa,Tr as qa,Ar as ra,Mr as sa,xr as ta,Fr as ua,fn as va};
