import{i as y}from"./chunk-GPQLPPA5.js";import{a as f}from"./chunk-RRDM7P6F.js";import{g as b}from"./chunk-JEGVIFEP.js";function c(t,r){if(!t||t.symbol)return null;let e=r?.renderer;return t&&e!=null&&e.getObservationRenderer?e.getObservationRenderer(t):e}function d(t,r){if(t.symbol!=null)return t.symbol;let e=c(t,r);return e!=null&&e.type!=="dot-density"?e.getSymbol(t,r):null}function v(t,r){let e=c(t,r),u=d(t,r);if(u==null)return null;let n={renderer:e,symbol:u};if(e==null||!("visualVariables"in e)||!e.visualVariables)return n;let p=y(e,t,r)??[],o=["proportional","proportional","proportional"];for(let{variable:i,value:l}of p)switch(i.type){case"color":n.color=l.toRgba();break;case"size":if(i.target==="outline")n.outlineSize=l;else{let s=i.axis,a=i.useSymbolValue?"symbol-value":l;switch(s){case"width":o[0]=a;break;case"depth":o[1]=a;break;case"height":o[2]=a;break;case"width-and-depth":o[0]=o[1]=a;break;default:o[0]=o[1]=o[2]=a}}break;case"opacity":n.opacity=l;break;case"rotation":switch(i.axis){case"tilt":n.tilt=l;break;case"roll":n.roll=l;break;default:n.heading=l}}return o[0]==="proportional"&&o[1]==="proportional"&&o[2]==="proportional"||(n.size=o),n}function g(t,r){return b(this,null,function*(){if(t.symbol!=null)return t.symbol;let e=c(t,r);return e!=null?e.getSymbolAsync(t,r):null})}function V(t,r){return b(this,null,function*(){let e=c(t,r),u=yield g(t,r);if(!u)return null;let n={renderer:e,symbol:u};if(!e||!("visualVariables"in e)||!e.visualVariables)return n;let p=y(e,t,r)??[],o=["proportional","proportional","proportional"];for(let{variable:i,value:l}of p)if(i.type==="color")n.color=f.toUnitRGBA(l);else if(i.type==="size")if(i.target==="outline")n.outlineSize=l;else{let s=i.axis,a=i.useSymbolValue?"symbol-value":l;s==="width"?o[0]=a:s==="depth"?o[1]=a:s==="height"?o[2]=a:o[0]=o[1]=s==="width-and-depth"?a:o[2]=a}else i.type==="opacity"?n.opacity=l:i.type==="rotation"&&i.axis==="tilt"?n.tilt=l:i.type==="rotation"&&i.axis==="roll"?n.roll=l:i.type==="rotation"&&(n.heading=l);return(isFinite(o[0])||isFinite(o[1])||isFinite(o[2]))&&(n.size=o),n})}function k(t,r=0){let e=t[r];return typeof e=="number"&&isFinite(e)?e:null}function S(t){for(let r=0;r<3;r++){let e=t[r];if(typeof e=="number")return isFinite(e)?e:0}return 0}export{v as a,V as b,k as c,S as d};
