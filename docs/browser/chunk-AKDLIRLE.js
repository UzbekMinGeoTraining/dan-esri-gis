import{a as u}from"./chunk-GMC3I5VG.js";import{a as c,b as l}from"./chunk-JEGVIFEP.js";var f=Symbol("widget"),p=Symbol("widget-test-data");var v=[],y={},s=new WeakMap;function w(e,r){let o=r.children;if(o?.length)for(let t=0;t<o.length;++t)o[t]=w(e,o[t]);else o=v;let n=r.vnodeSelector;if(a(n)){let t=r.properties||y,d=t.key||n,i={key:d,afterCreate:S,afterUpdate:h,afterRemoved:g,parentWidget:e,widgetConstructor:n,widgetProperties:l(c({},t),{key:d,children:o})};return{vnodeSelector:n.vnodeSelector,properties:i,children:void 0,text:void 0,domNode:null}}return r}function S(e,r,o,{parentWidget:n,widgetConstructor:t,widgetProperties:d}){let i=new t(d);i.container=e,s.set(e,i),i.afterCreate?.(i,e),n.addHandles(u(()=>g(e))),queueMicrotask(()=>{i[p].projector.renderNow()})}function h(e,r,o,{widgetProperties:n}){let t=s.get(e);t&&(t.set(n),t.afterUpdate?.(t,e))}function g(e){let r=s.get(e);r&&(r.afterRemoved?.(r,e),r.destroy(),s.delete(e))}function a(e){return typeof e=="function"&&e[f]}var x=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},m=function(e,r){for(var o=0,n=e.length;o<n;o++){var t=e[o];Array.isArray(t)?m(t,r):t!=null&&t!==!1&&(t.hasOwnProperty("vnodeSelector")||(t=x(t)),r.push(t))}},b=function(e,r){for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];if(o.length===1&&typeof o[0]=="string")return{vnodeSelector:e,properties:r||void 0,children:void 0,text:o[0],domNode:null};var t=[];return m(o,t),{vnodeSelector:e,properties:r||void 0,children:t,text:void 0,domNode:null}};function D(e,r,...o){return typeof e!="function"||a(e)?b(e,r,...o):e(r,...o)}function H(...e){return e}export{f as a,p as b,w as c,a as d,D as e,H as f};
