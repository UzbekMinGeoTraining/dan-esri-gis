import{a as d}from"./chunk-NPHNUKYC.js";import{b as w}from"./chunk-E3DN7XQP.js";import{b as f}from"./chunk-ZGDQY5ZD.js";import{l as m}from"./chunk-N27U3N2T.js";import{Q as o}from"./chunk-GGZQ5GCM.js";import{U as y}from"./chunk-TFUPB3ZG.js";import{a as t}from"./chunk-BMVJCP2M.js";import{l as h}from"./chunk-GMC3I5VG.js";import{t as c}from"./chunk-3IBUFXWY.js";import{g as l}from"./chunk-JEGVIFEP.js";var j=R=>{let e=class extends R{constructor(){super(...arguments),this.view=null}get timeExtent(){return d(this.layer,this.view?.timeExtent,this._get("timeExtent"))}fetchPopupFeaturesAtLocation(a,n){return l(this,null,function*(){let{layer:s}=this;if(!a)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:s});let{popupEnabled:g}=s,p=w(s,n);if(!g||p==null)return[];let x=yield p.getRequiredFields();h(n);let r=new f;r.timeExtent=this.timeExtent,r.geometry=a,r.outFields=x,r.outSpatialReference=a.spatialReference;let{resolution:i,spatialReference:u}=this.view,v=this.view.type==="2d"?new m(i,i,u):new m(.5*i,.5*i,u),{returnTopmostRaster:E,showNoDataRecords:b}=p.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},F={returnDomainValues:!0,returnTopmostRaster:E,pixelSize:v,showNoDataRecords:b,signal:n?.signal};return s.queryVisibleRasters(r,F).then(T=>T)})}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return t([o()],e.prototype,"layer",void 0),t([o()],e.prototype,"suspended",void 0),t([o({readOnly:!0})],e.prototype,"timeExtent",null),t([o()],e.prototype,"view",void 0),e=t([y("esri.views.layers.ImageryLayerView")],e),e};export{j as a};
