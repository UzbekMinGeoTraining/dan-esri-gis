import{a as w,c as S}from"./chunk-7PEPFLZH.js";import{k as h}from"./chunk-TEY6TKJV.js";import{K as b,v as d}from"./chunk-4M6XQSBA.js";import{o as p}from"./chunk-GMC3I5VG.js";import{t as m}from"./chunk-3IBUFXWY.js";import{a as i}from"./chunk-BP73DJTS.js";import{a as c,g as u}from"./chunk-JEGVIFEP.js";var y=new Map;function N(e,r){return u(this,null,function*(){try{return{data:(yield g(e,r)).data,baseUrl:b(e),styleUrl:e}}catch(t){return p(t),null}})}function R(e,r,t){let o=r.portal!=null?r.portal:S.getDefault(),s,l=`${o.url} - ${o.user?.username} - ${e}`,n=y.get(l);if(n)return n;let f=$(e,o,t).then(a=>(s=a,a.fetchData())).then(a=>({data:a,baseUrl:s.itemUrl??"",styleName:e}));return y.set(l,f),f}function $(e,r,t){return r.load(t).then(()=>{let o=new w({disableExtraQuery:!0,query:`owner:${U} AND type:${I} AND typekeywords:"${e}"`});return r.queryItems(o,t)}).then(({results:o})=>{let s=null,l=e.toLowerCase();if(o&&Array.isArray(o)){for(let n of o)if(n.typeKeywords?.some(a=>a.toLowerCase()===l)&&n.type===I&&n.owner===U){s=n;break}}if(!s)throw new m("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(t)})}function T(e,r,t){return e?.styleUrl!=null?N(e.styleUrl,t):e?.styleName!=null?R(e.styleName,r,t):Promise.reject(new m("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function v(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function F(e,r,t=["gltf"]){if(r==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!i("enable-feature:force-wosr"))for(let o of t){let s=e.formatInfos.find(l=>l.type===o);if(s)return s.href}return encodeURI(e.webRef)}function g(e,r){let t=c({responseType:"json",query:{f:"json"}},r);return h(d(e),t)}var U="esri_en",I="Style",L="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{T as a,v as b,F as c,g as d,L as e};
