import{d as j}from"./chunk-WGF2T2BG.js";import{r as g,t as P}from"./chunk-3IBUFXWY.js";import{a as A,b as T,g as l}from"./chunk-JEGVIFEP.js";var C={remove:()=>{}};function s(e){return e?{remove(){e&&(e(),e=void 0)}}:C}function I(e){e.forEach(r=>r?.remove())}function R(e){return s(()=>I(e))}function U(e){return s(()=>e()?.remove())}function q(e){return s(()=>e?.abort())}function z(e){return s(e!=null?()=>e.destroy():void 0)}function $(e){return{setTimeout:(r,t)=>{let n=e.setTimeout(r,t);return s(()=>e.clearTimeout(n))}}}var L=$(globalThis);function k(e){return D(e)||H(e)}function D(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function H(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function V(e,r,t){if(!k(e))throw new TypeError("target is not a Evented or EventTarget object");return H(e)?W(e,r,t):e.on(r,t)}function W(e,r,t,n){if(Array.isArray(r)){let o=r.slice();for(let i of o)e.addEventListener(i,t,n);return s(()=>{for(let i of o)e.removeEventListener(i,t,n)})}return e.addEventListener(r,t,n),s(()=>e.removeEventListener(r,t,n))}function p(e,r,t){if(!k(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(r,t);let n=V(e,r,o=>{n.remove(),t.call(e,o)});return n}function c(e="Aborted"){return new P("AbortError",e)}function x(e,r="Aborted"){if(F(e))throw c(r)}function d(e){return e instanceof AbortSignal?e:e?.signal??void 0}function F(e){let r=d(e);return r!=null&&r.aborted}function te(e){if(b(e))throw e}function ne(e){if(!b(e))throw e}function m(e,r){let t=d(e);if(t!=null){if(!t.aborted)return p(t,"abort",()=>r());r()}}function oe(e,r){let t=d(e);if(t!=null)return x(t),p(t,"abort",()=>r(c()))}function ie(e,r){return d(r)==null?e:new Promise((t,n)=>{let o=m(r,()=>n(c())),i=()=>{o=j(o)};e.then(i,i),e.then(t,n)})}function b(e){return e?.name==="AbortError"}function ae(e){return l(this,null,function*(){try{return yield e}catch(r){if(!b(r))throw r;return}})}function se(t){return l(this,arguments,function*(e,r=g.getLogger("esri")){try{return yield e}catch(n){b(n)||r.error(n)}})}function G(e){return l(this,null,function*(){if(!e)return;if(typeof e.forEach!="function"){let t=Object.keys(e),n=t.map(a=>e[a]),o=yield G(n),i={};return t.map((a,f)=>i[a]=o[f]),i}let r=e;return Promise.allSettled(r).then(t=>Array.from(r,(n,o)=>{let i=t[o];return i.status==="fulfilled"?{promise:n,value:i.value}:{promise:n,error:i.reason}}))})}function ue(e){return l(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="fulfilled").map(r=>r.value)})}function le(e){return l(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="rejected").map(r=>r.reason)})}function M(e,r=void 0,t){let n=new AbortController;return m(t,()=>n.abort()),new Promise((o,i)=>{let a=setTimeout(()=>{a=0,o(r)},e);m(n,()=>{a&&(clearTimeout(a),i(c()))})})}function ce(e,r){let t=new AbortController,n=setTimeout(()=>t.abort(),r);return m(e,()=>{t.abort(),clearTimeout(n)}),T(A({},e),{signal:t.signal})}function N(e){return e&&typeof e.then=="function"}function S(e){return N(e)?e:Promise.resolve(e)}function fe(e,r=-1){let t,n,o,i,a=null,f=(...v)=>{if(t){n=v,i&&i.reject(c()),i=O();let u=i.promise;if(a){let h=a;a=null,h.abort()}return u}if(o=i||O(),i=null,r>0){let u=new AbortController;t=S(e(...v,u.signal));let h=t;M(r).then(()=>{t===h&&(i?u.abort():a=u)})}else t=1,t=S(e(...v));let y=()=>{let u=n;n=o=t=a=null,u!=null&&f(...u)},E=t,w=o;return E.then(y,y),E.then(w.resolve,w.reject),w.promise};return f}function O(){let e,r,t=new Promise((o,i)=>{e=o,r=i}),n=o=>{e(o)};return n.resolve=o=>e(o),n.reject=o=>r(o),n.timeout=(o,i)=>L.setTimeout(()=>n.reject(i),o),n.promise=t,n}function me(e,r){return e.then(r,r)}function de(e){return l(this,null,function*(){yield Promise.resolve(),x(e)})}export{s as a,I as b,R as c,U as d,q as e,z as f,L as g,k as h,V as i,p as j,c as k,x as l,d as m,F as n,te as o,ne as p,m as q,oe as r,ie as s,b as t,ae as u,se as v,G as w,ue as x,le as y,M as z,ce as A,N as B,S as C,fe as D,O as E,me as F,de as G};
