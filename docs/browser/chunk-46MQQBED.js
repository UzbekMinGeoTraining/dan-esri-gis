import{b as Mt}from"./chunk-RIQX5PWK.js";import{c as ct,e as ae}from"./chunk-U3XYTVZL.js";import{a as O,d as Q,l as m}from"./chunk-SNMZODUZ.js";import{a as ee}from"./chunk-XBGBP7GJ.js";import{a as lt}from"./chunk-3TKN2TWC.js";import{b as N,c as Kt,d as Qt,h as $t,k as Z,l as nt,m as te}from"./chunk-3TP25Q6W.js";import{b as d}from"./chunk-IWGILE5R.js";import{k as Jt}from"./chunk-3KFX3FFC.js";import{j as Bt,k as Gt,l as kt,o as qt,p as Vt}from"./chunk-ZBOVC36T.js";import{j as h}from"./chunk-MJXFSFCY.js";import{h as Ht,i as Nt,j as W,k as Zt,l as x}from"./chunk-M4PATAW3.js";import{a as ot}from"./chunk-4OZVVJHM.js";import{f as H,h as v}from"./chunk-X7XJWAFC.js";import{a as u}from"./chunk-RRDM7P6F.js";import{a as U}from"./chunk-XXOIKNT6.js";import{H as Wt,c as Y,e as jt,n as Yt,u as _t,v as Ut,w as gt}from"./chunk-2HUIJUS4.js";import{a as j,b as Rt,h as it}from"./chunk-MBJHSEMD.js";import{g as st,h as Lt,k as zt,n as ft,o as K,p as Ft,s as Xt}from"./chunk-5MNDZ6BX.js";import{a as rt,c as M}from"./chunk-PYQRTZNZ.js";import{a as at}from"./chunk-VWF5VUO3.js";import{b as It}from"./chunk-5PTS4JDF.js";import{Q as X,S as Pt,h as z}from"./chunk-GGZQ5GCM.js";import{U as Ct}from"./chunk-TFUPB3ZG.js";import{a as R}from"./chunk-BMVJCP2M.js";import{a as F,c as J}from"./chunk-GMC3I5VG.js";import{b as et,d as Dt}from"./chunk-WGF2T2BG.js";import{a as bt}from"./chunk-BP73DJTS.js";import{a as S,b as L,d as P}from"./chunk-JEGVIFEP.js";var B=.3;function k(o,t){t&&Object.assign(o,t)}var wt=class{constructor(t){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=h.Opaque,this.color=t.accent}},$=class{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=t.accent,this.outlineColor=t.outline,this.renderOccluded=h.Opaque,this.hoverOutlineColor=t.selectedOutline,k(this,e)}applyColor(t){this._apply(this.color,t)}applyOutline(t){this._apply(this.outlineColor,t)}applyHoverOutline(t){this._apply(this.hoverOutlineColor,t)}_apply(t,e){e.setParameters({color:x(t),renderOccluded:this.renderOccluded})}},vt=class{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=h.Transparent,this.minSquaredEdgeLength=900,this.color=W(t.accent,.5),this.hoverColor=t.accent,k(this,e)}applyColor(t){this._apply(this.color,t)}applyHover(t){this._apply(this.hoverColor,t)}_apply(t,e){e.setParameters({color:x(t),renderOccluded:this.renderOccluded})}},yt=class{constructor(t){this.vertex=new $({colors:t,color:t.accent,outlineColor:t.outline}),this.edge=new $({colors:t,color:Zt(W(t.accent,2/3),.5),outlineColor:W(t.outline,.5),size:8,collisionPadding:8}),this.selected=new $({colors:t,color:t.selected,outlineColor:t.outline}),this.edgeOffset=new vt({colors:t})}},tt=class{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);this.width=1.5,this.stipplePattern=ee(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=h.OccludeAndTransparent,this.color=t.selected,this.stippleOffColor=t.outline,this.innerColor=t.selected,k(this,e)}apply(t){t.color=x(this.color),t.width=this.width,t.stipplePattern=this.stipplePattern,t.stippleOffColor=x(this.stippleOffColor),t.falloff=this.falloff,t.innerWidth=this.innerWidth,t.innerColor=x(this.innerColor),t.renderOccluded=this.renderOccluded}},At=class{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);this.size=4,this.outlineSize=1,this.shape="square",this.color=t.selected,this.outlineColor=t.outline,k(this,e)}apply(t){t.color=x(this.color),t.size=this.size,t.outlineSize=this.outlineSize,t.outlineColor=x(this.outlineColor),t.primitive=this.shape}},G=class{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=B,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=t.selected,this.glowColor=t.accent,this.heightFillColor=t.accent,k(this,e)}apply(t,e=1){let i={glowColor:u.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:u.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*e*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in t?t.style=i:t.laserlineStyle=i}},Tt=class{constructor(t){this.outline=new tt({colors:t,color:t.stippleOff,renderOccluded:h.OccludeAndTransparentStencil,stippleOffColor:t.stippleOn,innerWidth:0}),this.staged=new tt({colors:t,color:t.stippleOn,renderOccluded:h.OccludeAndTransparentStencil,innerColor:t.stagedSolid,stippleOffColor:t.stippleOff}),this.shadowStyle=new G({colors:t,globalAlpha:B,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1})}},St=class{constructor(t){this.outline=new At({colors:t,color:t.selected,outlineColor:t.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new G({colors:t,globalAlpha:B,glowColor:t.accent,glowFalloff:1.5,glowWidth:6,innerColor:t.selected,innerWidth:1,radius:2})}},xt=class extends tt{constructor(i){var a=i,{colors:t}=a,e=P(a,["colors"]);super({colors:t}),this.extensionType=Mt.GROUND_RAY,k(this,e)}},Ot=class{constructor(t){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new Tt(t),this.pointObjects=new St(t),this.heightPlane=new G({colors:t,globalAlpha:B,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:1}),this.heightBox=new G({colors:t,globalAlpha:B,glowColor:t.accent,glowFalloff:8,glowWidth:8,innerColor:t.selected,innerWidth:0,heightFillColor:t.accent}),this.zVerticalLine=new xt({colors:t,color:W(t.accent,5*B/3),falloff:2,innerColor:W(t.selected,0),renderOccluded:h.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:Mt.GROUND_RAY})}},A=class extends Pt{constructor(o){super(o)}get colors(){let o=this.getTheme().accentColor,t=o.a;return{accent:o,contrast:Ht(o),selected:u.fromArray([255,255,255,t]),selectedOutline:u.fromArray([255,255,255,t]),staged:u.fromArray([12,207,255,t]),stagedSolid:u.fromArray([12,207,255,1]),outline:u.fromArray([0,0,0,.5*t]),stippleOn:u.fromArray([255,255,255,1]),stippleOff:u.fromArray([0,0,0,.5])}}get visualElements(){return new Ot(this.colors)}get manipulators(){return new yt(this.colors)}get zManipulator(){return new wt(this.colors)}};R([X()],A.prototype,"colors",null),R([X()],A.prototype,"visualElements",null),R([X()],A.prototype,"manipulators",null),R([X()],A.prototype,"zManipulator",null),R([X()],A.prototype,"getTheme",void 0),A=R([Ct("esri.views.3d.interactive.editingTools.settings")],A);var f;(function(o){o[o.TRANSLATE_Z=0]="TRANSLATE_Z",o[o.TRANSLATE_XY=1]="TRANSLATE_XY",o[o.SCALE=2]="SCALE",o[o.ROTATE=3]="ROTATE",o[o.SCALE_ROTATE=4]="SCALE_ROTATE"})(f||(f={}));var ie=Math.ceil(46.666666666666664),re=160,Pe=.5,Re=24,Ie=9,Le=re+30,ze=re+53,Fe=60,Xe=23,je=5*Math.PI/12,Ye=1*Math.PI/3,Ue=10,We=.2,He=30,Ne=53,Ze=.2,Be=.3,Ge=200,ke=3,qe=1e6;function q(o,t,e){let i=(a,r)=>{t({action:a,object:o,dxScreen:r.screenDeltaX,dyScreen:r.screenDeltaY})};return e((a,r,n)=>(r.next(s=>(s.action==="start"&&i("start",s),s)).next(Qt(o)).next(s=>{switch(s.action){case"start":case"update":(s.translationX||s.translationY||s.translationZ)&&i("update",s);break;case"end":i("end",s)}return s}),{steps:r,cancel:n=n.next($t(o)).next(s=>(i("end",{screenDeltaX:0,screenDeltaY:0}),s))}))}function Ke(o){if(o?.axis==null)return 1;let{mapStart:t,mapEnd:e,axis:i}=o,a=[e.x-t.x,e.y-t.y];return a[0]*i[0]+a[1]*i[1]>0?1:-1}var y=class{constructor(){this._available=!0}set location(t){this._forEachManipulator3D(e=>e.location=t)}set elevationAlignedLocation(t){this._forEachManipulator3D(e=>e.elevationAlignedLocation=t)}set elevationInfo(t){this._forEachManipulator3D(e=>e.elevationInfo=t)}get renderLocation(){let t;return this._forEachManipulator3D(e=>{t||(t=e.renderLocation)}),t}set renderLocation(t){this._forEachManipulator3D(e=>e.renderLocation=t)}get available(){return this._available}set available(t){this._available=t,this._forEachManipulator3D(e=>e.available=t)}get hovering(){return this.someManipulator(t=>t.hovering)}get grabbing(){return this.someManipulator(t=>t.grabbing)}get dragging(){return this.someManipulator(t=>t.dragging)}get selected(){return this.someManipulator(t=>t.selected)}hasManipulator(t){return this.someManipulator(e=>e===t)}someManipulator(t){let e=!1;return this.forEachManipulator(i=>{!e&&t(i)&&(e=!0)}),e}_forEachManipulator3D(t){this.forEachManipulator((e,i)=>{e instanceof O&&t(e,i)})}};var pt=class extends y{constructor(){super(...arguments),this._interactive=!0}get interactive(){return this._interactive}set interactive(t){this._interactive!==t&&(this._interactive=t),this._updateManipulatorInteractivity()}_updateManipulatorInteractivity(){let t=!this.grabbing&&this._interactive;this.forEachManipulator(e=>{e.interactive=t||e.grabbing})}};var ut=class extends y{constructor(t){super(),this._handles=new z,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=70,this._updateAfterDrag=!1,this.events=new at,this._tool=t.tool,this._view=t.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),t.radius!=null&&(this._radius=t.radius),this._createManipulators(),this.forEachManipulator(e=>this._tool.manipulators.add(e))}set orthogonalAvailable(t){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=t,this._arrowManipulatorInfos[3].manipulator.available=t)}destroy(){this._handles=et(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(t){for(let{manipulator:e}of this._arrowManipulatorInfos)t(e,f.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return F();let a=e.operations.data.spatialReference,r=e.graphic;return q(e,i,n=>this.createDragPipeline((s,l,c,p,_)=>({steps:l,cancel:c}=t(s,l,c,p,_),n(s,l,c)),e.elevationInfo,a,r))}createDragPipeline(t,e,i,a){return J(this._arrowManipulatorInfos.map(({manipulator:r},n)=>N(r,(s,l,c,p,_)=>{let g=l.next(T=>L(S({},T),{manipulatorType:f.TRANSLATE_XY})).next(nt(this._view,s.elevationAlignedLocation)).next(ct(this._view,s.elevationAlignedLocation,e,i,a)).next(Kt(s.location,this.angle+(n+1)*Math.PI*.5)).next(Z());t(s,g,c,p,_)})))}get angle(){return this._angle}set angle(t){this._angle=t,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,this._updateManipulators())}_updateManipulators(){for(let t=0;t<this._arrowManipulatorInfos.length;t++)this._updateArrowManipulator(this._arrowManipulatorInfos[t],t);this._updateManipulatorTransform()}_updateArrowManipulator({manipulator:t,transform:e},i){let a=this._radius/70,r=54*a,n=r*Math.sqrt(3)/2,s=qt(this._opaqueMaterial,n,r/2,r/2,.02);Vt(s,ft(v.get(),Y(H.get(),0,-n/3,0))),t.renderObjects=[new m(s,d.Focused),new m(s.instantiate({material:this._transparentMaterial}),d.Unfocused)],t.radius=n/3*2*1.2;let l=Xt(v.get(),i*Math.PI/2),c=ft(v.get(),Y(H.get(),0,100*a,0));st(e,l,c)}_createManipulators(){for(let t=0;t<4;t++){let e=this._createArrowManipulator(t);this._arrowManipulatorInfos.push(e)}this._updateManipulatorTransform()}_updateManipulatorTransform(){let t=this.angle,e=Ft(v.get(),t,M(0,0,1));if(e==null)return;let i=K(v.get(),Y(H.get(),this.displayScale,this.displayScale,this.displayScale)),a=st(v.get(),i,e);for(let r of this._arrowManipulatorInfos){let n=st(v.get(),a,r.transform);r.manipulator.modelTransform=n}}_createArrowManipulator(t){let e=new O({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:M(0,0,1)}}),i={manipulator:e,transform:U()};return this._updateArrowManipulator(i,t),this._handles.add(e.events.on("drag",a=>{this._updateAfterDrag&&a.action==="end"&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)})),i}_createMaterial(t=1){let e=new lt({cullFace:ot.Back,renderOccluded:h.Transparent,isDecoration:!0});return this._handles.add(j(()=>u.toUnitRGBA(this._view.effectiveTheme.accentColor),i=>{i[3]*=t,e.setParameters({color:i})},it)),e}get test(){}};var ht=class{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&this._lastDragEvent!=null&&this._next!=null){let e=this._lastDragEvent.mapEnd,i=this._snap(this._lastDragEvent.screenEnd);if(i!=null){let a={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:t===!0?i:e,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(a)}}this._enabled=t}_snap(t){let e=this._view!=null?this._view.toMap(t,{exclude:[]}):null;return e!=null&&this._view!=null&&(e.z=Jt(e,this._view,this._elevationInfo)),e}createDragEventPipelineStep(t,e){this._view=t,this._elevationInfo=e,this._lastDragEvent=null;let i=new te;return this._next=i,[a=>{if(this._lastDragEvent=a.action!=="end"?S({},a):null,this._enabled){let r=this._snap(a.screenEnd);return r!=null?{action:a.action,mapStart:a.mapStart,mapEnd:r,screenStart:a.screenStart,screenEnd:a.screenEnd}:null}return{action:a.action,mapStart:a.mapStart,mapEnd:a.mapEnd,screenStart:a.screenStart,screenEnd:a.screenEnd}},i]}};var dt=class extends y{constructor(t){super(),this._handles=new z,this._snapToScene=new ht,this._scale=1,this._radius=70,this._view=t.view,this._tool=t.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),t.snapToScene!=null&&(this.snapToScene=t.snapToScene),t.radius!=null&&(this._radius=t.radius),this._createManipulator(),this.forEachManipulator(e=>this._tool.manipulators.add(e))}destroy(){this._handles=et(this._handles),this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()}),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){t(this._manipulator,f.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(t){this._snapToScene.enabled=t}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return F();let a=e.graphic,r=e.elevationInfo,n=e.operations.data.spatialReference;return q(e,i,s=>this.createDragPipeline((l,c,p,_,g)=>({steps:c,cancel:p}=t(l,c,p,_,g),s(l,c,p)),r,n,a))}createDragPipeline(t,e,i,a){let r=this._view;return N(this._manipulator,(n,s,l,c,p)=>{let _=s.next(nt(r,n.elevationAlignedLocation)).next(ct(r,n.elevationAlignedLocation,e,i,a)).next(...this._snapToScene.createDragEventPipelineStep(r,e)).next(g=>L(S({},g),{manipulatorType:f.TRANSLATE_XY})).next(Z());t(n,_,l,c,p)})}_updateManipulatorTransform(){let t=K(v.get(),Y(H.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=t}_createManipulator(){let t=this._view;this._manipulator=new O({view:t,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:M(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){let t=Gt(this._discMaterial,.02,1,128,M(0,0,1),M(0,0,0));t.transformation=K(U(),M(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new m(t,d.Focused),new m(t.instantiate({material:this._discMaterialTransparent}),d.Unfocused)],this._manipulator.radius=80*(this._radius/70)}_createMaterial(t=1){let e=new lt({cullFace:ot.Back,renderOccluded:h.Transparent,isDecoration:!0});return this._handles.add(j(()=>u.toUnitRGBA(this._view.effectiveTheme.accentColor),i=>{i[3]*=t,e.setParameters({color:i})},it)),e}get test(){}};var mt=class extends y{constructor(t){super(),this._radius=70,this.events=new at,this._tool=t.tool,this._view=t.view;let e=new A({getTheme:()=>this._view.effectiveTheme});this._settings=e,t.radius!=null&&(this._radius=t.radius);let i=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:Q(E(i,1,.25),h.Occlude),materialFocused:Q(E(i,1,0),h.Occlude),materialOccludedUnfocused:Q(E(i,.7,0),e.zManipulator.renderOccluded),materialOccludedFocused:Q(E(i,.85,0),e.zManipulator.renderOccluded)},this._themeHandle=j(()=>this._view.effectiveTheme.accentColor,a=>{let r=E(a,1,.25),n=E(a,1,0),s=E(a,.7,0),l=E(a,.85,0),{materialUnfocused:c,materialFocused:p,materialOccludedUnfocused:_,materialOccludedFocused:g}=this._materials;c.setParameters({color:r}),p.setParameters({color:n}),_.setParameters({color:s}),g.setParameters({color:l})}),this._createManipulator(),this.forEachManipulator(a=>this._tool.manipulators.add(a))}destroy(){this._themeHandle=Dt(this._themeHandle),this._manipulator.applyObjectTransform=me,this.forEachManipulator(t=>{this._tool.manipulators.remove(t),t.destroy()})}forEachManipulator(t){t(this._manipulator,f.TRANSLATE_Z)}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return F();let a=e.operations.data.spatialReference;return q(e,i,r=>this.createDragPipeline((n,s,l,c,p)=>({steps:s,cancel:l}=t(n,s,l,c,p),r(n,s,l)),a))}createDragPipeline(t,e){let i=this._view;return N(this._manipulator,(a,r,n,s,l)=>{let c=r.next(p=>L(S({},p),{manipulatorType:f.TRANSLATE_Z})).next(ae(i,a.renderLocation,e)).next(Z());t(a,c,n,s,l)})}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}_updateManipulator(){let t=this._settings,e=this._radius/70,i=t.zManipulator.height*e,a=t.zManipulator.coneHeight*e,r=t.zManipulator.coneWidth*e,n=t.zManipulator.width*e,s=[M(0,0,0),M(0,0,i)],l=[M(0,0,0),M(0,0,i+a)],c=(()=>{let C=U();return Lt(C,C,[0,0,i]),zt(C,C,Math.PI/2),C})(),{materialUnfocused:p,materialFocused:_,materialOccludedUnfocused:g,materialOccludedFocused:T}=this._materials,I=kt(p,s,n/2,16,!1),D=Bt(p,a,r/2,16,!1);D.transformation=c,this._manipulator.renderObjects=[new m(D,d.Unfocused),new m(I,d.Unfocused),new m(D.instantiate({material:_}),d.Focused),new m(I.instantiate({material:_}),d.Focused),new m(D.instantiate({material:g}),d.Unfocused),new m(I.instantiate({material:g}),d.Unfocused),new m(D.instantiate({material:T}),d.Focused),new m(I.instantiate({material:T}),d.Focused)],this._manipulator.radius=n/2+2,this._manipulator.collisionType={type:"line",paths:[l]}}_createManipulator(){let t=this._view,e=new O({view:t,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});e.applyObjectTransform=i=>{let a=t.state.camera,r=se;t.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,r);let n=Wt(a.eye,r),s=a.computeRenderPixelSizeAtDist(n),l=jt(V,r,a.eye);_t(l,l);let c=de;t.renderCoordsHelper.worldUpAtPosition(se,c);let p=Math.abs(Ut(l,c)),_=gt(V,l,c),g=gt(V,_,c),T=It(p,.01,1),I=1-Math.sqrt(1-T*T)/T/a.fullWidth,D=this._settings,C=this._radius/70,le=D.zManipulator.width*C;Yt(g,_t(g,g),(1/I-1)*n+s*le),i[12]-=V[0],i[13]-=V[1],i[14]-=V[2]},this._manipulator=e,this._updateManipulator()}get test(){}};function E(o,t,e){let i=Nt(o,e);return i.a*=t,u.toUnitRGBA(i)}var se=rt(),V=rt(),de=rt(),me=()=>{};var oe=class extends pt{constructor(t){super(),this._handles=new z;let{tool:e,view:i,snapToScene:a,radius:r}=t;this._view=i,this.xyManipulation=new dt({tool:e,view:i,snapToScene:a,radius:r}),this.xyAxisManipulation=new ut({tool:e,view:i,radius:r}),this.zManipulation=new mt({tool:e,view:i,radius:r}),this.xyManipulation.available=t.xyAvailable,this.xyAxisManipulation.available=t.xyAxisAvailable,this.zManipulation.available=t.zAvailable,this._autoHideXYAxis(),this.forEachManipulator(n=>this._handles.add(n.events.on("grab-changed",()=>this._updateManipulatorInteractivity())))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(t,e,i){return J([this.xyManipulation.createManipulatedObjectDragPipeline((a,r,n,s,l)=>t(b.XY,a,r,n,s,l),e,i),this.xyAxisManipulation.createManipulatedObjectDragPipeline((a,r,n,s,l)=>t(b.XY_AXIS,a,r,n,s,l),e,i),this.zManipulation.createManipulatedObjectDragPipeline((a,r,n,s,l)=>t(b.Z,a,r,n,s,l),e,i)])}createDragPipeline(t,e,i,a){return J([this.xyManipulation.createDragPipeline((r,n,s,l,c)=>t(b.XY,r,n,s,l,c),e,i,a),this.xyAxisManipulation.createDragPipeline((r,n,s,l,c)=>t(b.XY_AXIS,r,n,s,l,c),e,i,a),this.zManipulation.createDragPipeline((r,n,s,l,c)=>t(b.Z,r,n,s,l,c),i)])}set snapToScene(t){this.xyManipulation.snapToScene=t}set angle(t){this.xyAxisManipulation.angle=t}set radius(t){this.xyAxisManipulation.radius=t,this.xyManipulation.radius=t,this.zManipulation.radius=t}set displayScale(t){this.xyManipulation.displayScale=t,this.xyAxisManipulation.displayScale=t}forEachManipulator(t){this.xyManipulation.forEachManipulator(e=>t(e,f.TRANSLATE_XY)),this.xyAxisManipulation.forEachManipulator(e=>t(e,f.TRANSLATE_XY)),this.zManipulation.forEachManipulator(e=>t(e,f.TRANSLATE_Z))}get _xyAxisVisible(){let t=this.xyManipulation.someManipulator(e=>e.focused)||this.xyAxisManipulation.someManipulator(e=>e.focused);return this._view.inputManager&&this._view.inputManager.latestPointerType==="touch"||t}_autoHideXYAxis(){let t=this.xyAxisManipulation,e=this.xyManipulation;if(bt("esri-mobile"))return;let i=[];e.forEachManipulator(r=>i.push(r)),t.forEachManipulator(r=>i.push(r));let a=()=>{let r=[];this._xyAxisVisible||t.forEachManipulator(n=>r.push(n.disableDisplay())),this._handles.remove(ne),this._handles.add(r,ne)};for(let r of i)this._handles.add(r.events.on("focus-changed",a));this._view.inputManager&&this._handles.add(Rt(()=>this._view.inputManager?.latestPointerType,a)),a()}static radiusForSymbol(t){let e=t!=null&&t.type==="point-3d"&&t.symbolLayers;return e&&e.some(i=>i.type==="icon")?ie:70}},ne="disable-xy-axis-display",b;(function(o){o[o.XY=0]="XY",o[o.XY_AXIS=1]="XY_AXIS",o[o.Z=2]="Z"})(b||(b={}));export{A as a,f as b,ie as c,re as d,Pe as e,Re as f,Ie as g,Le as h,ze as i,Fe as j,Xe as k,je as l,Ye as m,Ue as n,We as o,He as p,Ne as q,Ze as r,Be as s,Ge as t,ke as u,qe as v,y as w,pt as x,q as y,Ke as z,oe as A,b as B};
