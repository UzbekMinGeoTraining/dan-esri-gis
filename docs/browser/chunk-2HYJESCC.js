import{a as d,d as h}from"./chunk-F7R3VTP4.js";import{u as f}from"./chunk-TFUPB3ZG.js";import{a as p,c}from"./chunk-GMC3I5VG.js";import{t as a}from"./chunk-BP73DJTS.js";var y="z",g="r",v={redo:g,undo:y,center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},D={toggle:"Control"},P={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},b={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:d,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:y,redo:g},m=class{constructor(){this._bindings=new Map}add(t,e){return this.addToggle(t,i=>{i.type==="key-down"&&e(i)})}addToggle(t,e){let i=n.fromDefinition(t,e),o=f(this._bindings,i.key,()=>[]);return o.push(i),p(()=>a(o,i))}register(t,e=h.WIDGET){return c([t.on("key-down",i=>this.dispatch(t.inputManager,i),e),t.on("key-up",i=>this.dispatch(t.inputManager,i),e)])}dispatch(t,e){let i=e.key,o=this._bindings.get(i);if(o)for(let r of o)r.process(t,e)}},n=class s{constructor(t,e,i,o,r){this.key=t,this.modifiers=e,this.repeats=i,this.continuePropagation=o,this.callback=r}process(t,e){if(!(e.key!==this.key||"repeat"in e&&e.repeat&&!this.repeats)){for(let i of this.modifiers)if(!t.isModifierKeyDown(i))return;this.continuePropagation||e.stopPropagation(),this.callback(e)}}static fromDefinition(t,e){if(typeof t=="string")return new s(t,[],!1,!1,e);let{key:i,modifier:o,repeats:r,continuePropagation:k}=t;return new s(i,o?Array.isArray(o)?o:[o]:[],!!r,!!k,e)}};export{v as a,D as b,P as c,b as d,m as e};
