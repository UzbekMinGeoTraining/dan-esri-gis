import{b as f}from"./chunk-J3YJSN5B.js";import{j as i}from"./chunk-XGB5KN4W.js";import"./chunk-IZVEJCCI.js";import"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import"./chunk-GGZQ5GCM.js";import"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import"./chunk-BMVJCP2M.js";import"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{g as p}from"./chunk-JEGVIFEP.js";var o,e;function g(r){return p(this,null,function*(){if(yield d(),r.inputs.length<1)return{result:{status:i.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]},transferList:[]};let n={ptrs:[],sizes:[]};for(let s of r.inputs){let c=e._malloc(s.byteLength);new Uint8Array(e.HEAPU8.buffer,c,s.byteLength).set(new Uint8Array(s)),n.ptrs.push(c),n.sizes.push(s.byteLength)}let t=e.process(r.jobDescJson,n,r.isMissingResourceCase),u=t.status===i.Succeeded&&t.data,l=t.status===i.MissingInputs&&t.missingInputUrls.length>0;if(u){let s=t.data.slice();t.data=s}else l&&(t.jobDescJson=t.jobDescJson.slice(),t.originalInputs=r.inputs);for(let s=0;s<n.ptrs.length;++s)e._free(n.ptrs[s]);let a=[];if(u)a.push(t.data.buffer);else if(l)for(let s of r.inputs)a.push(s);return{result:t,transferList:a}})}function h(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function d(){return e?Promise.resolve():(o||(o=f().then(r=>{e=r,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{h as destroyWasm,d as initialize,g as process};
