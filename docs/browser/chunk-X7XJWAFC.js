import{a as Z}from"./chunk-CYCLIMTY.js";import{a as Y}from"./chunk-XXOIKNT6.js";import{a as W}from"./chunk-DBLGLVAQ.js";import{a as K}from"./chunk-HWN5REN7.js";import{D as V,a as l,b as J,c as g,d as P,e as h,n as m,u as I,v as c,w as T,x as Q}from"./chunk-2HUIJUS4.js";import{a as H}from"./chunk-YRTBL7EE.js";import{a as f}from"./chunk-PYQRTZNZ.js";import{b as G,k as y}from"./chunk-5PTS4JDF.js";import{a as B}from"./chunk-ANPNMGFG.js";function Mt(t,r,e){let a=c(t,r)/c(t,t);return m(e,t,a)}function w(t,r){return c(t,r)/l(t)}function lt(t,r){let e=c(t,r)/(l(t)*l(r));return-y(e)}function gt(t,r,e){I(q,t),I(z,r);let a=c(q,z),n=y(a),o=T(q,q,z);return c(o,e)<0?2*Math.PI-n:n}var q=f(),z=f();var S=class t{constructor(r){this._create=r,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&B(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){let r=2*this._itemsPtr;this._items.length>r&&(this._items.length=r),this._itemsPtr=0}static createVec2f64(){return new t(K)}static createVec3f64(){return new t(f)}static createVec4f64(){return new t(H)}static createMat3f64(){return new t(W)}static createMat4f64(){return new t(Y)}static createQuatf64(){return new t(Z)}get test(){}};var vt=S.createVec2f64(),_=S.createVec3f64(),$=S.createVec4f64(),yt=S.createMat3f64(),Ut=S.createMat4f64(),Lt=S.createQuatf64();function bt(t){let r=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],a=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(r,e,a))}function jt(t,r){let e=Math.sqrt(r[0]*r[0]+r[4]*r[4]+r[8]*r[8]),a=Math.sqrt(r[1]*r[1]+r[5]*r[5]+r[9]*r[9]),n=Math.sqrt(r[2]*r[2]+r[6]*r[6]+r[10]*r[10]);return g(t,e,a,n),t}function kt(t,r,e){e=e||t;let a=c(t,r);g(e,t[0]-a*r[0],t[1]-a*r[1],t[2]-a*r[2]),I(e,e)}function et(t,r,e){Math.abs(t[0])>Math.abs(t[1])?g(r,0,1,0):g(r,1,0,0),T(e,t,r),T(r,e,t),I(e,e),I(r,r)}function Xt(t,r,e,a,n,o){let s=t+(r-t)*n;return s+(e+(a-e)*n-s)*o}function Qt(t,r,e,a=f()){let n=l(t),o=l(r),s=c(t,r)/(n*o);if(s<.9999999999999999){let i=Math.acos(s),u=((1-e)*n+e*o)/Math.sin(i),M=u/n*Math.sin((1-e)*i),N=u/o*Math.sin(e*i);return m(D,t,M),m(C,r,N),P(a,D,C)}return Q(a,t,r,e)}function zt(t,r,e,a=f(),n=f()){let o=l(t),s=l(r),i=c(t,r)/(o*s);if(i<.9999999999999999){let u=Math.acos(i),M=Math.sin(u),N=Math.sin(e*u),x=Math.sin((1-e)*u),O=(1-e)*o+e*s;{let d=O/M,A=d/s*N;m(D,t,d/o*x),m(C,r,A),P(a,D,C)}{let d=1/o*(-Math.cos((1-e)*u)*u*O+x*(-o+s));m(D,t,d);let A=1/s*(Math.cos(e*u)*u*O+N*(-o+s));m(C,r,A),P(n,D,C),m(n,n,1/M)}return n}return Q(a,t,r,e),h(n,r,t),I(n,n),n}function Bt(t,r,e){t=I(D,t),r=I(C,r);let a=y(c(t,r));if(e){let n=T(ot,t,r);if(c(n,e)<0)return-a}return a}function Gt(t){let r=t.length;return e=>{if(e<=t[0][0])return t[0][1];if(e>=t[r-1][0])return t[r-1][1];let a=1;for(;e>t[a][0];)a++;let n=t[a-1][0],o=t[a][0],s=(o-e)/(o-n);return s*t[a-1][1]+(1-s)*t[a][1]}}function Ht(t,r,e,a){h(tt,r,t),h(rt,e,t),T(a,tt,rt),I(a,a),a[3]=-c(t,a)}function Jt(t,r){if(g(r,0,0,0),t.length>0){for(let e=0;e<t.length;++e)P(r,r,t[e]);m(r,r,1/t.length)}}var tt=f(),rt=f(),ot=f(),D=f(),C=f();function at(t=L){return[t[0],t[1],t[2],t[3]]}function sr(t=L[0],r=L[1],e=L[2],a=L[3]){return nt(t,r,e,a,$.get())}function it(t,r){return nt(r[0],r[1],r[2],r[3],t)}function nt(t,r,e,a,n=at()){return n[0]=t,n[1]=r,n[2]=e,n[3]=a,n}function or(t,r,e){return J(e,t),e[3]=r,e}function ct(t,r,e){let a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],n=Math.abs(a-1)>1e-5&&a>1e-12?1/Math.sqrt(a):1;return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function ft(t,r,e,a=at()){let n=e[0]-r[0],o=e[1]-r[1],s=e[2]-r[2],i=t[0]-r[0],u=t[1]-r[1],M=t[2]-r[2],N=o*M-s*u,x=s*i-n*M,O=n*u-o*i,d=N*N+x*x+O*O,A=Math.abs(d-1)>1e-5&&d>1e-12?1/Math.sqrt(d):1;return a[0]=N*A,a[1]=x*A,a[2]=O*A,a[3]=-(a[0]*t[0]+a[1]*t[1]+a[2]*t[2]),a}function st(t,r,e,a=0,n=Math.floor(e*(1/3)),o=Math.floor(e*(2/3))){if(e<3)return!1;r(U,a);let s=n,i=!1;for(;s<e-1&&!i;)r(v,s),s++,i=!V(U,v);if(!i)return!1;for(s=Math.max(s,o),i=!1;s<e&&!i;)r(F,s),s++,h(b,U,v),I(b,b),h(j,v,F),I(j,j),i=!V(U,F)&&!V(v,F)&&Math.abs(c(b,j))<ut;return i?(ft(U,v,F,t),!0):(a!==0||n!==1||o!==2)&&st(t,r,e,0,1,2)}function ir(t,r,e=!0){let a=r.length/3;return st(t,(n,o)=>g(n,r[3*o+0],r[3*o+1],r[3*o+2]),e?a-1:a)}var ut=.99619469809,U=f(),v=f(),F=f(),b=f(),j=f();function cr(t,r,e){return r!==t&&it(t,r),t[3]=-c(t,e),t}function fr(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}function ur(t,r,e,a){return T(F,r,t),ct(e,F,a)}function mr(t,r,e,a){return k(X(t,r,h(_.get(),e,r),It,a))}function Ir(t,r,e){return r!=null&&k(X(t,r.origin,r.direction,ht,e))}function hr(t,r,e){return k(X(t,r.origin,r.vector,E.NONE,e))}function Nr(t,r,e){return k(X(t,r.origin,r.vector,E.CLAMP,e))}function pr(t,r){return R(t,r)>=0}function Er(t,r){let e=c(t,r.ray.direction),a=-R(t,r.ray.origin);if(a<0&&e>=0)return!1;if(e>-1e-6&&e<1e-6)return a>0;if((a<0||e<0)&&!(a<0&&e<0))return!0;let n=a/e;return e>0?n<r.c1&&(r.c1=n):n>r.c0&&(r.c0=n),r.c0<=r.c1}function Mr(t,r){let e=c(t,r.ray.direction),a=-R(t,r.ray.origin);if(e>-1e-6&&e<1e-6)return a>0;let n=a/e;return e>0?n<r.c1&&(r.c1=n):n>r.c0&&(r.c0=n),r.c0<=r.c1}function lr(t,r,e){let a=m(_.get(),t,-t[3]),n=mt(t,h(_.get(),r,a),_.get());return P(e,n,a),e}function gr(t,r,e,a){let n=t,o=_.get(),s=_.get();et(n,o,s);let i=h(_.get(),e,r),u=w(o,i),M=w(s,i),N=w(n,i);return g(a,u,M,N)}function mt(t,r,e){let a=m(_.get(),t,c(t,r));return h(e,r,a),e}function Tr(t,r){return Math.abs(R(t,r))}function R(t,r){return c(t,r)+t[3]}var p;function k(t){return t===p.INTERSECTS_INSIDE_OUT||t===p.INTERSECTS_OUTSIDE_IN}function X(t,r,e,a,n){let o=c(t,e),s=R(t,r);if(o===0)return s>=0?p.INSIDE:p.OUTSIDE;let i=-s/o;return a&E.CLAMP&&(i=G(i,0,1)),!(a&E.INFINITE_MIN)&&i<0||!(a&E.INFINITE_MAX)&&i>1?s>=0?p.INSIDE:p.OUTSIDE:(P(n,r,m(n,e,i)),s>=0?p.INTERSECTS_INSIDE_OUT:p.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(p||(p={}));var L=[0,0,1,0],E;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(E||(E={}));var It=E.INFINITE_MIN|E.INFINITE_MAX,ht=E.INFINITE_MAX;export{Mt as a,w as b,lt as c,gt as d,vt as e,_ as f,$ as g,Ut as h,Lt as i,bt as j,jt as k,kt as l,et as m,Xt as n,Qt as o,zt as p,Bt as q,Gt as r,Ht as s,Jt as t,at as u,sr as v,it as w,nt as x,or as y,ct as z,ft as A,st as B,ir as C,cr as D,fr as E,ur as F,mr as G,Ir as H,hr as I,Nr as J,pr as K,Er as L,Mr as M,lr as N,gr as O,Tr as P,R as Q,p as R,X as S,E as T};
