import{a as f}from"./chunk-QMHKSQHG.js";import{b as M}from"./chunk-KX5Z6TZC.js";import"./chunk-E3DN7XQP.js";import"./chunk-A7QJESER.js";import{a as Se,b as N}from"./chunk-4O2UIHNU.js";import"./chunk-2BYXPFOZ.js";import"./chunk-BAKCWAYV.js";import"./chunk-HW47RMVO.js";import"./chunk-VHWLEJLO.js";import"./chunk-XMXL44YY.js";import"./chunk-4HD5O3T7.js";import"./chunk-OSH5MRH4.js";import"./chunk-M5EU7OBK.js";import"./chunk-ZIKE37L7.js";import"./chunk-RMOAL4BI.js";import{a as me}from"./chunk-4SXNSTQ4.js";import{a as ue}from"./chunk-A74W4U2J.js";import"./chunk-MAZHSYWX.js";import"./chunk-YVFVORWT.js";import"./chunk-6GQ5JB2B.js";import"./chunk-7ITFLLSZ.js";import"./chunk-NUHIEXKU.js";import"./chunk-RK5X7LGN.js";import"./chunk-DAAL3W2C.js";import"./chunk-QPKFNEIN.js";import{a as ae}from"./chunk-GEZWIVEL.js";import"./chunk-YB6FP3Z6.js";import"./chunk-T7FSW5ND.js";import"./chunk-MSKS3GA3.js";import{q as we,s as xe,t as L}from"./chunk-3KFX3FFC.js";import{a as be}from"./chunk-IBNL7ZHZ.js";import"./chunk-I6ZCG7XQ.js";import"./chunk-URULUATZ.js";import"./chunk-WOTA3FFP.js";import"./chunk-BNUQT6PD.js";import"./chunk-5DAF2FXI.js";import"./chunk-M2F4B74F.js";import"./chunk-2WNCPIJC.js";import"./chunk-GDB2EJGA.js";import"./chunk-RDGFIF46.js";import"./chunk-C2ONI6UP.js";import"./chunk-H6LJ2DCJ.js";import"./chunk-IMNO5TXZ.js";import"./chunk-LCDA6FHZ.js";import"./chunk-RZPELDHM.js";import"./chunk-S3J33BKD.js";import"./chunk-NPIYHDQ7.js";import"./chunk-BL63T6AU.js";import"./chunk-AOTWUAUY.js";import"./chunk-VI4TDFI5.js";import"./chunk-GXSLPADW.js";import"./chunk-2HN33SWB.js";import"./chunk-523X5JOP.js";import"./chunk-BXR2KKYP.js";import"./chunk-7ISKCG7U.js";import"./chunk-OFGHVREP.js";import"./chunk-U3ETEC6R.js";import"./chunk-A2IYJOJO.js";import"./chunk-EFOMVUIX.js";import"./chunk-42DKYLC7.js";import"./chunk-LB3WSIYI.js";import"./chunk-B7ZDEOLU.js";import"./chunk-22JBWFHY.js";import"./chunk-6YHOGO6F.js";import"./chunk-VY6QN6EN.js";import"./chunk-VZPIZOOE.js";import"./chunk-BWCHJXL6.js";import"./chunk-R7X3CKFH.js";import"./chunk-64FW22PO.js";import"./chunk-3EB3OCOV.js";import"./chunk-7Z3Y27UA.js";import{a as ye}from"./chunk-HFXUZM7A.js";import"./chunk-3A66AUSD.js";import"./chunk-UUKQEAQR.js";import"./chunk-6UUMJQNV.js";import{a as de}from"./chunk-Y63DBETK.js";import"./chunk-GNKF5TIB.js";import"./chunk-X4XHTJSF.js";import"./chunk-YIBWVOPM.js";import"./chunk-PY5WUUCV.js";import{a as le}from"./chunk-R3XRMWAK.js";import{a as ve}from"./chunk-PL6CVK2A.js";import{f as ce,g as fe,h as he,k as ge}from"./chunk-J2R7NR2E.js";import"./chunk-VPH54J3G.js";import{a as ie}from"./chunk-OD6TX477.js";import{a as Oe}from"./chunk-ISUG5L3D.js";import"./chunk-FKKNYWR6.js";import"./chunk-YJ3RZNO6.js";import"./chunk-M4PATAW3.js";import"./chunk-BNQ5VRNF.js";import"./chunk-NOFXYDQS.js";import"./chunk-4BLMEKFL.js";import"./chunk-RPIA54UY.js";import"./chunk-WRN6YTSB.js";import"./chunk-BQ7BWYEG.js";import"./chunk-B7GIKKEW.js";import"./chunk-CA2IXN6Q.js";import"./chunk-AXPRNSO3.js";import"./chunk-FIUHDVVO.js";import"./chunk-3HX6VT75.js";import"./chunk-U4Y7WABQ.js";import"./chunk-WYOOSF42.js";import"./chunk-4I7LQWUX.js";import"./chunk-JLNQ6WQT.js";import"./chunk-GB5RQL32.js";import"./chunk-R6S6A5GA.js";import"./chunk-25T3ULWN.js";import"./chunk-X7XJWAFC.js";import"./chunk-ILCAH2F6.js";import"./chunk-CYCLIMTY.js";import"./chunk-C3YONAAM.js";import"./chunk-2GSAHDXY.js";import"./chunk-OL24FY3J.js";import"./chunk-QBRYULPI.js";import"./chunk-GPQLPPA5.js";import"./chunk-OXRGERMH.js";import"./chunk-LHH3AZP2.js";import"./chunk-HVNUIUKO.js";import"./chunk-Y5M2SONX.js";import"./chunk-Q6ZVH4MK.js";import{d as ne}from"./chunk-OL43UY3L.js";import"./chunk-H2QMNAXT.js";import"./chunk-GKUDWGVQ.js";import"./chunk-NZ7WSL6F.js";import"./chunk-RRDM7P6F.js";import"./chunk-EYI3QUAE.js";import"./chunk-7X2HMUNN.js";import"./chunk-LWJTIQQT.js";import"./chunk-IHBD2IWR.js";import"./chunk-NH3JQE75.js";import"./chunk-XXOIKNT6.js";import"./chunk-DBLGLVAQ.js";import"./chunk-63EK7JRZ.js";import"./chunk-HVNRUZWJ.js";import"./chunk-ZGDQY5ZD.js";import"./chunk-QH2MD2O2.js";import"./chunk-6EZNY6L4.js";import"./chunk-3IK5VXZ3.js";import"./chunk-7XLHE26H.js";import"./chunk-MBVOWLUI.js";import"./chunk-EN6CTWVM.js";import"./chunk-IRJNWXGT.js";import"./chunk-LVPMJTA6.js";import"./chunk-WDFAQFJ4.js";import"./chunk-7LUQF6AI.js";import"./chunk-AO7UDTUI.js";import"./chunk-Q7O5PY54.js";import"./chunk-PFIMJ2UL.js";import"./chunk-NNETCWLJ.js";import"./chunk-EPTSNNZF.js";import"./chunk-FW33MEBA.js";import"./chunk-RM6CXOHZ.js";import"./chunk-AOA5JMXK.js";import"./chunk-TWW3KW7Z.js";import"./chunk-7W6RATG7.js";import"./chunk-HWN5REN7.js";import"./chunk-2HUIJUS4.js";import{a as ee}from"./chunk-VDNXTMSC.js";import"./chunk-MBJHSEMD.js";import"./chunk-K72LO6P2.js";import{a as oe}from"./chunk-WZ5A3YGX.js";import"./chunk-NKMODNM6.js";import"./chunk-SEKMXZL5.js";import"./chunk-2R4SNL6O.js";import"./chunk-MXOOOTCV.js";import"./chunk-7D4IYTAJ.js";import"./chunk-TSNWBMBA.js";import"./chunk-GLWPOGYF.js";import"./chunk-YFBPRKIN.js";import"./chunk-P2YRCTWM.js";import"./chunk-OFZ6SV37.js";import"./chunk-LAJXTVEO.js";import"./chunk-5MNDZ6BX.js";import"./chunk-RDHMB7M5.js";import"./chunk-YSOJWUIW.js";import"./chunk-Q5WFUDPQ.js";import{a as pe}from"./chunk-DPZGANVI.js";import"./chunk-T7BKG6V3.js";import"./chunk-R6VC74T7.js";import"./chunk-6WKJD7BM.js";import"./chunk-3CR7P5WT.js";import"./chunk-YRTBL7EE.js";import"./chunk-3FPO2LOS.js";import"./chunk-QNZSBADV.js";import"./chunk-PYQRTZNZ.js";import"./chunk-S4PLWG55.js";import"./chunk-DZAY272R.js";import"./chunk-GYH7NDHH.js";import"./chunk-S3UQHW42.js";import{c as y}from"./chunk-VQHENXDQ.js";import"./chunk-VWF5VUO3.js";import"./chunk-HRP5LYWJ.js";import"./chunk-BIVFGNT6.js";import"./chunk-EUZMXXZJ.js";import"./chunk-7PEPFLZH.js";import{a as te}from"./chunk-BRVOQZDM.js";import"./chunk-3M7VXIQH.js";import{a as Z}from"./chunk-TBYT66N3.js";import"./chunk-5PTS4JDF.js";import"./chunk-MUI46NAG.js";import"./chunk-N27U3N2T.js";import{a as E}from"./chunk-4R5NBZMW.js";import{a as se}from"./chunk-NDYVXEZ5.js";import"./chunk-CMMPCPP5.js";import"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-ZTKK3KB7.js";import"./chunk-GZXWFBZI.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import{k as re}from"./chunk-TEY6TKJV.js";import{w as Y}from"./chunk-4M6XQSBA.js";import{h as n}from"./chunk-2JF6YUJG.js";import{Q as o}from"./chunk-GGZQ5GCM.js";import{U as s}from"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import{a as e}from"./chunk-BMVJCP2M.js";import{o as Q}from"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import{b as p,r as g,t as A}from"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{a as D,b as X,g as h}from"./chunk-JEGVIFEP.js";var O=class extends n{constructor(){super(...arguments),this.type=null}};e([o({type:String,readOnly:!0,json:{write:!0}})],O.prototype,"type",void 0),O=e([s("esri.layers.support.BuildingFilterAuthoringInfo")],O);var _=O;var k,b=k=class extends n{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new k({filterType:this.filterType,filterValues:p(this.filterValues)})}};e([o({type:String,json:{write:!0}})],b.prototype,"filterType",void 0),e([o({type:[String],json:{write:!0}})],b.prototype,"filterValues",void 0),b=k=e([s("esri.layers.support.BuildingFilterAuthoringInfoType")],b);var _e=b;var P,Ee=y.ofType(_e),I=P=class extends n{clone(){return new P({filterTypes:p(this.filterTypes)})}};e([o({type:Ee,json:{write:!0}})],I.prototype,"filterTypes",void 0),I=P=e([s("esri.layers.support.BuildingFilterAuthoringInfoBlock")],I);var Ie=I;var R,Me=y.ofType(Ie),S=R=class extends _{constructor(){super(...arguments),this.type="checkbox"}clone(){return new R({filterBlocks:p(this.filterBlocks)})}};e([o({type:["checkbox"]})],S.prototype,"type",void 0),e([o({type:Me,json:{write:!0}})],S.prototype,"filterBlocks",void 0),S=R=e([s("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],S);var J=S;var j=class extends n{};e([o({readOnly:!0,json:{read:!1}})],j.prototype,"type",void 0),j=e([s("esri.layers.support.BuildingFilterMode")],j);var d=j;var q,B=q=class extends d{constructor(){super(...arguments),this.type="solid"}clone(){return new q}};e([o({type:["solid"],readOnly:!0,json:{write:!0}})],B.prototype,"type",void 0),B=q=e([s("esri.layers.support.BuildingFilterModeSolid")],B);var F=B;var K,w=K=class extends d{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new K({edges:p(this.edges)})}};e([pe({wireFrame:"wire-frame"})],w.prototype,"type",void 0),e([o(ne)],w.prototype,"edges",void 0),w=K=e([s("esri.layers.support.BuildingFilterModeWireFrame")],w);var V=w;var C,T=C=class extends d{constructor(){super(...arguments),this.type="x-ray"}clone(){return new C}};e([o({type:["x-ray"],readOnly:!0,json:{write:!0}})],T.prototype,"type",void 0),T=C=e([s("esri.layers.support.BuildingFilterModeXRay")],T);var U=T;var H,Ne={nonNullable:!0,types:{key:"type",base:d,typeMap:{solid:F,"wire-frame":V,"x-ray":U}},json:{read:r=>{switch(r?.type){case"solid":return F.fromJSON(r);case"wireFrame":return V.fromJSON(r);case"x-ray":return U.fromJSON(r);default:return}},write:{enabled:!0,isRequired:!0}}},v=H=class extends n{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new F,this.title=""}clone(){return new H({filterExpression:this.filterExpression,filterMode:p(this.filterMode),title:this.title})}};e([o({type:String,json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"filterExpression",void 0),e([o(Ne)],v.prototype,"filterMode",void 0),e([o({type:String,json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"title",void 0),v=H=e([s("esri.layers.support.BuildingFilterBlock")],v);var je=v;var $,Le=y.ofType(je),c=$=class extends n{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=ee(),this.name=null}clone(){return new $({description:this.description,filterBlocks:p(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:p(this.filterAuthoringInfo)})}};e([o({type:String,json:{write:!0}})],c.prototype,"description",void 0),e([o({type:Le,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"filterBlocks",void 0),e([o({types:{key:"type",base:_,typeMap:{checkbox:J}},json:{read:r=>r?.type==="checkbox"?J.fromJSON(r):null,write:!0}})],c.prototype,"filterAuthoringInfo",void 0),e([o({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"id",void 0),e([o({type:String,json:{write:{enabled:!0,isRequired:!0}}})],c.prototype,"name",void 0),c=$=e([s("esri.layers.support.BuildingFilter")],c);var Be=c;var m=class extends n{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};e([o({type:String})],m.prototype,"fieldName",void 0),e([o({type:String})],m.prototype,"modelName",void 0),e([o({type:String})],m.prototype,"label",void 0),e([o({type:Number})],m.prototype,"min",void 0),e([o({type:Number})],m.prototype,"max",void 0),e([o({json:{read:r=>Array.isArray(r)&&(r.every(t=>typeof t=="string")||r.every(t=>typeof t=="number"))?r.slice():null}})],m.prototype,"mostFrequentValues",void 0),e([o({type:[Number]})],m.prototype,"subLayerIds",void 0),m=e([s("esri.layers.support.BuildingSummaryStatistics.BuildingFieldStatistics")],m);var x=class extends te.LoadableMixin(Z(n)){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||this.loadStatus==="loading"?this._get("fields"):(g.getLogger(this).error("building summary statistics are not loaded"),null)}load(r){let t=r!=null?r.signal:null;return this.addResolvingPromise(this._fetchService(t)),Promise.resolve(this)}_fetchService(r){return h(this,null,function*(){let t=(yield re(this.url,{query:{f:"json"},responseType:"json",signal:r})).data;this.read(t,{origin:"service"})})}};e([o({constructOnly:!0,type:String})],x.prototype,"url",void 0),e([o({readOnly:!0,type:[m],json:{read:{source:"summary"}}})],x.prototype,"fields",null),x=e([s("esri.layers.support.BuildingSummaryStatistics")],x);var G=x;var Fe=y.ofType(Be),Te=p(f.sublayersProperty),W=Te.json?.origins;W&&(W["web-scene"]={type:[M],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},W["portal-item"]={type:[M],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}});var l=class extends Se(ue(ve(de(le(ie(ye(me(Oe)))))))){constructor(r){super(r),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new be({getCollections:()=>[this.sublayers],getChildrenFunction:t=>t.type==="building-group"?t.sublayers:null}),this.sublayers=null,this._allSublayerOverrides=null,this.filters=new Fe,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.legendEnabled=!0,this.type="building-scene"}normalizeCtorArgs(r){return typeof r=="string"?{url:r}:r??{}}destroy(){this.allSublayers.destroy()}readSublayers(r,t,i){let a=f.readSublayers(r,t,i);return f.forEachSublayer(a,u=>u.layer=this),this._allSublayerOverrides&&(ke(a,this._allSublayerOverrides),this._allSublayerOverrides=null),a}write(r,t){return r=super.write(r,t),!t||t.origin!=="web-scene"&&t.origin!=="portal-item"||(this.sublayers?Re(this.sublayers,r,t):this._allSublayerOverrides&&Je(this._allSublayerOverrides,r,t)),r}read(r,t){if(super.read(r,t),(t?.origin==="web-scene"||t?.origin==="portal-item")&&Array.isArray(r?.sublayers)){let i=Pe(r.sublayers,t);this.sublayers?Ae(this.sublayers,i):(this._allSublayerOverrides??=new Map,this._allSublayerOverrides.set(t.origin,i))}}readSummaryStatistics(r,t){if(typeof t.statisticsHRef=="string"){let i=Y(this.parsedUrl?.path,t.statisticsHRef);return new G({url:i})}return null}set elevationInfo(r){this._set("elevationInfo",r),this._validateElevationInfo()}load(r){let t=r!=null?r.signal:null,i=this.loadFromPortal({supportedTypes:["Scene Service"]},r).catch(Q).then(()=>this._fetchService(t)).then(()=>this._fetchAssociatedFeatureService(t));return this.addResolvingPromise(i),Promise.resolve(this)}loadAll(){return oe(this,r=>{f.forEachSublayer(this.sublayers,t=>{t.type!=="building-group"&&r(t)}),this.summaryStatistics&&r(this.summaryStatistics)})}saveAs(r,t){return h(this,null,function*(){return this._debouncedSaveOperations(N.SAVE_AS,X(D({},t),{getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"}),r)})}save(){return h(this,null,function*(){let r={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"};return this._debouncedSaveOperations(N.SAVE,r)})}validateLayer(r){if(!r.layerType||r.layerType!=="Building")throw new A("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:r.layerType})}_getTypeKeywords(){return["Building"]}_fetchAssociatedFeatureService(r){return h(this,null,function*(){try{let{portalItem:t}=yield ae(`${this.url}/layers/${this.layerId}`,{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:r});this.associatedFeatureServiceItem=t}catch(t){g.getLogger(this).warn("Associated feature service item could not be loaded",t)}})}_validateElevationInfo(){let r=this.elevationInfo,t="Building scene layers";L(g.getLogger(this),we(t,"absolute-height",r)),L(g.getLogger(this),xe(t,r))}};function ke(r,t){t.forEach(i=>Ae(r,i))}function Ae(r,t){let{overrides:i,context:a}=t;f.forEachSublayer(r,u=>u.read(i.get(u.id),a))}function Pe(r,t){let i=new Map;for(let a of r)a!=null&&typeof a=="object"&&typeof a.id=="number"?i.set(a.id,a):t.messages?.push(new A("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:a}));return{overrides:i,context:t}}function Re(r,t,i){let a=[];f.forEachSublayer(r,u=>{let z=u.write({},i);Object.keys(z).length>1&&a.push(z)}),a.length>0&&(t.sublayers=a)}function Je(r,t,i){let a=i?.origin&&r.get(i.origin);a&&(t.sublayers=[],a.overrides.forEach(u=>{t.sublayers.push(p(u))}))}e([o({type:["BuildingSceneLayer"]})],l.prototype,"operationalLayerType",void 0),e([o({readOnly:!0})],l.prototype,"allSublayers",void 0),e([o(Te)],l.prototype,"sublayers",void 0),e([E("service","sublayers")],l.prototype,"readSublayers",null),e([o({type:Fe,nonNullable:!0,json:{write:!0}})],l.prototype,"filters",void 0),e([o({type:String,json:{write:!0}})],l.prototype,"activeFilterId",void 0),e([o({readOnly:!0,type:G})],l.prototype,"summaryStatistics",void 0),e([E("summaryStatistics",["statisticsHRef"])],l.prototype,"readSummaryStatistics",null),e([o({type:[String],json:{read:!1}})],l.prototype,"outFields",void 0),e([o(ge)],l.prototype,"fullExtent",void 0),e([o(ce)],l.prototype,"legendEnabled",void 0),e([o({type:["show","hide","hide-children"]})],l.prototype,"listMode",void 0),e([o(he(se))],l.prototype,"spatialReference",void 0),e([o(fe)],l.prototype,"elevationInfo",null),e([o({json:{read:!1},readOnly:!0})],l.prototype,"type",void 0),e([o()],l.prototype,"associatedFeatureServiceItem",void 0),l=e([s("esri.layers.BuildingSceneLayer")],l);var Bo=l;export{Bo as default};
