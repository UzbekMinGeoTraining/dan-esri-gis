import{a as J,b as fn,c as un,d as dn,j as wn,k as mn,l as hn}from"./chunk-2K7MVC27.js";import{a as _}from"./chunk-4UY52H4D.js";import{a as Y}from"./chunk-3YHUBCUW.js";import{c as T}from"./chunk-PQ2CFAKW.js";import{$ as E,A as q,D as v,H as U,L as P,M as B,N as K,O as Q,Q as m,V as Z,Y as R,_ as cn,b as i,c as s,ea as u,fa as X,ga as j,ha as z,sa as O,w}from"./chunk-4RJTDUBN.js";import{A as x,D as qn,E as nn,F as en,G as tn,H as M,I as rn,J as V,b as pn,c as yn,d as gn,e as vn,f as Pn,g as In,h as An,i as Fn,j as Rn,k as Nn,l as bn,m as Sn,n as On,o as $,p as Tn,q as Cn,r as Dn,s as Ln,t as jn,u as Un,v as En,w as Jn,x as Mn,y as kn}from"./chunk-3LZC5E4L.js";import{d as L,f as p,g as F}from"./chunk-ACVF7Z7X.js";import{f as H}from"./chunk-Q5WFUDPQ.js";import{a as G,o as S,p as A}from"./chunk-T7BKG6V3.js";import{c as an}from"./chunk-7PEPFLZH.js";import{a as d,l as b,y as D}from"./chunk-N27U3N2T.js";import{da as ln}from"./chunk-4DLSYLKE.js";import{d as on,k as W}from"./chunk-TEY6TKJV.js";import{g as I}from"./chunk-JEGVIFEP.js";function sn(a,e,t){return I(this,null,function*(){if(!on?.findCredential(a.restUrl))return null;if(a.loadStatus==="loaded"&&e===""&&a.user?.sourceJSON&&t===!1)return a.user.sourceJSON;let c={responseType:"json",query:{f:"json"}};if(t&&(c.query.returnUserLicenseTypeExtensions=!0),e===""){let r=yield W(a.restUrl+"/community/self",c);if(r.data){let o=r.data;if(o?.username)return o}return null}let n=yield W(a.restUrl+"/community/users/"+e,c);if(n.data){let r=n.data;return r.error?null:r}return null})}function N(a,e,t){if(m(a,2,2,e,t),!(a[0]instanceof d&&a[1]instanceof d)){if(!(a[0]instanceof d&&a[1]===null)){if(!(a[1]instanceof d&&a[0]===null)){if(a[0]!==null||a[1]!==null)throw new s(e,i.InvalidParameter,t)}}}}function Zn(a,e){return I(this,null,function*(){if(a.type!=="polygon"&&a.type!=="polyline"&&a.type!=="extent")return 0;let t=1;(a.spatialReference.vcsWkid||a.spatialReference.latestVcsWkid)&&(t=fn(a.spatialReference)/ln(a.spatialReference));let l=0;if(a.type==="polyline")for(let n of a.paths)for(let r=1;r<n.length;r++)l+=J(n[r],n[r-1],t);else if(a.type==="polygon")for(let n of a.rings){for(let r=1;r<n.length;r++)l+=J(n[r],n[r-1],t);(n[0][0]!==n[n.length-1][0]||n[0][1]!==n[n.length-1][1]||n[0][2]!==void 0&&n[0][2]!==n[n.length-1][2])&&(l+=J(n[0],n[n.length-1],t))}else a.type==="extent"&&(l+=2*J([a.xmin,a.ymin,0],[a.xmax,a.ymin,0],t),l+=2*J([a.xmin,a.ymin,0],[a.xmin,a.ymax,0],t),l*=2,l+=4*Math.abs(w(a.zmax,0)*t-w(a.zmin,0)*t));let c=new A({hasZ:!1,hasM:!1,spatialReference:a.spatialReference,paths:[[[0,0],[0,l]]]});return M(c,e)})}function fe(a){a.mode==="async"&&(a.functions.disjoint=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]===null||n[1]===null||Nn(n[0],n[1])))},a.functions.intersects=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&An(n[0],n[1])))},a.functions.touches=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&Fn(n[0],n[1])))},a.functions.crosses=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&vn(n[0],n[1])))},a.functions.within=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&Rn(n[0],n[1])))},a.functions.contains=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&gn(n[0],n[1])))},a.functions.overlaps=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]!==null&&n[1]!==null&&bn(n[0],n[1])))},a.functions.equals=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(m(n,2,2,e,t),n[0]===n[1]||(n[0]instanceof d&&n[1]instanceof d?In(n[0],n[1]):(B(n[0])&&B(n[1])||!!(Q(n[0])&&Q(n[1])||K(n[0])&&K(n[1])))&&n[0].equals(n[1]))))},a.functions.relate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,3,3,e,t),n[0]instanceof d&&n[1]instanceof d)return Sn(n[0],n[1],Z(n[2]));if(n[0]instanceof d&&n[1]===null||n[1]instanceof d&&n[0]===null||n[0]===null&&n[1]===null)return!1;throw new s(e,i.InvalidParameter,t)})},a.functions.intersection=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]===null||n[1]===null?null:Ln(n[0],n[1])))},a.functions.union=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{let r=[];if((n=u(n)).length===0)throw new s(e,i.WrongNumberOfParameters,t);if(n.length===1)if(v(n[0])){let o=u(n[0]);for(let f=0;f<o.length;f++)if(o[f]!==null){if(!(o[f]instanceof d))throw new s(e,i.InvalidParameter,t);r.push(o[f])}}else{if(!P(n[0])){if(n[0]instanceof d)return E(F(n[0]),e.spatialReference);if(n[0]===null)return null;throw new s(e,i.InvalidParameter,t)}{let o=u(n[0].toArray());for(let f=0;f<o.length;f++)if(o[f]!==null){if(!(o[f]instanceof d))throw new s(e,i.InvalidParameter,t);r.push(o[f])}}}else for(let o=0;o<n.length;o++)if(n[o]!==null){if(!(n[o]instanceof d))throw new s(e,i.InvalidParameter,t);r.push(n[o])}return r.length===0?null:jn(r)})},a.functions.difference=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]===null?null:n[1]===null?F(n[0]):Cn(n[0],n[1])))},a.functions.symmetricdifference=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>(N(n=u(n),e,t),n[0]===null&&n[1]===null?null:n[0]===null?F(n[1]):n[1]===null?F(n[0]):Dn(n[0],n[1])))},a.functions.clip=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,2,e,t),!(n[1]instanceof D)&&n[1]!==null)throw new s(e,i.InvalidParameter,t);if(n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return n[1]===null?null:pn(n[0],n[1])})},a.functions.cut=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,2,e,t),!(n[1]instanceof A)&&n[1]!==null)throw new s(e,i.InvalidParameter,t);if(n[0]===null)return[];if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return n[1]===null?[F(n[0])]:yn(n[0],n[1])})},a.functions.area=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(m(n,1,2,e,t),(n=u(n))[0]===null)return 0;if(U(n[0])){let r=yield n[0].sumArea(L(w(n[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new s(e,i.Cancelled,t);return r}if(v(n[0])||P(n[0])){let r=X(n[0],e.spatialReference);return r===null?0:tn(r,L(w(n[1],-1)))}if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return tn(n[0],L(w(n[1],-1)))}))},a.functions.areageodetic=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(m(n,1,2,e,t),(n=u(n))[0]===null)return 0;if(U(n[0])){let r=yield n[0].sumArea(L(w(n[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new s(e,i.Cancelled,t);return r}if(v(n[0])||P(n[0])){let r=X(n[0],e.spatialReference);return r===null?0:rn(r,L(w(n[1],-1)))}if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return rn(n[0],L(w(n[1],-1)))}))},a.functions.length=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(m(n,1,2,e,t),(n=u(n))[0]===null)return 0;if(U(n[0])){let r=yield n[0].sumLength(p(w(n[1],-1)),!1,e.abortSignal);if(e.abortSignal.aborted)throw new s(e,i.Cancelled,t);return r}if(v(n[0])||P(n[0])){let r=j(n[0],e.spatialReference);return r===null?0:M(r,p(w(n[1],-1)))}if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return M(n[0],p(w(n[1],-1)))}))},a.functions.length3d=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(m(n,1,2,e,t),(n=u(n))[0]===null)return 0;if(v(n[0])||P(n[0])){let r=j(n[0],e.spatialReference);return r===null?0:r.hasZ===!0?Zn(r,p(w(n[1],-1))):M(r,p(w(n[1],-1)))}if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return n[0].hasZ===!0?Zn(n[0],p(w(n[1],-1))):M(n[0],p(w(n[1],-1)))})},a.functions.lengthgeodetic=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(m(n,1,2,e,t),(n=u(n))[0]===null)return 0;if(U(n[0])){let r=yield n[0].sumLength(p(w(n[1],-1)),!0,e.abortSignal);if(e.abortSignal.aborted)throw new s(e,i.Cancelled,t);return r}if(v(n[0])||P(n[0])){let r=j(n[0],e.spatialReference);return r===null?0:V(r,p(w(n[1],-1)))}if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return V(n[0],p(w(n[1],-1)))}))},a.functions.distance=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{n=u(n),m(n,2,3,e,t);let r=n[0];(v(n[0])||P(n[0]))&&(r=z(n[0],e.spatialReference));let o=n[1];if((v(n[1])||P(n[1]))&&(o=z(n[1],e.spatialReference)),!(r instanceof d))throw new s(e,i.InvalidParameter,t);if(!(o instanceof d))throw new s(e,i.InvalidParameter,t);return Pn(r,o,p(w(n[2],-1)))})},a.functions.distancegeodetic=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{n=u(n),m(n,2,3,e,t);let r=n[0],o=n[1];if(!(r instanceof b))throw new s(e,i.InvalidParameter,t);if(!(o instanceof b))throw new s(e,i.InvalidParameter,t);let f=new A({paths:[],spatialReference:r.spatialReference});return f.addPath([r,o]),V(f,p(w(n[2],-1)))})},a.functions.densify=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,3,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);if(r<=0)throw new s(e,i.InvalidParameter,t);return n[0]instanceof S||n[0]instanceof A?nn(n[0],r,p(w(n[2],-1))):n[0]instanceof D?nn(S.fromExtent(n[0]),r,p(w(n[2],-1))):n[0]})},a.functions.densifygeodetic=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,3,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);if(r<=0)throw new s(e,i.InvalidParameter,t);return n[0]instanceof S||n[0]instanceof A?en(n[0],r,p(w(n[2],-1))):n[0]instanceof D?en(S.fromExtent(n[0]),r,p(w(n[2],-1))):n[0]})},a.functions.generalize=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,4,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);return qn(n[0],r,cn(w(n[2],!0)),p(w(n[3],-1)))})},a.functions.buffer=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,3,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);return r===0?F(n[0]):En(n[0],r,p(w(n[2],-1)))})},a.functions.buffergeodetic=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,3,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);return r===0?F(n[0]):Jn(n[0],r,p(w(n[2],-1)))})},a.functions.offset=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,6,e,t),n[0]===null)return null;if(!(n[0]instanceof S||n[0]instanceof A))throw new s(e,i.InvalidParameter,t);let r=R(n[1]);if(isNaN(r))throw new s(e,i.InvalidParameter,t);let o=R(w(n[4],10));if(isNaN(o))throw new s(e,i.InvalidParameter,t);let f=R(w(n[5],0));if(isNaN(f))throw new s(e,i.InvalidParameter,t);return Un(n[0],r,p(w(n[2],-1)),Z(w(n[3],"round")).toLowerCase(),o,f)})},a.functions.rotate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,3,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);let r=n[0]instanceof D?S.fromExtent(n[0]):n[0],o=R(n[1]);if(isNaN(o))throw new s(e,i.InvalidParameter,t);let f=w(n[2],null);if(f===null)return x(r,o);if(f instanceof b)return x(r,o,f);throw new s(e,i.InvalidParameter,t)})},a.functions.centroid=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,1,1,e,t),n[0]===null)return null;let r=n[0];if((v(n[0])||P(n[0]))&&(r=z(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof d))throw new s(e,i.InvalidParameter,t);return r instanceof b?E(F(r),e.spatialReference):r instanceof S?r.centroid:r instanceof A?un(r):r instanceof G?dn(r):r instanceof D?r.center:null})},a.functions.measuretocoordinate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((v(n[0])||P(n[0]))&&(r=j(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof d))throw new s(e,i.InvalidParameter,t);if(!(r instanceof A))throw new s(e,i.InvalidParameter,t);if(q(n[1]===!1))throw new s(e,i.InvalidParameter,t);let o=wn(r,n[1]);return o?T.convertObjectToArcadeDictionary(o,O(e),!1,!0):null})},a.functions.pointtocoordinate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((v(n[0])||P(n[0]))&&(r=j(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof d))throw new s(e,i.InvalidParameter,t);if(!(r instanceof A))throw new s(e,i.InvalidParameter,t);let o=n[1];if(o===null)return null;if(!(o instanceof b))throw new s(e,i.InvalidParameter,t);if(q(n[1]===!1))throw new s(e,i.InvalidParameter,t);let f=hn(r,o);return f?T.convertObjectToArcadeDictionary(f,O(e),!1,!0):null})},a.functions.distancetocoordinate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,2,2,e,t),n[0]===null)return null;let r=n[0];if((v(n[0])||P(n[0]))&&(r=j(n[0],e.spatialReference)),r===null)return null;if(!(r instanceof d))throw new s(e,i.InvalidParameter,t);if(!(r instanceof A))throw new s(e,i.InvalidParameter,t);if(q(n[1]===!1))throw new s(e,i.InvalidParameter,t);let o=mn(r,n[1]);return o?T.convertObjectToArcadeDictionary(o,O(e),!1,!0):null})},a.functions.multiparttosinglepart=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(n=u(n),m(n,1,1,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);if(n[0]instanceof b)return[E(F(n[0]),e.spatialReference)];if(n[0]instanceof D)return[E(F(n[0]),e.spatialReference)];let r=yield $(n[0]);if(r instanceof S){let o=[],f=[];for(let h=0;h<r.rings.length;h++)if(r.isClockwise(r.rings[h])){let y=H({rings:[r.rings[h]],hasZ:r.hasZ===!0,hasM:r.hasM===!0,spatialReference:r.spatialReference.toJSON()});o.push(y)}else f.push({ring:r.rings[h],pt:r.getPoint(h,0)});for(let h=0;h<f.length;h++)for(let y=0;y<o.length;y++)if(o[y].contains(f[h].pt)){o[y].addRing(f[h].ring);break}return o}if(r instanceof A){let o=[];for(let f=0;f<r.paths.length;f++){let h=H({paths:[r.paths[f]],hasZ:r.hasZ===!0,hasM:r.hasM===!0,spatialReference:r.spatialReference.toJSON()});o.push(h)}return o}if(n[0]instanceof G){let o=[],f=E(F(n[0]),e.spatialReference);for(let h=0;h<f.points.length;h++)o.push(f.getPoint(h));return o}return null}))},a.functions.issimple=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,1,1,e,t),n[0]===null)return!0;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return On(n[0])})},a.functions.simplify=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,1,1,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return $(n[0])})},a.functions.convexhull=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>{if(n=u(n),m(n,1,1,e,t),n[0]===null)return null;if(!(n[0]instanceof d))throw new s(e,i.InvalidParameter,t);return Tn(n[0])})},a.functions.getuser=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){m(n,0,2,e,t);let r=w(n[1],""),o=r===!0;if(r=r===!0||r===!1?"":Z(r),n.length===0||n[0]instanceof Y){let h;h=e.services?.portal?e.services.portal:an.getDefault(),n.length>0&&(h=_(n[0],h));let y=yield sn(h,r,o);if(y){let C=JSON.parse(JSON.stringify(y));for(let g of["lastLogin","created","modified"])C[g]!==void 0&&C[g]!==null&&(C[g]=new Date(C[g]));return T.convertObjectToArcadeDictionary(C,O(e))}return null}let f=null;if(U(n[0])&&(f=n[0]),f){if(o=!1,r)return null;yield f.load();let h=yield f.getOwningSystemUrl();if(!h){if(!r){let g=yield f.getIdentityUser();return g?T.convertObjectToArcadeDictionary({username:g},O(e)):null}return null}let y;y=e.services?.portal?e.services.portal:an.getDefault(),y=_(new Y(h),y);let C=yield sn(y,r,o);if(C){let g=JSON.parse(JSON.stringify(C));for(let k of["lastLogin","created","modified"])g[k]!==void 0&&g[k]!==null&&(g[k]=new Date(g[k]));return T.convertObjectToArcadeDictionary(g,O(e))}return null}throw new s(e,i.InvalidParameter,t)}))},a.functions.nearestcoordinate=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(n=u(n),m(n,2,2,e,t),!(n[0]instanceof d||n[0]===null))throw new s(e,i.InvalidParameter,t);if(!(n[1]instanceof b||n[1]===null))throw new s(e,i.InvalidParameter,t);if(n[0]===null||n[1]===null)return null;let r=yield Mn(n[0],n[1]);return r===null?null:T.convertObjectToArcadeDictionary({coordinate:r.coordinate,distance:r.distance,sideOfLine:r.distance===0?"straddle":r.isRightSide?"right":"left"},O(e),!1,!0)}))},a.functions.nearestvertex=function(e,t){return a.standardFunctionAsync(e,t,(l,c,n)=>I(this,null,function*(){if(n=u(n),m(n,2,2,e,t),!(n[0]instanceof d||n[0]===null))throw new s(e,i.InvalidParameter,t);if(!(n[1]instanceof b||n[1]===null))throw new s(e,i.InvalidParameter,t);if(n[0]===null||n[1]===null)return null;let r=yield kn(n[0],n[1]);return r===null?null:T.convertObjectToArcadeDictionary({coordinate:r.coordinate,distance:r.distance,sideOfLine:r.distance===0?"straddle":r.isRightSide?"right":"left"},O(e),!1,!0)}))})}export{fe as a};
