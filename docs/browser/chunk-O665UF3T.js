import{a as _}from"./chunk-A47KMPSZ.js";import{c as F}from"./chunk-IVZ2RXL2.js";import{a as x}from"./chunk-6GII4ES2.js";import"./chunk-4RJTDUBN.js";import"./chunk-MTRBRBPC.js";import"./chunk-A7GYEEN6.js";import"./chunk-WUZAEWWX.js";import"./chunk-ACVF7Z7X.js";import{a as k}from"./chunk-AR3SF3CU.js";import{a as O}from"./chunk-MM6IP4FS.js";import{a as v}from"./chunk-Q5HG4NWF.js";import"./chunk-U45ID7OR.js";import"./chunk-IW2AVHBW.js";import"./chunk-7H32J6FD.js";import"./chunk-XNAAMINV.js";import"./chunk-NPF6KTZO.js";import"./chunk-WNU76WNW.js";import"./chunk-H4XRNT5U.js";import"./chunk-WIJFCRLT.js";import"./chunk-6ISQQD7M.js";import"./chunk-VHVYC3RW.js";import"./chunk-BUWHOOA3.js";import"./chunk-SDC4SION.js";import"./chunk-6VHG3ZEH.js";import"./chunk-N3AGC3JB.js";import"./chunk-KHTVZWEX.js";import"./chunk-IGNHVSQC.js";import"./chunk-JBGML6IF.js";import"./chunk-S2HMCZNZ.js";import"./chunk-WUAC4CFP.js";import"./chunk-ONDKJR4V.js";import"./chunk-QB4KDO4M.js";import"./chunk-NNNTRPDR.js";import"./chunk-KDLA3TQ2.js";import"./chunk-RPMDOAYZ.js";import"./chunk-J7UK2QPE.js";import"./chunk-3PK63SMD.js";import"./chunk-2DN2BYDF.js";import"./chunk-GQ2SPTYG.js";import"./chunk-RBWI4VLW.js";import"./chunk-MEA3RU4I.js";import"./chunk-3QNHUVFJ.js";import"./chunk-7OTZECLS.js";import"./chunk-XBFBZZXW.js";import"./chunk-LWUJWBPJ.js";import"./chunk-V7QAQAGA.js";import"./chunk-K5V3S3K3.js";import"./chunk-HCCGI45Q.js";import"./chunk-Q6D44QVW.js";import"./chunk-C3EWQ5V5.js";import"./chunk-3UBXEUOT.js";import"./chunk-6WV5YJL7.js";import"./chunk-3AMG6HG6.js";import"./chunk-I6ETUG5Q.js";import"./chunk-4MZSW4Z6.js";import"./chunk-BERIM72F.js";import"./chunk-YOBNM4T6.js";import"./chunk-MEBZWNWT.js";import"./chunk-XZ52TEBV.js";import"./chunk-WAPQB6I3.js";import"./chunk-L3GHXHDP.js";import"./chunk-N6PITG7Q.js";import"./chunk-XC4LDHG5.js";import"./chunk-S3ASAZCA.js";import"./chunk-ZUUCQTSR.js";import"./chunk-GKUBZAEG.js";import"./chunk-UW734WOQ.js";import"./chunk-BIZV3H6H.js";import"./chunk-UCYGH5UZ.js";import"./chunk-ATV5GTE5.js";import"./chunk-X7WNJQZZ.js";import"./chunk-PQPFAB53.js";import"./chunk-QPPQKNYU.js";import"./chunk-MJXFSFCY.js";import"./chunk-6N46AY7Z.js";import"./chunk-TCQTMUK4.js";import"./chunk-AY3YVZUY.js";import"./chunk-7DCEI345.js";import"./chunk-ZG3FCPXY.js";import"./chunk-RIUAG34V.js";import"./chunk-G5SIQY64.js";import"./chunk-WW7S4V24.js";import"./chunk-UGAMS6PU.js";import"./chunk-EHDNZUTT.js";import"./chunk-ECBUS54L.js";import"./chunk-NH7OOX2I.js";import"./chunk-B72PB7U4.js";import"./chunk-644SLL4Y.js";import"./chunk-A54VD7GL.js";import"./chunk-K55ZDM2S.js";import"./chunk-UHYNS4LH.js";import"./chunk-Z3USGHSR.js";import"./chunk-SLEIRDN7.js";import"./chunk-W3OGU5I2.js";import"./chunk-OO4IIGVK.js";import"./chunk-KQHYII76.js";import"./chunk-6I6DPRXI.js";import"./chunk-RNN6GAXL.js";import"./chunk-4IVMQ5PX.js";import"./chunk-CQUOQXLP.js";import"./chunk-VMYCUJRH.js";import"./chunk-PTVRFY4B.js";import"./chunk-3ZOLHUAU.js";import"./chunk-GDB2EJGA.js";import"./chunk-RDGFIF46.js";import"./chunk-C2ONI6UP.js";import"./chunk-H6LJ2DCJ.js";import"./chunk-IMNO5TXZ.js";import"./chunk-LCDA6FHZ.js";import"./chunk-RZPELDHM.js";import"./chunk-S3J33BKD.js";import"./chunk-NPIYHDQ7.js";import"./chunk-BL63T6AU.js";import"./chunk-AOTWUAUY.js";import"./chunk-VI4TDFI5.js";import"./chunk-GXSLPADW.js";import"./chunk-2HN33SWB.js";import"./chunk-523X5JOP.js";import"./chunk-BXR2KKYP.js";import"./chunk-7ISKCG7U.js";import"./chunk-OFGHVREP.js";import"./chunk-FKKNYWR6.js";import"./chunk-YJ3RZNO6.js";import"./chunk-26R336GJ.js";import"./chunk-OC7V2CEX.js";import"./chunk-VTCODMOL.js";import"./chunk-B7GIKKEW.js";import"./chunk-FIUHDVVO.js";import"./chunk-3HX6VT75.js";import"./chunk-4I7LQWUX.js";import"./chunk-JLNQ6WQT.js";import"./chunk-GB5RQL32.js";import"./chunk-4OZVVJHM.js";import"./chunk-X7XJWAFC.js";import"./chunk-ILCAH2F6.js";import"./chunk-CYCLIMTY.js";import{a as m}from"./chunk-C3YONAAM.js";import"./chunk-HVNUIUKO.js";import"./chunk-Y5M2SONX.js";import"./chunk-Q6ZVH4MK.js";import"./chunk-OL43UY3L.js";import"./chunk-H2QMNAXT.js";import"./chunk-GKUDWGVQ.js";import"./chunk-NZ7WSL6F.js";import"./chunk-RRDM7P6F.js";import"./chunk-LWJTIQQT.js";import"./chunk-IHBD2IWR.js";import"./chunk-NH3JQE75.js";import"./chunk-XXOIKNT6.js";import"./chunk-DBLGLVAQ.js";import"./chunk-ZGDQY5ZD.js";import"./chunk-QH2MD2O2.js";import"./chunk-6EZNY6L4.js";import"./chunk-3IK5VXZ3.js";import"./chunk-7XLHE26H.js";import"./chunk-EN6CTWVM.js";import"./chunk-IRJNWXGT.js";import"./chunk-LVPMJTA6.js";import"./chunk-O4AQRVFI.js";import"./chunk-NDPAZKBG.js";import"./chunk-7AZ5UVCG.js";import"./chunk-6GGK7PRJ.js";import"./chunk-NNETCWLJ.js";import"./chunk-EPTSNNZF.js";import"./chunk-AOA5JMXK.js";import"./chunk-TWW3KW7Z.js";import"./chunk-4RLJMQW4.js";import"./chunk-J6ZRC6RI.js";import"./chunk-EBGO44EK.js";import"./chunk-THY6AAMN.js";import"./chunk-7W6RATG7.js";import"./chunk-45SNVLPM.js";import"./chunk-BDF7KEUQ.js";import"./chunk-HWN5REN7.js";import"./chunk-B4JAL745.js";import"./chunk-XTES2GPX.js";import"./chunk-2HUIJUS4.js";import{c as g}from"./chunk-MBJHSEMD.js";import"./chunk-K72LO6P2.js";import"./chunk-2R4SNL6O.js";import"./chunk-MXOOOTCV.js";import"./chunk-7D4IYTAJ.js";import"./chunk-TSNWBMBA.js";import"./chunk-GLWPOGYF.js";import"./chunk-YFBPRKIN.js";import"./chunk-P2YRCTWM.js";import"./chunk-OFZ6SV37.js";import"./chunk-5MNDZ6BX.js";import"./chunk-YSOJWUIW.js";import"./chunk-Q5WFUDPQ.js";import"./chunk-DPZGANVI.js";import"./chunk-T7BKG6V3.js";import"./chunk-R6VC74T7.js";import"./chunk-6WKJD7BM.js";import"./chunk-3CR7P5WT.js";import"./chunk-YRTBL7EE.js";import"./chunk-3FPO2LOS.js";import"./chunk-QNZSBADV.js";import"./chunk-PYQRTZNZ.js";import"./chunk-S4PLWG55.js";import"./chunk-DZAY272R.js";import"./chunk-GYH7NDHH.js";import"./chunk-S3UQHW42.js";import"./chunk-VQHENXDQ.js";import"./chunk-VWF5VUO3.js";import"./chunk-HRP5LYWJ.js";import"./chunk-BIVFGNT6.js";import"./chunk-7PEPFLZH.js";import"./chunk-BRVOQZDM.js";import"./chunk-3M7VXIQH.js";import{b as p}from"./chunk-TBYT66N3.js";import"./chunk-5PTS4JDF.js";import"./chunk-MUI46NAG.js";import{y as f}from"./chunk-N27U3N2T.js";import"./chunk-4R5NBZMW.js";import"./chunk-NDYVXEZ5.js";import"./chunk-CMMPCPP5.js";import"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-ZTKK3KB7.js";import"./chunk-GZXWFBZI.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import{Q as a}from"./chunk-GGZQ5GCM.js";import{U as l}from"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import{a as o}from"./chunk-BMVJCP2M.js";import{a as w}from"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import{t as d}from"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{g as n}from"./chunk-JEGVIFEP.js";var s=class extends p{constructor(e){super(e),this.schedule=null,this._workerUpdating=!0}get updating(){return this._workerUpdating}initialize(){this._workerHandle=new h(this.schedule,this);let{layer:e,viewSpatialReference:r,renderSpatialReference:t}=this;this.addResolvingPromise(n(this,null,function*(){return yield this._workerHandle.invokeMethod("setup",{url:e.parsedUrl?.path??"",baseQuery:e.createQuery().toJSON(),viewSpatialReference:r.toJSON(),renderSpatialReference:t.toJSON(),viewingMode:this.viewingMode,objectIdField:e.objectIdField,capabilities:e.capabilities,timeInfo:e.timeInfo?.toJSON(),fieldsIndex:e.fieldsIndex.toJSON()})})),this.addHandles(this._workerHandle.on("notify-updating",({updating:i})=>{this._workerUpdating=i}))}onTileTreeChange(t){return n(this,arguments,function*({added:e,removed:r}){if(e.length===0&&r.length===0)return;let i=e.map(Q),y=r.map(b);yield this._workerHandle.invokeMethod("onTileTreeChange",{added:i,removed:y})})}executeQuery(e,r){return n(this,null,function*(){let t=yield this._workerHandle.invokeMethod("executeQuery",e?.toJSON(),r),i=m.fromJSON(t);return this._ensureLayerOnFeatures(i),i})}executeQueryForIds(e,r){return n(this,null,function*(){return yield this._workerHandle.invokeMethod("executeQueryForIds",e?.toJSON(),r)})}executeQueryForCount(e,r){return n(this,null,function*(){return yield this._workerHandle.invokeMethod("executeQueryForCount",e?.toJSON(),r)})}executeQueryForExtent(e,r){return n(this,null,function*(){let{count:t,extent:i}=yield this._workerHandle.invokeMethod("executeQueryForExtent",e?.toJSON(),r);return{count:t,extent:f.fromJSON(i)}})}executeQueryForLatestObservations(e,r){return n(this,null,function*(){let t=yield this._workerHandle.invokeMethod("executeQueryForLatestObservations",e?.toJSON(),r),i=m.fromJSON(t);return this._ensureLayerOnFeatures(i),i})}_ensureLayerOnFeatures(e){let{layer:r}=this;for(let t of e.features)t.layer=r,t.sourceLayer=r}};o([a()],s.prototype,"updating",null),o([a({constructOnly:!0})],s.prototype,"schedule",void 0),o([a({constructOnly:!0})],s.prototype,"layer",void 0),o([a({constructOnly:!0})],s.prototype,"viewSpatialReference",void 0),o([a({constructOnly:!0})],s.prototype,"renderSpatialReference",void 0),o([a({constructOnly:!0})],s.prototype,"viewingMode",void 0),o([a({constructOnly:!0})],s.prototype,"dispatchRenderCommands",void 0),o([a()],s.prototype,"_workerUpdating",void 0),s=o([l("esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorkerHandle")],s);var h=class extends x{constructor(r,t){super("Feature3DPipelineWorker","setup",{},r,{strategy:"dedicated",client:t})}};function Q({id:e,lij:r,extent:t}){return{id:e,lij:r,extent:t}}function b({id:e}){return e}var c=class extends p{constructor(e){super(e),this._renderer=null,this.graphicsQuery={queryForSymbologySnapping:(r,t)=>{throw new d("unsupported-symbology-snapping")},executeQuery:(r,t)=>n(this,null,function*(){return yield this._workerHandle.executeQuery(r,t)}),executeQueryForIds:(r,t)=>n(this,null,function*(){return yield this._workerHandle.executeQueryForIds(r,t)}),executeQueryForCount:(r,t)=>n(this,null,function*(){return yield this._workerHandle.executeQueryForCount(r,t)}),executeQueryForExtent:(r,t)=>n(this,null,function*(){return yield this._workerHandle.executeQueryForExtent(r,t)}),executeQueryForLatestObservations:(r,t)=>n(this,null,function*(){return yield this._workerHandle.executeQueryForLatestObservations(r,t)})},this.maximumNumberOfFeatures=1e3}initialize(){if(this.layerView.layer.geometryType!=="point")throw new d("unsupported-geometry-type",`${this.layerView.layer.geometryType} is not supported`);this.addResolvingPromise(this.setup())}setup(){return n(this,null,function*(){let{layer:e,view:r}=this.layerView,{spatialReference:t,renderSpatialReference:i,resourceController:y}=r,H=r.state.viewingMode;if(this._renderer=new v({view:r,layerUid:e.uid}),e.type!=="feature")throw new Error("Only FeatureLayer is supported");let S=new s({schedule:u=>y.immediate.schedule(u),layer:e,viewSpatialReference:t,renderSpatialReference:i,viewingMode:H,dispatchRenderCommands:u=>this._renderer.executeRenderCommands(u)});this._workerHandle=yield S.when(),this.addHandles([this.layerView.view.featureTiles.addClient(),g(()=>this.layerView.view.featureTiles.tiles,"change",u=>{this._workerHandle.onTileTreeChange(u)},{onListenerAdd:u=>this._workerHandle.onTileTreeChange({added:u.toArray(),removed:[]}),onListenerRemove:u=>this._workerHandle.onTileTreeChange({added:[],removed:u.toArray()})})])})}get legendEnabled(){return!1}get hasAllFeatures(){return!1}get hasAllFeaturesInView(){return!1}get hasFullGeometries(){return!1}get symbologySnappingSupported(){return!1}get scaleVisibilitySuspended(){return!1}get suspendInfo(){return{}}get updating(){return this._workerHandle.updating}get dataUpdating(){return!1}get updatePolicy(){return O.ASYNC}get maximumNumberOfFeaturesExceeded(){return!1}get updatingProgressValue(){return 1}get usedMemory(){return 100}get unloadedMemory(){return 0}get ignoresMemoryFactor(){return!0}get performanceInfo(){return new _(new k(this.usedMemory,0,0,this.maximumNumberOfFeatures,0,null),0,0,!0,"tiles","n/a")}get suspendResumeExtentMode(){return"computed"}forEachGraphic(e){}findGraphic(e){return null}highlight(e){return F}maskOccludee(e){return w()}whenGraphicBounds(e,r){return n(this,null,function*(){return null})}computeAttachmentOrigin(e,r){return null}elevationAlignPointsInFeatures(e,r){throw new d("unsupported-elevation-alignment")}doRefresh(e){return n(this,null,function*(){})}setVisibility(e,r){}getMissingAttributesForFeature(e){return null}getHydratedGeometry(e){return null}};o([a()],c.prototype,"layerView",void 0),o([a()],c.prototype,"updating",null),c=o([l("esri.views.3d.layers.graphics.pipeline.Feature3DPipeline")],c);export{c as Feature3DPipeline};
