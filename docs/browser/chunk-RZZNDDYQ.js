import{a as j,b as h}from"./chunk-E25QWDXZ.js";import{a as v,b as N,c as F,d as D,e as P}from"./chunk-2GSAHDXY.js";import{f as d}from"./chunk-OL24FY3J.js";import{C as T,m as S,n as g}from"./chunk-OL43UY3L.js";import{c as U}from"./chunk-7PEPFLZH.js";import{a as c}from"./chunk-3M7VXIQH.js";import{K as b,h as u}from"./chunk-4M6XQSBA.js";import{t as p}from"./chunk-3IBUFXWY.js";function K(t,e,l,r){let o=t.name;return o==null?Promise.reject(new p("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):t.styleName==="Esri2DPointSymbolsStyle"?R(o,e,r):v(t,e,r).then(a=>M(a,o,e,l,F,r))}function J(t,e){return e.items.find(l=>l.name===t)}function M(t,e,l,r,o,a){let n=l?.portal!=null?l.portal:U.getDefault(),w={portal:n,url:u(t.baseUrl),origin:"portal-item"},s=J(e,t.data);if(!s){let y=`The symbol name '${e}' could not be found`;return Promise.reject(new p("symbolstyleutils:symbol-name-not-found",y,{symbolName:e}))}let i=c(o(s,r),w),f=s.thumbnail?.href??null,O=s.thumbnail?.imageData;j()&&(i=h(i)??"",f=h(f));let I={portal:n,url:u(b(i)),origin:"portal-item"};return D(i,a).then(y=>{let A=r==="cimRef"?N(y.data):y.data,m=d(A,I);if(m&&T(m)){if(f){let E=c(f,w);m.thumbnail=new g({url:E})}else O&&(m.thumbnail=new g({url:`data:image/png;base64,${O}`}));t.styleUrl?m.styleOrigin=new S({portal:l.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(m.styleOrigin=new S({portal:l.portal,styleName:t.styleName,name:e}))}return m})}function R(t,e,l){let r=P.replaceAll(/\{SymbolName\}/gi,t),o=e.portal!=null?e.portal:U.getDefault();return D(r,l).then(a=>{let n=N(a.data);return d(n,{portal:o,url:u(b(r)),origin:"portal-item"})})}export{K as a,J as b,M as c};
