import{b as be,j as E,n as ge,p as fe,q as j}from"./chunk-4DR6EKLV.js";import{d as O,j as ce}from"./chunk-SDHCGQUI.js";import{a as ie,b as oe,c as ne}from"./chunk-7H32J6FD.js";import{a as ue,b as de,c as pe,e as he,j as I,k as me,q as ye}from"./chunk-ZBOVC36T.js";import{b as le}from"./chunk-KHTVZWEX.js";import{g as C}from"./chunk-PQPFAB53.js";import{a as ae}from"./chunk-I6ZCG7XQ.js";import{a as A}from"./chunk-URULUATZ.js";import{f as R}from"./chunk-4OZVVJHM.js";import{k as se}from"./chunk-OL43UY3L.js";import{a as re}from"./chunk-RRDM7P6F.js";import{C as Q,D as Z,F as X,K as Y,d as $,t as W,z as J}from"./chunk-EPTSNNZF.js";import{b as ee,d as te,y as w}from"./chunk-2HUIJUS4.js";import{j as z}from"./chunk-R6VC74T7.js";import{c as K}from"./chunk-YRTBL7EE.js";import{a as _,j as H}from"./chunk-PYQRTZNZ.js";import{t as q}from"./chunk-GMC3I5VG.js";import{e as k}from"./chunk-WGF2T2BG.js";import{r as V}from"./chunk-3IBUFXWY.js";import{a as B,b as M,g as U}from"./chunk-JEGVIFEP.js";function Ve(a){switch(a){case"sphere":case"cube":case"diamond":case"cylinder":case"cone":case"inverted-cone":case"tetrahedron":return!0}return!1}function ve(a,e){let t=(r,s,o=!1)=>new ne(r.map(i=>{let n=s(i.tesselation);return o&&ye(n),new oe([new ie(n)],i.minScreenSpaceRadius)}));switch(a){case"sphere":return t([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],r=>he(e,.5,r,!0));case"cube":return t([{tesselation:0,minScreenSpaceRadius:0}],()=>ue(e,1));case"cone":return t(D,r=>I(e,1,.5,r,!1),!0);case"inverted-cone":return t(D,r=>I(e,1,.5,r,!0),!0);case"cylinder":return t(D,r=>me(e,1,.5,r,[0,0,1],[0,0,.5]));case"tetrahedron":return t([{tesselation:0,minScreenSpaceRadius:0}],()=>pe(e,1),!0);case"diamond":return t([{tesselation:0,minScreenSpaceRadius:0}],()=>de(e,1),!0);default:return}}var D=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];var d=class{constructor(e){this.estimated=!1,this.verticesPerFeature=e.verticesPerFeature??0,this.verticesPerCoordinate=e.verticesPerCoordinate??0,this.drawCallsPerFeature=e.drawCallsPerFeature??0,this.memory=e.memory??new P}},v=class extends d{constructor(e){super(e),this.estimated=!0}},F=class extends d{constructor(e,t){super(t),this.numComplexities=e}},x=class extends v{constructor(e,t){super(t),this.numComplexities=e}},P=class{constructor(){this.bytesPerFeature=0,this.bytesPerFeatureLabel=0,this.resourceBytes=0,this.draped={bytesPerFeature:0,bytesPerFeatureLabel:0}}};var Re=new v({});function Ye(a){return a.type==="web-style"?Re:Pe(a.symbolLayers.toArray().map(e=>G(a,e)))}function Pe(a){let e=0,t=0,r=0,s=!1,o=0,i=new P;for(let n of a)n!=null&&(e+=n.verticesPerFeature,t+=n.verticesPerCoordinate,r+=n.drawCallsPerFeature,i.bytesPerFeature+=n.memory.bytesPerFeature,i.bytesPerFeatureLabel+=n.memory.bytesPerFeatureLabel,i.resourceBytes+=n.memory.resourceBytes,i.draped.bytesPerFeature+=n.memory.bytesPerFeature,i.draped.bytesPerFeatureLabel+=n.memory.bytesPerFeatureLabel,s=s||n.estimated,++o);return s?new x(o,{verticesPerFeature:e,verticesPerCoordinate:t,drawCallsPerFeature:r,memory:i}):new F(o,{verticesPerFeature:e,verticesPerCoordinate:t,drawCallsPerFeature:r,memory:i})}function Ke(a){let e=Pe(a);return e.numComplexities>0&&(e.verticesPerFeature/=e.numComplexities,e.verticesPerCoordinate/=e.numComplexities,e.drawCallsPerFeature/=e.numComplexities,e.memory.bytesPerFeature/=e.numComplexities,e.memory.bytesPerFeatureLabel/=e.numComplexities,e.memory.resourceBytes/=e.numComplexities,e.memory.draped.bytesPerFeature/=e.numComplexities,e.memory.draped.bytesPerFeatureLabel/=e.numComplexities),e}var T={};function G(a,e){let t=Ae(a,e),r=ae(e)?2:0;switch(e.type){case"extrude":return new d({verticesPerFeature:-12,verticesPerCoordinate:12,drawCallsPerFeature:r,memory:t});case"fill":if(a.type==="mesh-3d")return new d({drawCallsPerFeature:r,memory:t});if(e.outline!=null&&e.outline.size>0)return new d({verticesPerFeature:-12,verticesPerCoordinate:9,memory:t});case"water":return new d({verticesPerFeature:-6,verticesPerCoordinate:3,memory:t});case"line":return new d({verticesPerFeature:-6,verticesPerCoordinate:6,memory:t});case"object":return e.resource?.href?new v({verticesPerFeature:100,memory:t}):M(B({},Ie(e.resource?.primitive??se)),{memory:t});case"path":{let s=0,o=0;switch(e.profile){case"circle":s=10;break;case"quad":s=4;break;default:return void(e.profile,void 0)}switch(e.join){case"round":o=3;break;case"miter":case"bevel":o=1;break;default:return}let i=2*s,n=s*o*2,b=n+i,g=-2*n-i;switch(e.cap){case"none":break;case"butt":case"square":g+=2*(s-1);break;case"round":g+=2*(s*2*2+s);break;default:return}return new d({verticesPerFeature:g,verticesPerCoordinate:b,memory:t})}case"text":case"icon":return new d({verticesPerFeature:6,memory:t});default:return}}function Ae(a,e){let t=a.type==="point-3d";switch(e.type){case"extrude":return e.edges&&e.edges.size>0?u.EXTRUDE_EDGES:u.EXTRUDE;case"fill":return e.outline!=null&&e.outline.size>0?u.FILL_OUTLINE:u.FILL;case"water":return u.FILL;case"line":return e.join==="round"?u.LINE_ROUND:u.LINE_MITER;case"path":switch(e.join){case"round":switch(e.profile){case"circle":return u.PATH_ROUND_CIRCLE;case"quad":return u.PATH_ROUND_QUAD;default:return void(e.profile,void 0)}case"miter":case"bevel":switch(e.profile){case"circle":return u.PATH_MITER_CIRCLE;case"quad":return u.PATH_MITER_QUAD;default:return void(e.profile,void 0)}default:return}case"object":return t?u.OBJECT_POINT:u.OBJECT_POLYGON;case"icon":case"text":return t?u.ICON_POINT:u.ICON_POLYGON;default:return}}function Ie(a){let e=T[a];if(e)return e;let t=je(ve(a,new le({},{spherical:!0,doublePrecisionRequiresObfuscation:!0})).levels);return T[a]=new d({verticesPerFeature:t}),T[a]}function je(a){return a.reduce((e,t,r)=>e+t.numVertices*(1/10**r),0)/a.reduce((e,t,r)=>e+1/10**r,0)}var u={ICON_POINT:{bytesPerFeature:2346.460896195398,bytesPerFeatureLabel:3484.7516349999996,resourceBytes:0,draped:{bytesPerFeature:2007.3528529826217,bytesPerFeatureLabel:3522.702025}},ICON_POLYGON:{bytesPerFeature:3677.214053765355,bytesPerFeatureLabel:3502.5355950000003,resourceBytes:0,draped:{bytesPerFeature:3030.3700096053935,bytesPerFeatureLabel:3550.247175}},OBJECT_POINT:{bytesPerFeature:569.2092700798497,bytesPerFeatureLabel:3183.0256999999992,resourceBytes:0,draped:{bytesPerFeature:569.2092700798497,bytesPerFeatureLabel:3183.0256999999992}},OBJECT_POLYGON:{bytesPerFeature:1252.202280530861,bytesPerFeatureLabel:3125.853350000001,resourceBytes:0,draped:{bytesPerFeature:1252.202280530861,bytesPerFeatureLabel:3125.853350000001}},LINE_MITER:{bytesPerFeature:3252.89170349711,bytesPerFeatureLabel:3554.3931949999997,resourceBytes:0,draped:{bytesPerFeature:2843.5793737736867,bytesPerFeatureLabel:3538.2547083333334}},LINE_ROUND:{bytesPerFeature:3384.080501909172,bytesPerFeatureLabel:3522.6055950000004,resourceBytes:0,draped:{bytesPerFeature:2833.1897218657587,bytesPerFeatureLabel:3532.0680950000005}},PATH_MITER_CIRCLE:{bytesPerFeature:38490.63544346431,bytesPerFeatureLabel:3660.7835999999998,resourceBytes:0,draped:{bytesPerFeature:38490.63544346431,bytesPerFeatureLabel:3660.7835999999998}},PATH_ROUND_CIRCLE:{bytesPerFeature:42934.88589895749,bytesPerFeatureLabel:3729.49955,resourceBytes:0,draped:{bytesPerFeature:42934.88589895749,bytesPerFeatureLabel:3729.49955}},PATH_MITER_QUAD:{bytesPerFeature:25392.923576583788,bytesPerFeatureLabel:3647.05925,resourceBytes:0,draped:{bytesPerFeature:25392.923576583788,bytesPerFeatureLabel:3647.05925}},PATH_ROUND_QUAD:{bytesPerFeature:40448.297252606244,bytesPerFeatureLabel:3646.8303499999997,resourceBytes:0,draped:{bytesPerFeature:40448.297252606244,bytesPerFeatureLabel:3646.8303499999997}},FILL:{bytesPerFeature:3419.9079008788176,bytesPerFeatureLabel:3564.2132483333335,resourceBytes:0,draped:{bytesPerFeature:2910.096178654882,bytesPerFeatureLabel:3554.8655816666665}},FILL_OUTLINE:{bytesPerFeature:5018.088812445781,bytesPerFeatureLabel:3524.8219616666665,resourceBytes:0,draped:{bytesPerFeature:4278.49006198517,bytesPerFeatureLabel:3532.068368333334}},EXTRUDE:{bytesPerFeature:7963.8889768932695,bytesPerFeatureLabel:3628.5106350000005,resourceBytes:0,draped:{bytesPerFeature:7963.8889768932695,bytesPerFeatureLabel:3628.5106350000005}},EXTRUDE_EDGES:{bytesPerFeature:3111.7648563053044,bytesPerFeatureLabel:2658.4350683333337,resourceBytes:0,draped:{bytesPerFeature:3111.7648563053044,bytesPerFeatureLabel:2658.4350683333337}}};function at(a){return a.mapPositions!=null}var _e=class{constructor(e,t,r){this.baseMaterial=e,this.edgeMaterial=t,this.hasSlicePlane=r}},Ce=class{get isElevationSource(){return!!this.stageObject.lastValidElevationBB}constructor(e,t,r,s,o,i,n,b=null){this.graphics3DSymbolLayer=e,this.stageObject=t,this._uniqueGeometries=r,this._uniqueMaterials=s,this._sharedResource=o,this.elevationAligner=i,this.elevationContext=n,this._edgeState=b,this.type="object3d",this._stageLayer=null,this._visible=!1,this._addedToStage=!1,this.alignedSampledElevation=0,this.needsElevationUpdates=!1,this.useObjectOriginAsAttachmentOrigin=!1}initialize(e){this._stageLayer=e;let t=e.stage;t.addMany(this._uniqueMaterials),t.addMany(this._uniqueGeometries),t.add(this.stageObject)}destroy(){if(!this._stageLayer)return;let e=this._stageLayer.stage;e.removeMany(this._uniqueMaterials),e.removeMany(this._uniqueGeometries),e.remove(this.stageObject),this._addedToStage&&(this._stageLayer.remove(this.stageObject),this._addedToStage=!1),e.renderer.edgeView?.removeObject(this.stageObject),this.stageObject.dispose(),this._sharedResource?.release(),this._visible=!1,this._stageLayer=null}layerOpacityChanged(e,t){let{stageObject:r,_edgeState:s,_stageLayer:o}=this;if(s==null)return;let i=Oe(s.baseMaterial);s.edgeMaterial.objectTransparency!==i&&(s.edgeMaterial.objectTransparency=i,this.resetEdgeObject(t)),o.stage.renderer.withEdgeView(n=>n.updateAllComponentOpacities(r,[e]))}slicePlaneEnabledChanged(e,t){let{stageObject:r,_edgeState:s,_stageLayer:o}=this;s!=null&&o.stage.renderer.withEdgeView(i=>{i.updateAllComponentMaterials(r,s.edgeMaterial,e,!t),s.hasSlicePlane=e})}setVisibility(e){let{_edgeState:t,stageObject:r,_stageLayer:s}=this;s!=null&&this.visible!==e&&(this._visible=e,r.visible=e,e&&!this._addedToStage&&(s.add(r),this._addedToStage=!0),t!=null&&s.stage.renderer.withEdgeView(o=>{o.hasObject(r)?o.updateObjectVisibility(r,e):e&&this._addOrUpdateEdgeObject(t,o,!1)}))}get visible(){return this._visible}alignWithElevation(e,t,r,s){if(this.elevationAligner==null)return;r!=null&&ge(this.elevationContext.featureExpressionInfoContext,r);let o=(i,n)=>be(i,e,this.elevationContext,t,n);this.alignedSampledElevation=this.elevationAligner(this,this.elevationContext,e.spatialReference,o,t),this.resetEdgeObject(s)}alignWithAbsoluteElevation(e,t,r){let s=(o,i)=>{i.sampledElevation=e,i.verticalDistanceToGround=0,i.z=e};this.alignedSampledElevation=this.elevationAligner(this,this.elevationContext,null,s,t),this.resetEdgeObject(r)}getCenterObjectSpace(e=_()){return ee(e,this.stageObject.boundingVolumeObjectSpace.bounds)}getBoundingBoxObjectSpace(e=$()){let t=this.stageObject.boundingVolumeObjectSpace;return Q(e,t.min),Z(e,t.max),e}computeAttachmentOrigin(e){let t=this.stageObject.effectiveTransformation;if(this.useObjectOriginAsAttachmentOrigin)e.render.origin[0]+=t[12],e.render.origin[1]+=t[13],e.render.origin[2]+=t[14],e.render.num++;else for(let r of this.stageObject.geometries)r.computeAttachmentOrigin(p)&&(w(p,p,t),te(e.render.origin,e.render.origin,p),e.render.num++)}getProjectedBoundingBox(e,t,r,s,o){return U(this,null,function*(){let i=this.getBoundingBoxObjectSpace(o),n=De,b=Y(i)?1:n.length;for(let l=0;l<b;l++){let c=n[l];m[0]=i[c[0]],m[1]=i[c[1]],m[2]=i[c[2]],w(m,m,this.stageObject.transformation),f[3*l]=m[0],f[3*l+1]=m[1],f[3*l+2]=m[2]}if(!e(f,0,b))return null;X(i);let g=null;this.calculateRelativeScreenBounds&&(g=this.calculateRelativeScreenBounds());for(let l=0;l<3*b;l+=3){for(let c=0;c<3;c++)i[c]=Math.min(i[c],f[l+c]),i[c+3]=Math.max(i[c+3],f[l+c]);g&&r.push({location:f.slice(l,l+3),screenSpaceBoundingRect:g})}if(t?.service&&this.elevationContext.mode!=="absolute-height"){W(i,p);let l=this.elevationContext.mode==="relative-to-scene"?"scene":"ground",c=0;if(t.useViewElevation)c=t.service.getElevation(p[0],p[1],l)??0;else try{let N=ce(i,t.service.spatialReference,t);c=(yield t.service.queryElevation(p[0],p[1],s,N,l))??0}catch{}J(i,0,0,-this.alignedSampledElevation+c)}return i})}addObjectState(e){e.stateType===R.Highlight&&e.addObject(this.stageObject,this.stageObject.highlight(e.highlightGroupName)),e.stateType===R.MaskOccludee&&e.addObject(this.stageObject,this.stageObject.maskOccludee())}removeObjectState(e){e.removeByObject(this.stageObject)}resetEdgeObject(e){let{_edgeState:t,stageObject:r,_stageLayer:s,_visible:o}=this;t!=null&&s.stage.renderer.withEdgeView(i=>{o?this._addOrUpdateEdgeObject(t,i,e):i.removeObject(r)})}_addOrUpdateEdgeObject(e,t,r){let s=Oe(e.baseMaterial);e.edgeMaterial.objectTransparency=s,t.addOrUpdateObject3D(this.stageObject,e.edgeMaterial,e.hasSlicePlane,!r).then(()=>this._stageLayer?.sync())}};function Oe(a){return a.parameters.transparent?A.TRANSPARENT:A.OPAQUE}var f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=_(),p=_(),De=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];var L;(function(a){a[a.RecreateSymbol=0]="RecreateSymbol",a[a.RecreateGraphics=1]="RecreateGraphics",a[a.FastUpdate=2]="FastUpdate"})(L||(L={}));var S=class{constructor(e){this.schedule=e,this._abortController=null,this._loadStatus=h.LOADING,this._loadError=null,this._loader=null,this.logger=null}destroy(){this.abortLoad()}get loadStatus(){return this._loadStatus}load(e,t){return this._loadStatus===h.LOADED?(e&&e(),this._loader??Promise.resolve()):this._loadStatus===h.FAILED?(t&&t(this._loadError),this._loader??Promise.resolve()):(this._loader==null&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then(()=>{this._abortController=null,this._loadStatus=h.LOADED},r=>{throw this._loadError=r,this._abortController=null,this._loadStatus=h.FAILED,!q(r)&&this.logger&&r.message&&this.logger.warn(r.message),r})),this._loader.then(e,t).catch(()=>{}),this._loader)}abortLoad(){this._abortController!=null?this._abortController=k(this._abortController):this._loadStatus===h.LOADING&&(this._loadStatus=h.FAILED),this._loader=null}},h;(function(a){a[a.LOADING=0]="LOADING",a[a.LOADED=1]="LOADED",a[a.FAILED=2]="FAILED"})(h||(h={}));var y=()=>V.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayer"),Ee=class extends S{constructor(e,t,r,s){super(r.schedule),this.symbol=e,this.symbolLayer=t,this._context=r,this.ignoreDrivers=!1,this._drivenProperties={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1,rotation:!1},this._materials=[],this.usedMemory=0,this.logger=y(),this._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0},this.skipHighSymbolLodsChanged=!0,this._renderPriority=s.renderPriority,this._renderPriorityStep=s.renderPriorityStep,this._elevationContext=new j,this.complexity=this.computeComplexity(),this.ignoreDrivers=s.ignoreDrivers,this.ignoreDrivers||(this._drivenProperties=Fe(this._context.renderer)),this._updateElevationContext()}getCachedSize(){return null}get extentPadding(){return 0}get materials(){return this._materials}_drivenPropertiesChanged(e){if(this.ignoreDrivers)return!1;let t=this._drivenProperties,r=Fe(e);return r.color!==t.color||r.opacity!==t.opacity||r.opacityAlwaysOpaque!==t.opacityAlwaysOpaque||r.size!==t.size||r.rotation!==t.rotation}get needsDrivenTransparentPass(){return this._drivenProperties.opacity&&!this._drivenProperties.opacityAlwaysOpaque}_logGeometryCreationWarnings(e,t,r,s){let o=e.projectionSuccess,i="polygons"in e?e.polygons:null,n=`${s} geometry failed to be created`;o?!this._logGeometryValidationWarnings(t,r,s)&&i&&i.length===0&&r==="rings"&&t.length>0&&t[0].length>2&&y().warnOncePerTick(`${n} (filled rings should use clockwise winding - try reversing the order of vertices)`):y().warnOncePerTick(`${n} (failed to project geometry to view spatial reference)`)}_logGeometryValidationWarnings(e,t,r){let s=`${r} geometry failed to be created`;return!e.length||e.length===1&&!e[0].length?(y().warnOncePerTick(`${s} (no ${t} were defined)`),!0):(!Array.isArray(e)||!Array.isArray(e[0]))&&(y().warnOncePerTick(`${s} (${t} should be defined as a 2D array)`),!0)}_validateGeometry(e,t=null,r=null){if(t!=null&&!t.includes(e.type))return this.logger.warn("unsupported geometry type for "+r+` symbol: ${e.type}`),!1;switch(e.type){case"point":{let s=e;if(!isFinite(s.x)||!isFinite(s.y))return y().warn("point coordinate is not a valid number, graphic skipped"),!1;break}case"polygon":z(e)&&y().warnOncePerTick("Fixed a non-closed polygon ring.")}return!0}_defaultElevationInfoNoZ(){return Te}_defaultElevationInfoZ(){return Ge}_updateElevationContext(){this._elevationInfoOverride!=null?(this._elevationContext.setFromElevationInfo(this._elevationInfoOverride),this._elevationContext.updateFeatureExpressionInfoContext(null)):this._context.layer.elevationInfo?(this._elevationContext.setFromElevationInfo(this._context.layer.elevationInfo),this._elevationContext.updateFeatureExpressionInfoContext(this._context.featureExpressionInfoContext)):this._elevationContext.reset()}getDefaultElevationInfo(e){return e.hasZ?this._defaultElevationInfoZ():this._defaultElevationInfoNoZ()}getGeometryElevationMode(e,t=this.getDefaultElevationInfo(e)){return this._elevationContext.mode||t.mode}setElevationInfoOverride(e){this._elevationInfoOverride=e,this._updateElevationContext()}setGraphicElevationContext(e,t=new j){let r=e.geometry,s=this.getDefaultElevationInfo(r);t.unit=this._elevationContext.unit!=null?this._elevationContext.unit:s.unit,t.mode=this.getGeometryElevationMode(r,s),t.offsetMeters=this._elevationContext.meterUnitOffset??s.offset??0;let o=!this._elevationOptions.supportsOnTheGround&&t.mode==="on-the-ground";o&&(t.mode="relative-to-ground",t.offsetMeters=0);let i=o?fe:this._elevationContext.featureExpressionInfoContext;return t.updateFeatureExpressionInfoContext(i,e,this._context.layer),t}prepareSymbolLayerPatch(e){}updateGeometry(e,t){return!1}updateTransform(e,t,r,s){return!1}onRemoveGraphic(e){}_getLayerOpacity(){return this._context.graphicsCoreOwner&&"fullOpacity"in this._context.graphicsCoreOwner?this._context.graphicsCoreOwner.fullOpacity??0:this._context.layer.opacity??1}_getCombinedOpacity(e,t=xe){let r=this.draped?1:this._getLayerOpacity();return this._drivenProperties.opacity?r:e?r*e.a:t.hasIntrinsicColor?r:0}_getCombinedOpacityAndColor(e,t=xe){let r=this._getCombinedOpacity(e,t);if(this._drivenProperties.color)return O(null,r);let s=e!=null?re.toUnitRGB(e):H;return O(s,r)}_getVertexOpacityAndColor(e,t=null){let r=this._drivenProperties.color?e.color:null,s=this._drivenProperties.opacity?e.opacity:null,o=O(r,s);return t&&(o[0]*=t,o[1]*=t,o[2]*=t,o[3]*=t),o}isFastUpdatesEnabled(){return this._fastUpdates!=null}computeComplexity(){return G(this.symbol,this.symbolLayer)}globalPropertyChanged(e,t,r){switch(e){case"opacity":return this.layerOpacityChanged(t,r),!0;case"elevationInfo":{let s=this._elevationContext.mode;return this._updateElevationContext(),this.layerElevationInfoChanged(t,r,s)!==E.RECREATE}case"slicePlaneEnabled":return this.slicePlaneEnabledChanged(t,r);case"physicalBasedRenderingEnabled":return this.physicalBasedRenderingChanged();case"pixelRatio":return this.pixelRatioChanged;case"skipHighSymbolLods":return this.skipHighSymbolLodsChanged;default:return!1}}get pixelRatioChanged(){return!0}updateGraphics3DGraphicElevationInfo(e,t,r){let s=E.UPDATE;return e.forEach(o=>{let i=t(o);if(i!=null){let n=o.graphic;this.setGraphicElevationContext(n,i.elevationContext),i.needsElevationUpdates=r(i.elevationContext.mode)}else s=E.RECREATE}),s}applyRendererDiff(e,t){return L.RecreateSymbol}getFastUpdateAttrValues(e){if(!this._fastUpdates)return null;let t=this._fastUpdates.visualVariables,r=t.size?C(t.size.field,e):0,s=t.color?C(t.color.field,e):0,o=t.opacity?C(t.opacity.field,e):0;return K(r,s,o,0)}get draped(){return this._draped}ensureDrapedStatus(e){return this._draped==null?(this._draped=e,!0):(e!==this.draped&&y().warnOnce("A symbol can only produce either draped or non-draped visualizations. Use two separate symbol instances for draped and non-draped graphics if necessary."),!1)}test(){let e=()=>({size:this._fastUpdates?.visualVariables.size?.field??null,color:this._fastUpdates?.visualVariables.color?.field??null,opacity:this._fastUpdates?.visualVariables.opacity?.field??null,rotation:this._fastUpdates?.visualVariables.rotation?.field??null});return{drivenProperties:this._drivenProperties,getVisVarFields:e}}};function Fe(a){let e={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1,rotation:!1};return a&&"visualVariables"in a&&a.visualVariables&&a.visualVariables.forEach(t=>{switch(t.type){case"color":if(e.color=!0,t.stops)for(let r=0;r<t.stops.length;r++){let s=t.stops[r].color;s&&(e.opacity=!0,s.a<1&&(e.opacityAlwaysOpaque=!1))}break;case"opacity":e.opacity=!0,e.opacityAlwaysOpaque=!1;break;case"size":e.size=!0;break;case"rotation":e.rotation=!0}}),e}var Te={mode:"on-the-ground",offset:0,unit:"meters"},Ge={mode:"absolute-height",offset:0,unit:"meters"},xe={hasIntrinsicColor:!1};export{Ve as a,ve as b,d as c,Re as d,Ye as e,Pe as f,Ke as g,Ae as h,je as i,at as j,_e as k,Ce as l,L as m,S as n,h as o,Ee as p};
