import{c as f}from"./chunk-PQ2CFAKW.js";import{E as m,H as s,Q as u,V as y,X as b,b as c,ba as A,c as d,ca as x,da as w,oa as g,pa as F,qa as V,ra as j,sa as v,ta as D,w as T}from"./chunk-4RJTDUBN.js";import{p}from"./chunk-MTRBRBPC.js";import"./chunk-A7GYEEN6.js";import"./chunk-WUZAEWWX.js";import"./chunk-ACVF7Z7X.js";import"./chunk-ZGDQY5ZD.js";import"./chunk-QH2MD2O2.js";import"./chunk-6EZNY6L4.js";import"./chunk-7XLHE26H.js";import"./chunk-EN6CTWVM.js";import"./chunk-LVPMJTA6.js";import"./chunk-NNETCWLJ.js";import"./chunk-K72LO6P2.js";import"./chunk-2R4SNL6O.js";import"./chunk-OFZ6SV37.js";import"./chunk-YSOJWUIW.js";import"./chunk-Q5WFUDPQ.js";import"./chunk-DPZGANVI.js";import"./chunk-T7BKG6V3.js";import"./chunk-R6VC74T7.js";import"./chunk-6WKJD7BM.js";import"./chunk-3CR7P5WT.js";import"./chunk-GYH7NDHH.js";import"./chunk-S3UQHW42.js";import"./chunk-5PTS4JDF.js";import"./chunk-MUI46NAG.js";import"./chunk-N27U3N2T.js";import"./chunk-4R5NBZMW.js";import"./chunk-NDYVXEZ5.js";import"./chunk-CMMPCPP5.js";import"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-ZTKK3KB7.js";import"./chunk-GZXWFBZI.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import"./chunk-GGZQ5GCM.js";import"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import"./chunk-BMVJCP2M.js";import"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{g as o}from"./chunk-JEGVIFEP.js";function I(t,e){return t&&t.domain?t.domain.type==="coded-value"||t.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:t.domain.name,dataType:p[t.field.type],codedValues:t.domain.codedValues.map(a=>({name:a.name,code:a.code}))},v(e)):f.convertObjectToArcadeDictionary({type:"range",name:t.domain.name,dataType:p[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},v(e)):null}function C(t){t.mode==="async"&&(t.functions.domain=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,2,3,e,a),m(n[0]))return I(g(n[0],y(n[1]),n[2]===void 0?void 0:n[2]),e);if(s(n[0]))return yield n[0]._ensureLoaded(),I(w(y(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),e);throw new d(e,c.InvalidParameter,a)}))},t.functions.subtypes=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,1,1,e,a),m(n[0])){let r=F(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}if(s(n[0])){yield n[0]._ensureLoaded();let r=n[0].subtypeMetaData();return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new d(e,c.InvalidParameter,a)}))},t.functions.domainname=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,2,4,e,a),m(n[0]))return V(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(s(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return A(r,n[2])}throw new d(e,c.InvalidParameter,a)}))},t.signatures.push({name:"domainname",min:2,max:4}),t.functions.domaincode=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,2,4,e,a),m(n[0]))return j(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(s(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return x(r,n[2])}throw new d(e,c.InvalidParameter,a)}))},t.signatures.push({name:"domaincode",min:2,max:4}),t.functions.text=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,1,2,e,a),s(n[0])){let r=T(n[1],"");if(r==="")return n[0].castToText();if(r.toLowerCase()==="schema")return n[0].convertToText("schema",i.abortSignal);if(r.toLowerCase()==="featureset")return n[0].convertToText("featureset",i.abortSignal);throw new d(e,c.InvalidParameter,a)}return b(n[0],n[1])}))},t.functions.gdbversion=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,1,1,e,a),m(n[0]))return n[0].gdbVersion();if(s(n[0]))return(yield n[0].load()).gdbVersion;throw new d(e,c.InvalidParameter,a)}))},t.functions.schema=function(e,a){return t.standardFunctionAsync(e,a,(i,l,n)=>o(this,null,function*(){if(u(n,1,1,e,a),s(n[0]))return yield n[0].load(),f.convertObjectToArcadeDictionary(n[0].schema(),v(e));if(m(n[0])){let r=D(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new d(e,c.InvalidParameter,a)}))})}export{C as registerFunctions};
