import{a as ue}from"./chunk-WLE5UO7K.js";import{a as re,b as le,c as oe,d as se,e as ie,f as ne,g as B,i as ce}from"./chunk-MA4NJINO.js";import{a as ae}from"./chunk-ES4GGVYJ.js";import{d as te}from"./chunk-ZMNG2DP3.js";import{a as J,c as $,k as z,l as K,m as N,n as P,p as ee}from"./chunk-4QRGVGHK.js";import{e as u}from"./chunk-AKDLIRLE.js";import{e as q,f as Z}from"./chunk-5TKTI2G2.js";import{a as Q}from"./chunk-GLWPOGYF.js";import{y as j}from"./chunk-N27U3N2T.js";import{Q as A}from"./chunk-GGZQ5GCM.js";import{U as Y}from"./chunk-TFUPB3ZG.js";import{a as F}from"./chunk-BMVJCP2M.js";import{a as X}from"./chunk-WGF2T2BG.js";import{a as H,b as E,g as M}from"./chunk-JEGVIFEP.js";function Ae(e){switch(e?.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return null}}function Be(e,t){return M(this,null,function*(){if(e.hasZ||t.type==="2d")return e;let a=t.map?.ground;if(!a?.layers.length)return e;let{geometry:l}=yield a.queryElevation(e,{cache:t.basemapTerrain?.elevationQueryCache});return l})}function Ie(e,t,a){return fe(e.center,t,a)}function De(e,t,a){switch(e?.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return fe(e,t,a);default:return null}}function fe(e,t,a){let l=e.hasZ?e.z:void 0;if(t?.map)return(a!=null?te(t,a):t.extent).clone().centerAt(e).set({zmax:l,zmin:l});let{x:r,y:s,spatialReference:o}=e;return new j({xmin:r-.25,ymin:s-.25,xmax:r+.25,ymax:s+.25,spatialReference:o,zmin:l,zmax:l})}var pe="esri-relationship-ramp",T=`${pe}--diamond`,x=`${pe}--square`,xe="http://www.w3.org/2000/svg",f={diamondContainer:`${T}__container`,diamondLeftCol:`${T}__left-column`,diamondRightCol:`${T}__right-column`,diamondMidCol:`${T}__middle-column`,diamondMidColLabel:`${T}__middle-column--label`,diamondMidColRamp:`${T}__middle-column--ramp`,squareTable:`${x}__table`,squareTableRow:`${x}__table-row`,squareTableCell:`${x}__table-cell`,squareTableLabel:`${x}__table-label`,squareTableLabelLeftBottom:`${x}__table-label--left-bottom`,squareTableLabelRightBottom:`${x}__table-label--right-bottom`,squareTableLabelLeftTop:`${x}__table-label--left-top`,squareTableLabelRightTop:`${x}__table-label--right-top`};function Ce(e,t,a={}){let{focus:l,labels:r}=e,s=!!l,o=Te(e,t,a),c={justifyContent:"center"},d=Z(),b=a.key??t;return s?u("div",{class:f.diamondContainer,key:`${b}-container`,styles:c},u("div",{class:f.diamondLeftCol},d?r.right:r.left),u("div",{class:f.diamondMidCol},u("div",{class:f.diamondMidColLabel},r.top),o,u("div",{class:f.diamondMidColLabel},r.bottom)),u("div",{class:f.diamondRightCol},d?r.left:r.right)):u("div",{class:f.squareTable,key:`${b}-container`},u("div",{class:f.squareTableRow},u("div",{class:q(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},d?r.top:r.left),u("div",{class:f.squareTableCell}),u("div",{class:q(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},d?r.left:r.top)),u("div",{class:f.squareTableRow},u("div",{class:f.squareTableCell}),o,u("div",{class:f.squareTableCell})),u("div",{class:f.squareTableRow},u("div",{class:q(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},d?r.right:r.bottom),u("div",{class:f.squareTableCell}),u("div",{class:q(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},d?r.bottom:r.right)))}function me(e,t,a){let l=`${a}_arrowStart`,r=`${a}_arrowEnd`,s=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":s?o.markerStart=`url(#${r})`:o.markerEnd=`url(#${l})`;break;case"LL":o.markerStart=`url(#${r})`;break;case"LH":s?o.markerEnd=`url(#${l})`:o.markerStart=`url(#${r})`;break;default:o.markerEnd=`url(#${l})`}return o}function Te(e,t,a={}){let{focus:l,numClasses:r,colors:s,rotation:o}=e,{opacity:c,effectList:d,ariaLabel:b}=a,m=a.size??60,p=!!l,n=Math.sqrt(m**2+m**2)+(p?0:5),y=[],i=[],g=[],w=(m||75)/r;for(let _=0;_<r;_++){let ve=_*w;for(let V=0;V<r;V++){let ke=V*w,W=le(s[_][V]),Se=oe(null),O={type:"rect",x:ke,y:ve,width:w,height:w},G=se(W);G&&y.push(G);let U=re(O,W.fill,Se,null);U&&i.push(U),g.push(ie(O))}}let v=10,L=15,h=15,k=10,S=null;p||(S="margin: -15px -15px -18px -15px");let C=me("left",l,t),I=me("right",l,t),D=ne(g),ge=B(D,n,n,0,!1,o,!1),we=B(D,n,n,0,!1,p?-45:null,!1),Le={filter:P(d)??void 0,opacity:c==null?"":`${c}`};return u("div",{class:p?f.diamondMidColRamp:f.squareTableCell,styles:Le},u("svg",{"aria-label":b,focusable:!1,height:n,role:"image",style:S,width:n,xmlns:xe},u("defs",null,u("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},u("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),u("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},u("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),u("g",{transform:ge},i),u("g",{transform:we},u("line",{fill:"none","marker-end":C.markerEnd,"marker-start":C.markerStart,stroke:"#555555","stroke-width":"1",x1:-v,x2:-v,y1:m-L,y2:L}),u("line",{fill:"none","marker-end":I.markerEnd,"marker-start":I.markerStart,stroke:"#555555","stroke-width":"1",x1:h,x2:m-h,y1:m+k,y2:m+k}))))}var de={HH:315,HL:45,LL:135,LH:225},Re={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function He(e){if(!e)return;let{type:t}=e;if(t.includes("3d"))return ue(e.symbolLayers.at(0));if(t==="simple-line"){let a=$(e);return a&&a.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){let a=$(e);return a&&a.color}return J(e)}function Me(e,t){let a=t.HH.label,l=t.LL.label,r=t.HL.label,s=t.LH.label;switch(e){case"HH":default:return{top:a,bottom:l,left:r,right:s};case"HL":return{top:r,bottom:s,left:l,right:a};case"LL":return{top:l,bottom:a,left:s,right:r};case"LH":return{top:s,bottom:r,left:a,right:l}}}function qe(e){let{focus:t,infos:a,numClasses:l}=e,r=Re[l],s={};a.forEach(c=>{s[c.value]={label:c.label,fill:He(c.symbol)}});let o=[];for(let c=0;c<l;c++){let d=[];for(let b=0;b<l;b++){let m=s[r[c][b]];d.push(m.fill)}o.push(d)}return{type:"relationship-ramp",numClasses:l,focus:t,colors:o,labels:Me(t,s),rotation:$e(t)}}function $e(e){let t=de[e];return e&&t==null&&(t=de.HH),t||0}var R=null,he=[255,255,255];function be(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function ft(e,t,a){let{backgroundColor:l,outline:r,dotSize:s}=e,o=a?.swatchSize||ae.size,c=.8,d=Math.round(o*o/Math.max(s,.5)**2*c),b=window.devicePixelRatio,m=document.createElement("canvas"),p=o*b;m.width=p,m.height=p,m.style.width=m.width/b+"px",m.style.height=m.height/b+"px";let n=m.getContext("2d");if(l&&(n.fillStyle=l.toCss(!0),n.fillRect(0,0,p,p),n.fill()),n.fillStyle=t?.toCss(!0)??"",R&&R.length/2===d)for(let i=0;i<2*d;i+=2){let g=R[i],w=R[i+1];n.fillRect(g,w,s*b,s*b),n.fill()}else{R=[];for(let i=0;i<2*d;i+=2){let g=be(0,p),w=be(0,p);R.push(g,w),n.fillRect(g,w,s*b,s*b),n.fill()}}r&&(r.color&&(n.strokeStyle=r.color.toCss(!0)),n.lineWidth=r.width,n.strokeRect(0,0,p,p));let y=new Image(o,o);return y.src=m.toDataURL(),y.ariaLabel=a?.ariaLabel??null,y.alt=a?.ariaLabel??"",y}function mt(e,t={}){let a=t.radius||40,l=2*Math.PI*a,r=e.length,s=l/r,o=[],c=$(t.outline);c?.width!=null&&(c.width*=2),(c||t.backgroundColor)&&o.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:c,offset:[0,0]});let d=t.values,b=d&&d.length===r&&d.reduce((i,g)=>i+g,0)===100,m=[0];for(let i=0;i<r;i++){let g=null;b&&(g=d[i]*l/100,m.push(g+m[i])),o.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(g??s)/2} ${l}`,dashoffset:"-"+(b?m[i]/2:i*(s/2)),color:e[i]},offset:[0,0]})}let p=null,n=2*a+(c?.width||0),y=t.holePercentage;if(y){c&&o.push({shape:{type:"circle",cx:a,cy:a,r:a*y},fill:null,stroke:c,offset:[0,0]});let i=n/2;p=[[{shape:{type:"circle",cx:i,cy:i,r:i},fill:he,stroke:c?E(H({},c),{color:he}):null,offset:[0,0]},{shape:{type:"circle",cx:i,cy:i,r:a*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return ce([o],[n,n],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:p,rotations:[-90],ariaLabel:t.ariaLabel})}function pt(e,t={}){let r=t.align==="horizontal",s=r?75:24,o=r?24:75,c=t.width??s,d=t.height??o,b=t.gradient??!0,m=window.devicePixelRatio,p=c*m,n=d*m,y=document.createElement("canvas");y.width=p,y.height=n,y.ariaLabel=t.ariaLabel??null,y.style.width=`${c}px`,y.style.height=`${d}px`;let i=y.getContext("2d"),g=r?p:0,w=r?0:n;if(b){let L=i.createLinearGradient(0,0,g,w),h=e.length,k=h===1?0:1/(h-1);e.forEach((S,C)=>L.addColorStop(C*k,S.toString())),i.fillStyle=L,i.fillRect(0,0,p,n)}else{let L=r?p/e.length:p,h=r?n:n/e.length,k=0,S=0;for(let C of e)i.fillStyle=C.toString(),i.fillRect(k,S,L,h),k=r?k+L:0,S=r?0:S+h}let v=document.createElement("div");return v.style.width=`${c}px`,v.style.height=`${d}px`,_e(v,t?.effectList),v.appendChild(y),v}function _e(e,t){if(!t)return;e.style.filter=P(t);let a=t.effects;if(a){for(let l of a)if(l?.type==="drop-shadow"){l.offsetX<0?e.style.marginLeft=`${Math.abs(l.offsetX)}px`:e.style.marginRight=`${l.offsetX}px`;break}}}function Ve(e,t){return M(this,null,function*(){switch(e.type){case"web-style":{let{previewWebStyleSymbol:a}=yield import("./chunk-KRJHIB72.js");return a(e,Ve,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{let{previewSymbol3D:a}=yield import("./chunk-MAZYYO46.js");return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{let{previewSymbol2D:a}=yield import("./chunk-GLAYQELY.js");return a(e,t)}case"cim":{let{previewCIMSymbol:a}=yield import("./chunk-NIZN3N6M.js");return a(e,t)}default:return}})}function ye(e){return e&&"opacity"in e?e.opacity*ye(e.parent):1}function dt(e,t){return M(this,null,function*(){if(!e)return;let a=e.sourceLayer,l=(t!=null&&t.useSourceLayer?a:e.layer)??a,r=ye(l);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){let h=e.symbol.type==="web-style"?yield ee(e.symbol,E(H({},t),{cache:t!=null?t.webStyleCache:null})):e.symbol.clone();return z(h,null,r),h}let s=t?.renderer??Ee(l),o=s&&"getSymbolAsync"in s?yield s.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?yield o.fetchSymbol(E(H({},t),{cache:t!=null?t.webStyleCache:null})):o.clone(),!s||!("visualVariables"in s)||!s.visualVariables?.length)return z(o,null,r),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&t?.arcade==null){let h=H({},t);h.arcade=yield Q(),t=h}let{getColor:c,getOpacity:d,getAllSizes:b,getRotationAngle:m}=yield import("./chunk-7PBEMZJ7.js"),p=[],n=[],y=[],i=[];for(let h of s.visualVariables)switch(h.type){case"color":p.push(h);break;case"opacity":n.push(h);break;case"rotation":i.push(h);break;case"size":h.target||y.push(h)}let g=!!p.length&&p[p.length-1],w=g?c(g,e,t):null,v=!!n.length&&n[n.length-1],L=v?d(v,e,t):null;if(r!=null&&(L=L!=null?L*r:r),z(o,w,L),y.length){let h=b(y,e,t);yield K(o,h)}for(let h of i)N(o,m(h,e,t),h.axis);return o})}function Ee(e){if(e)return"renderer"in e?e.renderer:void 0}var xt=e=>{let t=class extends e{constructor(...a){super(...a),this.goToOverride=null,this.view=null}callGoTo(a){let{view:l}=this;return X(l),this.goToOverride?this.goToOverride(l,a):l.goTo(a.target,a.options)}};return F([A()],t.prototype,"goToOverride",void 0),F([A()],t.prototype,"view",void 0),t=F([Y("esri.widgets.support.GoTo")],t),t};export{Ae as a,Be as b,Ie as c,De as d,Ce as e,qe as f,$e as g,ft as h,mt as i,pt as j,Ve as k,dt as l,xt as m};
