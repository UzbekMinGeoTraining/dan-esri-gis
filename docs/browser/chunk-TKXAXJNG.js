import{a as i,b as f,c as b,e as _}from"./chunk-D3BMTQYU.js";import{a as m,b as d}from"./chunk-N6PITG7Q.js";import{f as u,g as h,l as n,m as l}from"./chunk-ATV5GTE5.js";import{a as p}from"./chunk-BDF7KEUQ.js";var r=class extends d{constructor(e,t,o){super(e,t,new m(_,()=>import("./chunk-LG5K3HB3.js")),o)}initializePipeline(e){switch(e.blitMode){case i.None:case i.Depth:return l({colorWrite:n});case i.Alpha:return l({blending:h,colorWrite:n});default:e.blitMode;case i.PremultipliedAlpha:case i.COUNT:return l({blending:u,colorWrite:n})}}};var g=class{constructor(e,t=i.None){this._techniques=e,this._parameters=new b,this._configuration=new f,this._configuration.blitMode=t,e.precompile(r,this._configuration)}blit(e,t,o,c){e.bindFramebuffer(o.fbo),e.setClearColor(0,0,0,1),e.clear(p.COLOR),this._parameters.texture=t.getTexture();let a=this._techniques.acquire(r,this._configuration);e.bindTechnique(a,c,this._parameters),e.screen.draw(),a.release()}blend(e,t,o,c,a=1){this._configuration.hasOpacityFactor=a<1;let s=this._techniques.acquire(r,this._configuration);return s.compiled?(e.bindFramebuffer(o.fbo),this._parameters.texture=t.getTexture(),this._parameters.opacity=a,e.bindTechnique(s,c,this._parameters),e.screen.draw(),s.release(),!0):(s.release(),!1)}};export{r as a,g as b};
