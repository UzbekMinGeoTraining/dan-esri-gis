import{e as m,h as u,n as o,o as e,q as E,z as i}from"./chunk-BDF7KEUQ.js";import{r as d,t as I}from"./chunk-3IBUFXWY.js";import{a as b}from"./chunk-BP73DJTS.js";var D=()=>d.getLogger("esri.views.webgl.checkWebGLError");function O(t,a){switch(a){case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}var B=!!b("enable-feature:webgl-debug");function T(){return B}function p(){return B}function U(t){if(T()){let a=t.getError();if(a){let R=O(t,a),f=new Error().stack;D().error(new I("webgl-error","WebGL error occurred",{message:R,stack:f}))}}}function S(t){switch(t){case u.BYTE:case u.UNSIGNED_BYTE:return 1;case u.SHORT:case u.UNSIGNED_SHORT:case u.HALF_FLOAT:return 2;case u.FLOAT:case u.INT:case u.UNSIGNED_INT:return 4}}function C(t){let a=t.gl;switch(a.getError()){case a.NO_ERROR:return null;case a.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case a.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case a.INVALID_OPERATION:return"The specified command is not allowed for the current state";case a.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case a.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case a.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function V(t,a){return(t.vertexBuffers.get(a)?.usedMemory??0)/P(t.layout.get(a))}function P(t){return t[0].stride}function X(t,a,R,f,_=0){let n=t.gl;t.bindBuffer(R);for(let r of f){let s=a.get(r.name);if(s==null){console.warn(`There is no location for vertex attribute '${r.name}' defined.`);continue}let A=_*r.stride;if(r.count<=4)n.vertexAttribPointer(s,r.count,r.type,r.normalized,r.stride,r.offset+A),n.enableVertexAttribArray(s),r.divisor>0&&t.gl.vertexAttribDivisor(s,r.divisor);else if(r.count===9)for(let c=0;c<3;c++)n.vertexAttribPointer(s+c,3,r.type,r.normalized,r.stride,r.offset+12*c+A),n.enableVertexAttribArray(s+c),r.divisor>0&&t.gl.vertexAttribDivisor(s+c,r.divisor);else if(r.count===16)for(let c=0;c<4;c++)n.vertexAttribPointer(s+c,4,r.type,r.normalized,r.stride,r.offset+16*c+A),n.enableVertexAttribArray(s+c),r.divisor>0&&t.gl?.vertexAttribDivisor(s+c,r.divisor);else console.error("Unsupported vertex attribute element count: "+r.count);if(T()){let c=C(t),l=S(r.type),G=r.offset,N=Math.round(l/G)!==l/G?`. Offset not a multiple of stride. DataType requires ${l} bytes, but descriptor has an offset of ${G}`:"";c&&console.error(`Unable to bind vertex attribute "${r.name}" with baseInstanceOffset ${A}${N}:`,c,r)}}}function W(t,a,R,f){let _=t.gl;t.bindBuffer(R);for(let n of f){let r=a.get(n.name);if(n.count<=4)_.disableVertexAttribArray(r),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r,0);else if(n.count===9)for(let s=0;s<3;s++)_.disableVertexAttribArray(r+s),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r+s,0);else if(n.count===16)for(let s=0;s<4;s++)_.disableVertexAttribArray(r+s),n.divisor&&n.divisor>0&&t.gl?.vertexAttribDivisor(r+s,0);else console.error("Unsupported vertex attribute element count: "+n.count)}t.unbindBuffer(m.ARRAY_BUFFER)}function k(t){switch(t){case o.ALPHA:case o.LUMINANCE:case o.RED:case o.RED_INTEGER:case e.R8:case e.R8I:case e.R8UI:case e.R8_SNORM:case E.STENCIL_INDEX8:return 1;case o.LUMINANCE_ALPHA:case o.RG:case o.RG_INTEGER:case e.RGBA4:case e.R16F:case e.R16I:case e.R16UI:case e.RG8:case e.RG8I:case e.RG8UI:case e.RG8_SNORM:case e.RGB565:case e.RGB5_A1:case E.DEPTH_COMPONENT16:return 2;case o.DEPTH_COMPONENT:case o.RGB:case o.RGB_INTEGER:case e.RGB8:case e.RGB8I:case e.RGB8UI:case e.RGB8_SNORM:case e.SRGB8:case E.DEPTH_COMPONENT24:return 3;case o.DEPTH_STENCIL:case o.DEPTH24_STENCIL8:case o.RGBA:case o.RGBA_INTEGER:case e.RGBA8:case e.R32F:case e.R11F_G11F_B10F:case e.RG16F:case e.R32I:case e.R32UI:case e.RG16I:case e.RG16UI:case e.RGBA8I:case e.RGBA8UI:case e.RGBA8_SNORM:case e.SRGB8_ALPHA8:case e.RGB9_E5:case e.RGB10_A2UI:case e.RGB10_A2:case E.DEPTH_STENCIL:case E.DEPTH_COMPONENT32F:case E.DEPTH24_STENCIL8:return 4;case E.DEPTH32F_STENCIL8:return 5;case e.RGB16F:case e.RGB16I:case e.RGB16UI:return 6;case e.RG32F:case e.RG32I:case e.RG32UI:case e.RGBA16F:case e.RGBA16I:case e.RGBA16UI:return 8;case e.RGB32F:case e.RGB32I:case e.RGB32UI:return 12;case e.RGBA32F:case e.RGBA32I:case e.RGBA32UI:return 16;case i.COMPRESSED_RGB_S3TC_DXT1_EXT:case i.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case i.COMPRESSED_RGBA_S3TC_DXT3_EXT:case i.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case i.COMPRESSED_R11_EAC:case i.COMPRESSED_SIGNED_R11_EAC:case i.COMPRESSED_RGB8_ETC2:case i.COMPRESSED_SRGB8_ETC2:case i.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case i.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case i.COMPRESSED_RG11_EAC:case i.COMPRESSED_SIGNED_RG11_EAC:case i.COMPRESSED_RGBA8_ETC2_EAC:case i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}export{B as a,T as b,p as c,U as d,S as e,C as f,V as g,X as h,W as i,k as j};
