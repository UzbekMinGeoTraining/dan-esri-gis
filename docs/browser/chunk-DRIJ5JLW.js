import{a as j}from"./chunk-IAUHHGQO.js";import{a as F}from"./chunk-C3YONAAM.js";import{a as f}from"./chunk-LHH3AZP2.js";import"./chunk-HVNUIUKO.js";import"./chunk-Y5M2SONX.js";import"./chunk-Q6ZVH4MK.js";import"./chunk-OL43UY3L.js";import"./chunk-H2QMNAXT.js";import"./chunk-GKUDWGVQ.js";import"./chunk-NZ7WSL6F.js";import"./chunk-RRDM7P6F.js";import"./chunk-7XLHE26H.js";import"./chunk-EN6CTWVM.js";import"./chunk-LVPMJTA6.js";import{b as y}from"./chunk-4XIZVPNF.js";import"./chunk-NNETCWLJ.js";import"./chunk-EPTSNNZF.js";import"./chunk-MBJHSEMD.js";import"./chunk-MXOOOTCV.js";import"./chunk-7D4IYTAJ.js";import"./chunk-TSNWBMBA.js";import"./chunk-GLWPOGYF.js";import"./chunk-YFBPRKIN.js";import"./chunk-P2YRCTWM.js";import"./chunk-OFZ6SV37.js";import"./chunk-YSOJWUIW.js";import"./chunk-Q5WFUDPQ.js";import"./chunk-DPZGANVI.js";import"./chunk-T7BKG6V3.js";import"./chunk-R6VC74T7.js";import"./chunk-6WKJD7BM.js";import"./chunk-3CR7P5WT.js";import"./chunk-PYQRTZNZ.js";import"./chunk-S4PLWG55.js";import"./chunk-DZAY272R.js";import"./chunk-GYH7NDHH.js";import"./chunk-S3UQHW42.js";import"./chunk-VQHENXDQ.js";import"./chunk-VWF5VUO3.js";import"./chunk-HRP5LYWJ.js";import"./chunk-BIVFGNT6.js";import"./chunk-7PEPFLZH.js";import"./chunk-BRVOQZDM.js";import"./chunk-3M7VXIQH.js";import"./chunk-TBYT66N3.js";import"./chunk-5PTS4JDF.js";import"./chunk-MUI46NAG.js";import"./chunk-N27U3N2T.js";import"./chunk-4R5NBZMW.js";import"./chunk-NDYVXEZ5.js";import"./chunk-CMMPCPP5.js";import{o as h}from"./chunk-4DLSYLKE.js";import"./chunk-VPXBKZQM.js";import"./chunk-ZTKK3KB7.js";import"./chunk-GZXWFBZI.js";import"./chunk-B7IARA3F.js";import"./chunk-IZVEJCCI.js";import{k as R}from"./chunk-TEY6TKJV.js";import"./chunk-4M6XQSBA.js";import"./chunk-2JF6YUJG.js";import"./chunk-GGZQ5GCM.js";import"./chunk-TFUPB3ZG.js";import"./chunk-ANPNMGFG.js";import"./chunk-BMVJCP2M.js";import"./chunk-GMC3I5VG.js";import"./chunk-WGF2T2BG.js";import"./chunk-YZP43POT.js";import"./chunk-VEDIBGHD.js";import"./chunk-3IBUFXWY.js";import"./chunk-BP73DJTS.js";import{a as s,b as l,g as c}from"./chunk-JEGVIFEP.js";function I(o,t){let e=o.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(",")),e.outFields&&!t?.returnCountOnly?e.outFields.includes("*")?e.outFields="*":e.outFields=e.outFields.join(","):delete e.outFields,e.outSR&&(e.outSR=h(e.outSR)),e.dynamicDataSource&&(e.layer=JSON.stringify({source:e.dynamicDataSource}),delete e.dynamicDataSource),e}function S(o,t,e){return c(this,null,function*(){let r=yield x(o,t,e),a=r.data,u=a.geometryType,n=a.spatialReference,i={};for(let d of a.relatedRecordGroups){let m={fields:void 0,objectIdFieldName:void 0,geometryType:u,spatialReference:n,hasZ:!!a.hasZ,hasM:!!a.hasM,features:d.relatedRecords};if(d.objectId!=null)i[d.objectId]=m;else for(let p of Object.keys(d))p!=="relatedRecords"&&(i[d[p]]=m)}return l(s({},r),{data:i})})}function b(o,t,e){return c(this,null,function*(){let r=yield x(o,t,e,{returnCountOnly:!0}),a=r.data,u={};for(let n of a.relatedRecordGroups)n.objectId!=null&&(u[n.objectId]=n.count);return l(s({},r),{data:u})})}function x(a,u){return c(this,arguments,function*(o,t,e={},r){let n=j(s(s(l(s({},o.query),{f:"json"}),r),I(t,r)));return R(o.path+"/queryRelatedRecords",l(s({},e),{query:s(s({},e.query),n)}))})}function J(o,t,e){return c(this,null,function*(){t=f.from(t);let r=y(o);return S(r,t,e).then(a=>{let u=a.data,n={};return Object.keys(u).forEach(i=>n[i]=F.fromJSON(u[i])),n})})}function k(o,t,e){return c(this,null,function*(){t=f.from(t);let r=y(o);return b(r,t,s({},e)).then(a=>a.data)})}export{J as executeRelationshipQuery,k as executeRelationshipQueryForCount};
